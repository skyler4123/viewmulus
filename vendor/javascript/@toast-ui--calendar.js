import e from"tui-date-picker";var n=Object.defineProperty;var r=Object.defineProperties;var l=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var d=Object.prototype.hasOwnProperty;var p=Object.prototype.propertyIsEnumerable;var __defNormalProp=(e,r,l)=>r in e?n(e,r,{enumerable:true,configurable:true,writable:true,value:l}):e[r]=l;var __spreadValues=(e,n)=>{for(var r in n||(n={}))d.call(n,r)&&__defNormalProp(e,r,n[r]);if(c)for(var r of c(n))p.call(n,r)&&__defNormalProp(e,r,n[r]);return e};var __spreadProps=(e,n)=>r(e,l(n));var __objRest=(e,n)=>{var r={};for(var l in e)d.call(e,l)&&n.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&c)for(var l of c(e))n.indexOf(l)<0&&p.call(e,l)&&(r[l]=e[l]);return r};var h,_,w,$,P,O,A={},H=[],G=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s$3(e,n){for(var r in n)e[r]=n[r];return e}function a$3(e){var n=e.parentNode;n&&n.removeChild(e)}function h$3(e,n,r){var l,c,d,p={};for(d in n)"key"==d?l=n[d]:"ref"==d?c=n[d]:p[d]=n[d];if(arguments.length>2&&(p.children=arguments.length>3?h.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(d in e.defaultProps)void 0===p[d]&&(p[d]=e.defaultProps[d]);return v$3(e,p,l,c,null)}function v$3(e,n,r,l,c){var d={type:e,props:n,key:r,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==c?++w:c};return null==c&&null!=_.vnode&&_.vnode(d),d}function p$3(e){return e.children}function d$3(e,n){this.props=e,this.context=n}function _$3(e,n){if(null==n)return e.__?_$3(e.__,e.__.__k.indexOf(e)+1):null;for(var r;n<e.__k.length;n++)if(null!=(r=e.__k[n])&&null!=r.__e)return r.__e;return"function"==typeof e.type?_$3(e):null}function k$2(e){var n,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(r=e.__k[n])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return k$2(e)}}function b$2(e){(!e.__d&&(e.__d=true)&&$.push(e)&&!g$4.__r++||P!==_.debounceRendering)&&((P=_.debounceRendering)||setTimeout)(g$4)}function g$4(){for(var e;g$4.__r=$.length;)e=$.sort((function(e,n){return e.__v.__b-n.__v.__b})),$=[],e.some((function(e){var n,r,l,c,d,p;e.__d&&(d=(c=(n=e).__v).__e,(p=n.__P)&&(r=[],(l=s$3({},c)).__v=c.__v+1,j$3(p,c,l,n.__n,void 0!==p.ownerSVGElement,null!=c.__h?[d]:null,r,null==d?_$3(c):d,c.__h),z$2(r,c),c.__e!=d&&k$2(c)))}))}function w$3(e,n,r,l,c,d,p,h,_,w){var $,P,O,G,B,W,U,X=l&&l.__k||H,K=X.length;for(r.__k=[],$=0;$<n.length;$++)if(null!=(G=r.__k[$]=null==(G=n[$])||"boolean"==typeof G?null:"string"==typeof G||"number"==typeof G||"bigint"==typeof G?v$3(null,G,null,null,G):Array.isArray(G)?v$3(p$3,{children:G},null,null,null):G.__b>0?v$3(G.type,G.props,G.key,null,G.__v):G)){if(G.__=r,G.__b=r.__b+1,null===(O=X[$])||O&&G.key==O.key&&G.type===O.type)X[$]=void 0;else for(P=0;P<K;P++){if((O=X[P])&&G.key==O.key&&G.type===O.type){X[P]=void 0;break}O=null}j$3(e,G,O=O||A,c,d,p,h,_,w),B=G.__e,(P=G.ref)&&O.ref!=P&&(U||(U=[]),O.ref&&U.push(O.ref,null,G),U.push(P,G.__c||B,G)),null!=B?(null==W&&(W=B),"function"==typeof G.type&&G.__k===O.__k?G.__d=_=m$2(G,_,e):_=A$2(e,G,O,X,B,_),"function"==typeof r.type&&(r.__d=_)):_&&O.__e==_&&_.parentNode!=e&&(_=_$3(O))}for(r.__e=W,$=K;$--;)null!=X[$]&&("function"==typeof r.type&&null!=X[$].__e&&X[$].__e==r.__d&&(r.__d=_$3(l,$+1)),N(X[$],X[$]));if(U)for($=0;$<U.length;$++)M$2(U[$],U[++$],U[++$])}function m$2(e,n,r){for(var l,c=e.__k,d=0;c&&d<c.length;d++)(l=c[d])&&(l.__=e,n="function"==typeof l.type?m$2(l,n,r):A$2(r,l,l,c,l.__e,n));return n}function x$3(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){x$3(e,n)})):n.push(e)),n}function A$2(e,n,r,l,c,d){var p,h,_;if(void 0!==n.__d)p=n.__d,n.__d=void 0;else if(null==r||c!=d||null==c.parentNode)e:if(null==d||d.parentNode!==e)e.appendChild(c),p=null;else{for(h=d,_=0;(h=h.nextSibling)&&_<l.length;_+=2)if(h==c)break e;e.insertBefore(c,d),p=d}return void 0!==p?p:c.nextSibling}function C$1(e,n,r,l,c){var d;for(d in r)"children"===d||"key"===d||d in n||H$2(e,d,null,r[d],l);for(d in n)c&&"function"!=typeof n[d]||"children"===d||"key"===d||"value"===d||"checked"===d||r[d]===n[d]||H$2(e,d,n[d],r[d],l)}function $$1(e,n,r){"-"===n[0]?e.setProperty(n,r):e[n]=null==r?"":"number"!=typeof r||G.test(n)?r:r+"px"}function H$2(e,n,r,l,c){var d;e:if("style"===n)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof l&&(e.style.cssText=l=""),l)for(n in l)r&&n in r||$$1(e.style,n,"");if(r)for(n in r)l&&r[n]===l[n]||$$1(e.style,n,r[n])}else if("o"===n[0]&&"n"===n[1])d=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+d]=r,r?l||e.addEventListener(n,d?T$2:I$2,d):e.removeEventListener(n,d?T$2:I$2,d);else if("dangerouslySetInnerHTML"!==n){if(c)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==n&&"list"!==n&&"form"!==n&&"tabIndex"!==n&&"download"!==n&&n in e)try{e[n]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null!=r&&(false!==r||"a"===n[0]&&"r"===n[1])?e.setAttribute(n,r):e.removeAttribute(n))}}function I$2(e){this.l[e.type+false](_.event?_.event(e):e)}function T$2(e){this.l[e.type+true](_.event?_.event(e):e)}function j$3(e,n,r,l,c,d,p,h,w){var $,P,O,A,H,G,B,W,U,X,K,J,Q,ee=n.type;if(void 0!==n.constructor)return null;null!=r.__h&&(w=r.__h,h=n.__e=r.__e,n.__h=null,d=[h]),($=_.__b)&&$(n);try{e:if("function"==typeof ee){if(W=n.props,U=($=ee.contextType)&&l[$.__c],X=$?U?U.props.value:$.__:l,r.__c?B=(P=n.__c=r.__c).__=P.__E:("prototype"in ee&&ee.prototype.render?n.__c=P=new ee(W,X):(n.__c=P=new d$3(W,X),P.constructor=ee,P.render=O$2),U&&U.sub(P),P.props=W,P.state||(P.state={}),P.context=X,P.__n=l,O=P.__d=true,P.__h=[]),null==P.__s&&(P.__s=P.state),null!=ee.getDerivedStateFromProps&&(P.__s==P.state&&(P.__s=s$3({},P.__s)),s$3(P.__s,ee.getDerivedStateFromProps(W,P.__s))),A=P.props,H=P.state,O)null==ee.getDerivedStateFromProps&&null!=P.componentWillMount&&P.componentWillMount(),null!=P.componentDidMount&&P.__h.push(P.componentDidMount);else{if(null==ee.getDerivedStateFromProps&&W!==A&&null!=P.componentWillReceiveProps&&P.componentWillReceiveProps(W,X),!P.__e&&null!=P.shouldComponentUpdate&&false===P.shouldComponentUpdate(W,P.__s,X)||n.__v===r.__v){P.props=W,P.state=P.__s,n.__v!==r.__v&&(P.__d=false),P.__v=n,n.__e=r.__e,n.__k=r.__k,n.__k.forEach((function(e){e&&(e.__=n)})),P.__h.length&&p.push(P);break e}null!=P.componentWillUpdate&&P.componentWillUpdate(W,P.__s,X),null!=P.componentDidUpdate&&P.__h.push((function(){P.componentDidUpdate(A,H,G)}))}if(P.context=X,P.props=W,P.__v=n,P.__P=e,K=_.__r,J=0,"prototype"in ee&&ee.prototype.render)P.state=P.__s,P.__d=false,K&&K(n),$=P.render(P.props,P.state,P.context);else do{P.__d=false,K&&K(n),$=P.render(P.props,P.state,P.context),P.state=P.__s}while(P.__d&&++J<25);P.state=P.__s,null!=P.getChildContext&&(l=s$3(s$3({},l),P.getChildContext())),O||null==P.getSnapshotBeforeUpdate||(G=P.getSnapshotBeforeUpdate(A,H)),Q=null!=$&&$.type===p$3&&null==$.key?$.props.children:$,w$3(e,Array.isArray(Q)?Q:[Q],n,r,l,c,d,p,h,w),P.base=n.__e,n.__h=null,P.__h.length&&p.push(P),B&&(P.__E=P.__=null),P.__e=false}else null==d&&n.__v===r.__v?(n.__k=r.__k,n.__e=r.__e):n.__e=L$2(r.__e,n,r,l,c,d,p,w);($=_.diffed)&&$(n)}catch(e){n.__v=null,(w||null!=d)&&(n.__e=h,n.__h=!!w,d[d.indexOf(h)]=null),_.__e(e,n,r)}}function z$2(e,n){_.__c&&_.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){_.__e(e,n.__v)}}))}function L$2(e,n,r,l,c,d,p,_){var w,$,P,O=r.props,H=n.props,G=n.type,B=0;if("svg"===G&&(c=true),null!=d)for(;B<d.length;B++)if((w=d[B])&&"setAttribute"in w==!!G&&(G?w.localName===G:3===w.nodeType)){e=w,d[B]=null;break}if(null==e){if(null===G)return document.createTextNode(H);e=c?document.createElementNS("http://www.w3.org/2000/svg",G):document.createElement(G,H.is&&H),d=null,_=false}if(null===G)O===H||_&&e.data===H||(e.data=H);else{if(d=d&&h.call(e.childNodes),$=(O=r.props||A).dangerouslySetInnerHTML,P=H.dangerouslySetInnerHTML,!_){if(null!=d)for(O={},B=0;B<e.attributes.length;B++)O[e.attributes[B].name]=e.attributes[B].value;(P||$)&&(P&&($&&P.__html==$.__html||P.__html===e.innerHTML)||(e.innerHTML=P&&P.__html||""))}if(C$1(e,H,O,c,_),P)n.__k=[];else if(B=n.props.children,w$3(e,Array.isArray(B)?B:[B],n,r,l,c&&"foreignObject"!==G,d,p,d?d[0]:r.__k&&_$3(r,0),_),null!=d)for(B=d.length;B--;)null!=d[B]&&a$3(d[B]);_||("value"in H&&void 0!==(B=H.value)&&(B!==e.value||"progress"===G&&!B||"option"===G&&B!==O.value)&&H$2(e,"value",B,O.value,false),"checked"in H&&void 0!==(B=H.checked)&&B!==e.checked&&H$2(e,"checked",B,O.checked,false))}return e}function M$2(e,n,r){try{"function"==typeof e?e(n):e.current=n}catch(e){_.__e(e,r)}}function N(e,n,r){var l,c;if(_.unmount&&_.unmount(e),(l=e.ref)&&(l.current&&l.current!==e.__e||M$2(l,null,n)),null!=(l=e.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(e){_.__e(e,n)}l.base=l.__P=null}if(l=e.__k)for(c=0;c<l.length;c++)l[c]&&N(l[c],n,"function"!=typeof e.type);r||null==e.__e||a$3(e.__e),e.__e=e.__d=void 0}function O$2(e,n,r){return this.constructor(e,r)}function P$2(e,n,r){var l,c,d;_.__&&_.__(e,n),c=(l="function"==typeof r)?null:r&&r.__k||n.__k,d=[],j$3(n,e=(!l&&r||n).__k=h$3(p$3,null,[e]),c||A,A,void 0!==n.ownerSVGElement,!l&&r?[r]:c?null:n.firstChild?h.call(n.childNodes):null,d,!l&&r?r:c?c.__e:n.firstChild,l),z$2(d,e)}function q$3(e,n,r){var l,c,d,p=s$3({},e.props);for(d in n)"key"==d?l=n[d]:"ref"==d?c=n[d]:p[d]=n[d];return arguments.length>2&&(p.children=arguments.length>3?h.call(arguments,2):r),v$3(e.type,p,l||e.key,c||e.ref,null)}function B$1(e,n){var r={__c:n="__cC"+O++,__:e,Consumer:function(e,n){return e.children(n)},Provider:function(e){var r,l;return this.getChildContext||(r=[],(l={})[n]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some(b$2)},this.sub=function(e){r.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),n&&n.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r}h=H.slice,_={__e:function(e,n,r,l){for(var c,d,p;n=n.__;)if((c=n.__c)&&!c.__)try{if((d=c.constructor)&&null!=d.getDerivedStateFromError&&(c.setState(d.getDerivedStateFromError(e)),p=c.__d),null!=c.componentDidCatch&&(c.componentDidCatch(e,l||{}),p=c.__d),p)return c.__E=c}catch(n){e=n}throw e}},w=0,d$3.prototype.setState=function(e,n){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s$3({},this.state),"function"==typeof e&&(e=e(s$3({},r),this.props)),e&&s$3(r,e),null!=e&&this.__v&&(n&&this.__h.push(n),b$2(this))},d$3.prototype.forceUpdate=function(e){this.__v&&(this.__e=true,e&&this.__h.push(e),b$2(this))},d$3.prototype.render=p$3,$=[],g$4.__r=0,O=0;var B,W,U,X,K=0,J=[],Q=[],ee=_.__b,te=_.__r,ne=_.diffed,oe=_.__c,re=_.unmount;function p$2(e,n){_.__h&&_.__h(W,e,K||n),K=0;var r=W.__H||(W.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:Q}),r.__[e]}function y$1(e){return K=1,d$2(z$1,e)}function d$2(e,n,r){var l=p$2(B++,2);return l.t=e,l.__c||(l.__=[r?r(n):z$1(void 0,n),function(e){var n=l.t(l.__[0],e);l.__[0]!==n&&(l.__=[n,l.__[1]],l.__c.setState({}))}],l.__c=W),l.__}function _$2(e,n){var r=p$2(B++,3);!_.__s&&w$2(r.__H,n)&&(r.__=e,r.u=n,W.__H.__h.push(r))}function h$2(e,n){var r=p$2(B++,4);!_.__s&&w$2(r.__H,n)&&(r.__=e,r.u=n,W.__h.push(r))}function s$2(e){return K=5,F$2((function(){return{current:e}}),[])}function F$2(e,n){var r=p$2(B++,7);return w$2(r.__H,n)?(r.__V=e(),r.u=n,r.__h=e,r.__V):r.__}function T$1(e,n){return K=8,F$2((function(){return e}),n)}function q$2(e){var n=W.context[e.__c],r=p$2(B++,9);return r.c=e,n?(null==r.__&&(r.__=true,n.sub(W)),n.props.value):e.__}function b$1(){for(var e;e=J.shift();)if(e.__P)try{e.__H.__h.forEach(j$2),e.__H.__h.forEach(k$1),e.__H.__h=[]}catch(n){e.__H.__h=[],_.__e(n,e.__v)}}_.__b=function(e){W=null,ee&&ee(e)},_.__r=function(e){te&&te(e),B=0;var n=(W=e.__c).__H;n&&(U===W?(n.__h=[],W.__h=[],n.__.forEach((function(e){e.__V=Q,e.u=void 0}))):(n.__h.forEach(j$2),n.__h.forEach(k$1),n.__h=[])),U=W},_.diffed=function(e){ne&&ne(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==J.push(n)&&X===_.requestAnimationFrame||((X=_.requestAnimationFrame)||function(e){var n,u2=function(){clearTimeout(r),ie&&cancelAnimationFrame(n),setTimeout(e)},r=setTimeout(u2,100);ie&&(n=requestAnimationFrame(u2))})(b$1)),n.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.__V!==Q&&(e.__=e.__V),e.u=void 0,e.__V=Q}))),U=W=null},_.__c=function(e,n){n.some((function(e){try{e.__h.forEach(j$2),e.__h=e.__h.filter((function(e){return!e.__||k$1(e)}))}catch(r){n.some((function(e){e.__h&&(e.__h=[])})),n=[],_.__e(r,e.__v)}})),oe&&oe(e,n)},_.unmount=function(e){re&&re(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.forEach((function(e){try{j$2(e)}catch(e){n=e}})),n&&_.__e(n,r.__v))};var ie="function"==typeof requestAnimationFrame;function j$2(e){var n=W,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),W=n}function k$1(e){var n=W;e.__c=e.__(),W=n}function w$2(e,n){return!e||e.length!==n.length||n.some((function(n,r){return n!==e[r]}))}function z$1(e,n){return"function"==typeof n?n(e):n}function n$1(e){for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$1(e){return!!e&&!!e[he]}function t(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return false;var n=Object.getPrototypeOf(e);if(null===n)return true;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===me}(e)||Array.isArray(e)||!!e[fe]||!!e.constructor[fe]||s$1(e)||v$1(e))}function i$1(e,n,r){void 0===r&&(r=false),0===o$1(e)?(r?Object.keys:ge)(e).forEach((function(l){r&&"symbol"==typeof l||n(l,e[l],e)})):e.forEach((function(r,l){return n(l,r,e)}))}function o$1(e){var n=e[he];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:s$1(e)?2:v$1(e)?3:0}function u$1(e,n){return 2===o$1(e)?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function a$1(e,n){return 2===o$1(e)?e.get(n):e[n]}function f$1(e,n,r){var l=o$1(e);2===l?e.set(n,r):3===l?(e.delete(n),e.add(r)):e[n]=r}function c$1(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function s$1(e){return ce&&e instanceof Map}function v$1(e){return ue&&e instanceof Set}function p$1(e){return e.o||e.t}function l$1(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=ve(e);delete n[he];for(var r=ge(n),l=0;l<r.length;l++){var c=r[l],d=n[c];false===d.writable&&(d.writable=true,d.configurable=true),(d.get||d.set)&&(n[c]={configurable:true,writable:true,enumerable:d.enumerable,value:e[c]})}return Object.create(Object.getPrototypeOf(e),n)}function d$1(e,n){return void 0===n&&(n=false),y(e)||r$1(e)||!t(e)||(o$1(e)>1&&(e.set=e.add=e.clear=e.delete=h$1),Object.freeze(e),n&&i$1(e,(function(e,n){return d$1(n,true)}),true)),e}function h$1(){n$1(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var n=ye[e];return n||n$1(18,e),n}function _$1(){return se}function j$1(e,n){n&&(b("Patches"),e.u=[],e.s=[],e.v=n)}function O$1(e){g$2(e),e.p.forEach(S$1),e.p=null}function g$2(e){e===se&&(se=e.l)}function w$1(e){return se={p:[],l:se,h:e,m:true,_:0}}function S$1(e){var n=e[he];0===n.i||1===n.i?n.j():n.O=true}function P$1(e,n){n._=n.p.length;var r=n.p[0],l=void 0!==e&&e!==r;return n.h.g||b("ES5").S(n,e,l),l?(r[he].P&&(O$1(n),n$1(4)),t(e)&&(e=M$1(n,e),n.l||x$2(n,e)),n.u&&b("Patches").M(r[he].t,e,n.u,n.s)):e=M$1(n,r,[]),O$1(n),n.u&&n.v(n.u,n.s),e!==pe?e:void 0}function M$1(e,n,r){if(y(n))return n;var l=n[he];if(!l)return i$1(n,(function(c,d){return A$1(e,l,n,c,d,r)}),true),n;if(l.A!==e)return n;if(!l.P)return x$2(e,l.t,true),l.t;if(!l.I){l.I=true,l.A._--;var c=4===l.i||5===l.i?l.o=l$1(l.k):l.o;i$1(3===l.i?new Set(c):c,(function(n,d){return A$1(e,l,c,n,d,r)})),x$2(e,c,false),r&&e.u&&b("Patches").R(l,r,e.u,e.s)}return l.o}function A$1(e,n,r,l,c,d){if(r$1(c)){var p=M$1(e,c,d&&n&&3!==n.i&&!u$1(n.D,l)?d.concat(l):void 0);if(f$1(r,l,p),!r$1(p))return;e.m=false}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M$1(e,c),n&&n.A.l||x$2(e,c)}}function x$2(e,n,r){void 0===r&&(r=false),e.h.F&&e.m&&d$1(n,r)}function z(e,n){var r=e[he];return(r?p$1(r):e)[n]}function I$1(e,n){if(n in e)for(var r=Object.getPrototypeOf(e);r;){var l=Object.getOwnPropertyDescriptor(r,n);if(l)return l;r=Object.getPrototypeOf(r)}}function k(e){e.P||(e.P=true,e.l&&k(e.l))}function E$1(e){e.o||(e.o=l$1(e.t))}function R$1(e,n,r){var l=s$1(n)?b("MapSet").N(n,r):v$1(n)?b("MapSet").T(n,r):e.g?function(e,n){var r=Array.isArray(e),l={i:r?1:0,A:n?n.A:_$1(),P:false,I:false,D:{},l:n,t:e,k:null,o:null,j:null,C:false},c=l,d=_e;r&&(c=[l],d=we);var p=Proxy.revocable(c,d),h=p.revoke,_=p.proxy;return l.k=_,l.j=h,_}(n,r):b("ES5").J(n,r);return(r?r.A:_$1()).p.push(l),l}function D$1(e){return r$1(e)||n$1(22,e),function n2(e){if(!t(e))return e;var n,r=e[he],l=o$1(e);if(r){if(!r.P&&(r.i<4||!b("ES5").K(r)))return r.t;r.I=true,n=F$1(e,l),r.I=false}else n=F$1(e,l);return i$1(n,(function(e,l){r&&a$1(r.t,e)===l||f$1(n,e,n2(l))})),3===l?new Set(n):n}(e)}function F$1(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return l$1(e)}var ae,se,le="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ce="undefined"!=typeof Map,ue="undefined"!=typeof Set,de="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,pe=le?Symbol.for("immer-nothing"):((ae={})["immer-nothing"]=true,ae),fe=le?Symbol.for("immer-draftable"):"__$immer_draftable",he=le?Symbol.for("immer-state"):"__$immer_state",me=""+Object.prototype.constructor,ge="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ve=Object.getOwnPropertyDescriptors||function(e){var n={};return ge(e).forEach((function(r){n[r]=Object.getOwnPropertyDescriptor(e,r)})),n},ye={},_e={get:function(e,n){if(n===he)return e;var r=p$1(e);if(!u$1(r,n))return function(e,n,r){var l,c=I$1(n,r);return c?"value"in c?c.value:null===(l=c.get)||void 0===l?void 0:l.call(e.k):void 0}(e,r,n);var l=r[n];return e.I||!t(l)?l:l===z(e.t,n)?(E$1(e),e.o[n]=R$1(e.A.h,l,e)):l},has:function(e,n){return n in p$1(e)},ownKeys:function(e){return Reflect.ownKeys(p$1(e))},set:function(e,n,r){var l=I$1(p$1(e),n);if(null==l?void 0:l.set)return l.set.call(e.k,r),true;if(!e.P){var c=z(p$1(e),n),d=null==c?void 0:c[he];if(d&&d.t===r)return e.o[n]=r,e.D[n]=false,true;if(c$1(r,c)&&(void 0!==r||u$1(e.t,n)))return true;E$1(e),k(e)}return e.o[n]===r&&"number"!=typeof r&&(void 0!==r||n in e.o)||(e.o[n]=r,e.D[n]=true,true)},deleteProperty:function(e,n){return void 0!==z(e.t,n)||n in e.t?(e.D[n]=false,E$1(e),k(e)):delete e.D[n],e.o&&delete e.o[n],true},getOwnPropertyDescriptor:function(e,n){var r=p$1(e),l=Reflect.getOwnPropertyDescriptor(r,n);return l?{writable:true,configurable:1!==e.i||"length"!==n,enumerable:l.enumerable,value:r[n]}:l},defineProperty:function(){n$1(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n$1(12)}},we={};i$1(_e,(function(e,n){we[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),we.deleteProperty=function(e,n){return we.set.call(this,e,n,void 0)},we.set=function(e,n,r){return _e.set.call(this,e[0],n,r,e[0])};var De=function(){function e2(e){var n=this;this.g=de,this.F=true,this.produce=function(e,r,l){if("function"==typeof e&&"function"!=typeof r){var c=r;r=e;var d=n;return function(e){var n=this;void 0===e&&(e=c);for(var l=arguments.length,p=Array(l>1?l-1:0),h=1;h<l;h++)p[h-1]=arguments[h];return d.produce(e,(function(e){var l;return(l=r).call.apply(l,[n,e].concat(p))}))}}var p;if("function"!=typeof r&&n$1(6),void 0!==l&&"function"!=typeof l&&n$1(7),t(e)){var h=w$1(n),_=R$1(n,e,void 0),w=true;try{p=r(_),w=false}finally{w?O$1(h):g$2(h)}return"undefined"!=typeof Promise&&p instanceof Promise?p.then((function(e){return j$1(h,l),P$1(e,h)}),(function(e){throw O$1(h),e})):(j$1(h,l),P$1(p,h))}if(!e||"object"!=typeof e){if(void 0===(p=r(e))&&(p=e),p===pe&&(p=void 0),n.F&&d$1(p,true),l){var $=[],P=[];b("Patches").M(e,p,$,P),l($,P)}return p}n$1(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var l=arguments.length,c=Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];return n.produceWithPatches(r,(function(n){return e.apply(void 0,[n].concat(c))}))};var l,c,d=n.produce(e,r,(function(e,n){l=e,c=n}));return"undefined"!=typeof Promise&&d instanceof Promise?d.then((function(e){return[e,l,c]})):[d,l,c]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var e=e2.prototype;return e.createDraft=function(e){t(e)||n$1(8),r$1(e)&&(e=D$1(e));var n=w$1(this),r=R$1(this,e,void 0);return r[he].C=true,g$2(n),r},e.finishDraft=function(e,n){var r=e&&e[he];var l=r.A;return j$1(l,n),P$1(void 0,l)},e.setAutoFreeze=function(e){this.F=e},e.setUseProxies=function(e){e&&!de&&n$1(20),this.g=e},e.applyPatches=function(e,n){var r;for(r=n.length-1;r>=0;r--){var l=n[r];if(0===l.path.length&&"replace"===l.op){e=l.value;break}}r>-1&&(n=n.slice(r+1));var c=b("Patches").$;return r$1(e)?c(e,n):this.produce(e,(function(e){return c(e,n)}))},e2}(),$e=new De,Se=$e.produce;$e.produceWithPatches.bind($e);$e.setAutoFreeze.bind($e);$e.setUseProxies.bind($e);$e.applyPatches.bind($e);$e.createDraft.bind($e);$e.finishDraft.bind($e);var Ce=Se;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;function isUndefined$3(e){return void 0===e}var Te=isUndefined$3;var be=Te;function range(e,n,r){var l=[];var c;if(be(n)){n=e||0;e=0}r=r||1;c=r<0?-1:1;n*=c;for(;e*c<n;e+=r)l.push(e);return l}var ke=range;const Ee="0";const Me=24;const xe=2;const Ie=3;const Ne=27;const Pe=5;const Oe=280;const Re=44;const Ae=12;const Fe=12;const Le="12px 17px 0";const He=42;const ze=1;const Ge=2;const Be=72;const We={color:"#000",backgroundColor:"#a1b56c",dragBackgroundColor:"#a1b56c",borderColor:"#000"};const Ue=2;const je=9;function isBoolean(e){return"boolean"===typeof e||e instanceof Boolean}var Ve=isBoolean;function isNumber(e){return"number"===typeof e||e instanceof Number}var Ye=isNumber;function isObject$1(e){return e===Object(e)}var Ze=isObject$1;function isString$1(e){return"string"===typeof e||e instanceof String}var qe=isString$1;function isNil(e){return Te(e)||null===e}function isPresent(e){return!isNil(e)}function isFunction$2(e){return"function"===typeof e}const Xe="toastui-calendar-";function cls(...e){const n=[];e.forEach((e=>{e&&(qe(e)?n.push(e):Object.keys(e).forEach((r=>{e[r]&&n.push(r)})))}));return n.map((e=>`${Xe}${e}`)).join(" ")}function toPercent(e){return`${e}%`}function toPx(e){return`${e}px`}function extractPercentPx(e){const n=/(\d+)%/;const r=e.match(n);const l=/(-?)\s?(\d+)px/;const c=e.match(l);return{percent:r?parseInt(r[1],10):0,px:c?parseInt(`${c[1]}${c[2]}`,10):0}}function getEventColors(e,n){const r=e.model.getColors();return Object.keys(We).reduce(((e,l)=>{var c,d;const p=l;e[p]=null!=(d=null!=(c=r[p])?c:n[p])?d:We[p];return e}),{})}const Ke=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.)?([0-9]+)?([+-]\d\d(?::?\d\d)?|\s*Z)?$/;function throwNotSupported(){throw new Error("This operation is not supported.")}function getDateTime(e){const n=Ke.exec(e);if(n){const[,e,r,l,c,d,p,,h,_]=n;return{y:Number(e),M:Number(r)-1,d:Number(l),h:Number(c),m:Number(d),s:Number(p),ms:Number(h)||0,zoneInfo:_}}return null}function createFromDateString(e){const n=getDateTime(e);if(n&&!n.zoneInfo){const{y:e,M:r,d:l,h:c,m:d,s:p,ms:h}=n;return new Date(e,r,l,c,d,p,h)}return null}class LocalDate{constructor(...e){const[n]=e;n instanceof Date?this.d=new Date(n.getTime()):qe(n)&&1===e.length&&(this.d=createFromDateString(n));this.d||(this.d=new Date(...e))}setTimezoneOffset(){throwNotSupported()}setTimezoneName(){throwNotSupported()}clone(){return new LocalDate(this.d)}toDate(){return new Date(this.d.getTime())}toString(){return this.d.toString()}}const Je=["getTime","getTimezoneOffset","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getDay"];const Qe=["setTime","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds"];Je.forEach((e=>{LocalDate.prototype[e]=function(...n){return this.d[e](...n)}}));Qe.forEach((e=>{LocalDate.prototype[e]=function(...n){return this.d[e](...n)}}));class UTCDate extends LocalDate{clone(){return new UTCDate(this.d)}getTimezoneOffset(){return 0}}const et=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds","Day"];const tt=["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"];et.forEach((e=>{const n=`get${e}`;UTCDate.prototype[n]=function(...n){return this.d[`getUTC${e}`](...n)}}));tt.forEach((e=>{const n=`set${e}`;UTCDate.prototype[n]=function(...n){return this.d[`setUTC${e}`](...n)}}));const nt="Invalid DateTime Format";const ot="Invalid IANA Timezone Name";const rt="Invalid View Type";const it="@toast-ui/calendar: ";class InvalidTimezoneNameError extends Error{constructor(e){super(`${it}${ot} - ${e}`);this.name="InvalidTimezoneNameError"}}class InvalidDateTimeFormatError extends Error{constructor(e){super(`${it}${nt} - ${e}`);this.name="InvalidDateTimeFormatError"}}class InvalidViewTypeError extends Error{constructor(e){super(`${it}${rt} - ${e}`);this.name="InvalidViewTypeError"}}const at={error:(e,...n)=>{console.error(`${it}${e}`,...n)},warn:(e,...n)=>{console.warn(`${it}${e}`,...n)}};let st=LocalDate;function date(...e){return new st(...e)}function getLocalTimezoneOffset(){return-(new Date).getTimezoneOffset()}function calculateTimezoneOffset(e,n=new TZDate){if(!isIntlDateTimeFormatSupported()){at.warn("Intl.DateTimeFormat is not fully supported. So It will return the local timezone offset only.\nYou can use a polyfill to fix this issue.");return-n.toDate().getTimezoneOffset()}validateIANATimezoneName(e);const r=tokenizeTZDate(n,e);const l=tokenToUtcDate(r);return Math.round((l.getTime()-n.getTime())/60/1e3)}function isUsingDST(e,n){n&&validateIANATimezoneName(n);const r=new TZDate(e.getFullYear(),0,1);const l=new TZDate(e.getFullYear(),6,1);return n?Math.max(-calculateTimezoneOffset(n,r),-calculateTimezoneOffset(n,l))!==-calculateTimezoneOffset(n,e):Math.max(r.getTimezoneOffset(),l.getTimezoneOffset())!==e.toDate().getTimezoneOffset()}const lt={};const ct={};function isIntlDateTimeFormatSupported(){var e,n;return isFunction$2(null==(n=null==(e=null==Intl?void 0:Intl.DateTimeFormat)?void 0:e.prototype)?void 0:n.formatToParts)}function validateIANATimezoneName(e){if(ct[e])return true;try{Intl.DateTimeFormat("en-US",{timeZone:e});ct[e]=true;return true}catch(n){throw new InvalidTimezoneNameError(e)}}function getDateTimeFormat(e){if(lt[e])return lt[e];const n=new Intl.DateTimeFormat("en-US",{timeZone:e,hourCycle:"h23",hour12:false,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});lt[e]=n;return n}const ut={year:0,month:1,day:2,hour:3,minute:4,second:5};function tokenizeTZDate(e,n){const r=getDateTimeFormat(n);const l=r.formatToParts(e.toDate());return l.reduce(((e,n)=>{const r=ut[n.type];isPresent(r)&&(e[r]=parseInt(n.value,10));return e}),[])}function tokenToUtcDate(e){const[n,r,l,c,d,p]=e;const h=r-1;return new Date(Date.UTC(n,h,l,c%24,d,p))}function getTZOffsetMSDifference(e){return(getLocalTimezoneOffset()-e)*wt}class TZDate{constructor(...e){this.tzOffset=null;e[0]instanceof TZDate?this.d=date(e[0].getTime()):this.d=date(...e)}toString(){return this.d.toString()}addFullYear(e){this.setFullYear(this.getFullYear()+e);return this}addMonth(e){this.setMonth(this.getMonth()+e);return this}addDate(e){this.setDate(this.getDate()+e);return this}addHours(e){this.setHours(this.getHours()+e);return this}addMinutes(e){this.setMinutes(this.getMinutes()+e);return this}addSeconds(e){this.setSeconds(this.getSeconds()+e);return this}addMilliseconds(e){this.setMilliseconds(this.getMilliseconds()+e);return this}setWithRaw(e,n,r,l,c,d,p){this.setFullYear(e,n,r);this.setHours(l,c,d,p);return this}toDate(){return this.d.toDate()}valueOf(){return this.getTime()}getTimezoneOffset(){var e;return null!=(e=this.tzOffset)?e:this.d.getTimezoneOffset()}getTime(){return this.d.getTime()}getFullYear(){return this.d.getFullYear()}getMonth(){return this.d.getMonth()}getDate(){return this.d.getDate()}getHours(){return this.d.getHours()}getMinutes(){return this.d.getMinutes()}getSeconds(){return this.d.getSeconds()}getMilliseconds(){return this.d.getMilliseconds()}getDay(){return this.d.getDay()}setTime(e){return this.d.setTime(e)}setFullYear(e,n=this.getMonth(),r=this.getDate()){return this.d.setFullYear(e,n,r)}setMonth(e,n=this.getDate()){return this.d.setMonth(e,n)}setDate(e){return this.d.setDate(e)}setHours(e,n=this.getMinutes(),r=this.getSeconds(),l=this.getMilliseconds()){return this.d.setHours(e,n,r,l)}setMinutes(e,n=this.getSeconds(),r=this.getMilliseconds()){return this.d.setMinutes(e,n,r)}setSeconds(e,n=this.getMilliseconds()){return this.d.setSeconds(e,n)}setMilliseconds(e){return this.d.setMilliseconds(e)}tz(e){if("Local"===e)return new TZDate(this.getTime());const n=qe(e)?calculateTimezoneOffset(e,this):e;const r=new TZDate(this.getTime()-getTZOffsetMSDifference(n));r.tzOffset=n;return r}local(e){if(isPresent(e)){const n=qe(e)?calculateTimezoneOffset(e,this):e;return new TZDate(this.getTime()+getTZOffsetMSDifference(n))}return new TZDate(this.getTime()+(isPresent(this.tzOffset)?getTZOffsetMSDifference(this.tzOffset):0))}}function pick(e,...n){return n.reduce(((n,r)=>{e.hasOwnProperty(r)&&(n[r]=e[r]);return n}),{})}function clone$1(e){return Object.assign(Object.create(Object.getPrototypeOf(e)),e)}function mergeObject(e,n={}){if(!Ze(n))return e;Object.keys(n).forEach((r=>{const l=r;const c=r;Array.isArray(n[c])||!Ze(e[l])||!Ze(n[c])||n[c]instanceof TZDate?e[l]=n[c]:e[l]=mergeObject(e[l],n[c])}));return e}const dt=["top","left","width","height","exceedLeft","exceedRight","croppedStart","croppedEnd","goingDurationHeight","modelDurationHeight","comingDurationHeight","duplicateEvents","duplicateEventIndex","duplicateStarts","duplicateEnds","duplicateLeft","duplicateWidth","collapse","isMain"];class EventUIModel{constructor(e){this.top=0;this.left=0;this.width=0;this.height=0;this.exceedLeft=false;this.exceedRight=false;this.croppedStart=false;this.croppedEnd=false;this.goingDurationHeight=0;this.modelDurationHeight=100;this.comingDurationHeight=0;this.duplicateEvents=[];this.duplicateEventIndex=-1;this.duplicateLeft="";this.duplicateWidth="";this.collapse=false;this.isMain=false;this.model=e}getUIProps(){return pick(this,...dt)}setUIProps(e){Object.assign(this,e)}getStarts(){return this.renderStarts?this.renderStarts:this.model.getStarts()}getEnds(){return this.renderEnds?this.renderEnds:this.model.getEnds()}cid(){return this.model.cid()}valueOf(){return this.model}duration(){return this.model.duration()}collidesWith(e,n=true){const r=[];[this,e].forEach((e=>{const n=e instanceof EventUIModel&&e.duplicateEvents.length>0;n?r.push({start:e.duplicateStarts,end:e.duplicateEnds,goingDuration:0,comingDuration:0}):r.push({start:e.getStarts(),end:e.getEnds(),goingDuration:e.valueOf().goingDuration,comingDuration:e.valueOf().comingDuration})}));const[l,c]=r;return collidesWith({start:l.start.getTime(),end:l.end.getTime(),targetStart:c.start.getTime(),targetEnd:c.end.getTime(),goingDuration:l.goingDuration,comingDuration:l.comingDuration,targetGoingDuration:c.goingDuration,targetComingDuration:c.comingDuration,usingTravelTime:n})}clone(){const e=this.getUIProps();const n=new EventUIModel(this.model);n.setUIProps(e);this.renderStarts&&(n.renderStarts=new TZDate(this.renderStarts));this.renderEnds&&(n.renderEnds=new TZDate(this.renderEnds));return n}}function compareBooleansASC(e,n){return e!==n?e?-1:1:0}function compareNumbersASC(e,n){return Number(e)-Number(n)}function compareStringsASC(e,n){const r=String(e);const l=String(n);return r===l?0:r>l?1:-1}function compareEventsASC(e,n){const r=e instanceof EventUIModel?e.model:e;const l=n instanceof EventUIModel?n.model:n;const c=compareBooleansASC(r.isAllday||r.hasMultiDates,l.isAllday||l.hasMultiDates);if(c)return c;const d=compare(e.getStarts(),n.getStarts());if(d)return d;const p=e.duration();const h=n.duration();return p<h?1:p>h?-1:r.cid()-l.cid()}function bsearch(e,n,r,l){let c=0;let d=e.length-1;let p;let h;let _;l=l||compareStringsASC;while(c<=d){p=(c+d)/2|0;h=r?r(e[p]):e[p];_=l(h,n);if(_<0)c=p+1;else{if(!(_>0))return p;d=p-1}}return~d}var pt={bsearch:bsearch,compare:{event:{asc:compareEventsASC},num:{asc:compareNumbersASC}}};function first(e){return e[0]}function last(e){return e[e.length-1]}function findLastIndex(e,n){for(let r=e.length-1;r>=0;r-=1)if(n(e[r]))return r;return-1}function fill(e,n){return e>0?Array.from({length:e},(()=>Array.isArray(n)?n.slice():n)):[]}var ft=(e=>{e[e.SUN=0]="SUN";e[e.MON=1]="MON";e[e.TUE=2]="TUE";e[e.WED=3]="WED";e[e.THU=4]="THU";e[e.FRI=5]="FRI";e[e.SAT=6]="SAT";return e})(ft||{});const ht=7;const mt=/^(\d{4}[-|/]*\d{2}[-|/]*\d{2})\s?(\d{2}:\d{2}:\d{2})?$/;const gt={millisecondsTo:{},millisecondsFrom:{}};const vt=[24,60,60,1e3];function leadingZero(e,n){let r="";let l=0;if(String(e).length>n)return String(e);for(;l<n-1;l+=1)r+="0";return(r+e).slice(-1*n)}function getHourForMeridiem(e){let n=e.getHours();0===n&&(n=12);n>12&&(n%=12);return n}const yt={YYYYMMDD(e){return[e.getFullYear(),leadingZero(e.getMonth()+1,2),leadingZero(e.getDate(),2)].join("")},YYYY(e){return String(e.getFullYear())},MM(e){return leadingZero(e.getMonth()+1,2)},DD(e){return leadingZero(e.getDate(),2)},"HH:mm":function(e){const n=e.getHours();const r=e.getMinutes();return`${leadingZero(n,2)}:${leadingZero(r,2)}`},"hh:mm":function(e){const n=getHourForMeridiem(e);const r=e.getMinutes();return`${leadingZero(n,2)}:${leadingZero(r,2)}`},hh(e){const n=getHourForMeridiem(e);return String(n)},tt(e){const n=e.getHours();return n<12?"am":"pm"}};const _t=864e5;const wt=6e4;const Dt=20*wt;const $t=18e5;function toFormat(e,n){let r=n;Object.entries(yt).forEach((([n,l])=>{r=r.replace(n,l(e))}));return r}function convMilliseconds(e,n,r){const l={date:0,hour:1,minute:2,second:3};return!(e in l)||isNaN(n)?0:[n].concat(vt.slice(l[e])).reduce(r)}function millisecondsFrom(e,n){const r=gt.millisecondsFrom;const l=e+n;if(r[l])return r[l];const c=convMilliseconds(e,n,((e,n)=>e*n));if(!c)return 0;r[l]=c;return r[l]}function toStartOfDay(e){const n=e?new TZDate(e):new TZDate;n.setHours(0,0,0,0);return n}function makeDateRange(e,n,r){const l=e.getTime();const c=n.getTime();const d=new TZDate(e);const p=[];let h=l;while(h<=c&&c>=d.getTime()){p.push(new TZDate(d));h+=r;d.addMilliseconds(r)}return p}function clone(e){return new TZDate(e)}function compare(e,n){const r=e.getTime();const l=n.getTime();return r<l?-1:r>l?1:0}function isSameYear(e,n){return e.getFullYear()===n.getFullYear()}function isSameMonth(e,n){return isSameYear(e,n)&&e.getMonth()===n.getMonth()}function isSameDate(e,n){return isSameMonth(e,n)&&e.getDate()===n.getDate()}function max(e,n){return 1===compare(e,n)?e:n}function min(e,n){return-1===compare(e,n)?e:n}function parse(e,n=-1){const r=e.match(mt);let l;let c;let d;if(!r)throw new InvalidDateTimeFormatError(e);if(e.length>8){l=~e.indexOf("/")?"/":"-";const n=r.splice(1);c=n[0].split(l);d=n[1]?n[1].split(":"):[0,0,0]}else{const[e]=r;c=[e.substr(0,4),e.substr(4,2),e.substr(6,2)];d=[0,0,0]}return(new TZDate).setWithRaw(Number(c[0]),Number(c[1])+n,Number(c[2]),Number(d[0]),Number(d[1]),Number(d[2]),0)}function toEndOfDay(e){const n=e?new TZDate(e):new TZDate;n.setHours(23,59,59,999);return n}function isWeekend(e){return 0===e||6===e}function isSunday(e){return 0===e}function isSaturday(e){return 6===e}function toStartOfMonth(e){const n=new TZDate(e);n.setDate(1);n.setHours(0,0,0,0);return n}function toEndOfMonth(e){const n=toStartOfMonth(e);n.setMonth(n.getMonth()+1);n.setDate(n.getDate()-1);n.setHours(23,59,59,999);return n}function getRowStyleInfo(e,n,r,l){const c=5;const d=100/e;const p=e>c?100/(e-1):d;let h=0;const _=ke(r,ht).concat(ke(e)).slice(0,ht);n=!l&&n;const w=_.map((r=>{let l=n?p:d;e>c&&n&&isWeekend(r)&&(l=p/2);const _={width:l,left:h};h+=l;return _}));const{length:$}=w;const P=fill($,fill($,0));w.forEach((({width:e},n)=>{for(let r=0;r<=n;r+=1)for(let l=n;l<$;l+=1)P[r][l]+=e}));P[0][$-1]=100;return{rowStyleInfo:w,cellWidthMap:P.map((e=>e.map(toPercent)))}}function addMilliseconds(e,n){const r=clone(e);r.setMilliseconds(e.getMilliseconds()+n);return r}function addMinutes(e,n){const r=clone(e);r.setMinutes(e.getMinutes()+n);return r}function setTimeStrToDate(e,n){const r=clone(e);r.setHours(...n.split(":").map(Number));return r}function addDate(e,n){const r=clone(e);r.setDate(e.getDate()+n);return r}function subtractDate(e,n){const r=clone(e);r.setDate(e.getDate()-n);return r}function addMonths(e,n=1){const r=clone(e);if(0!==n){const e=r.getDate();const l=new TZDate(r.getTime());l.setMonth(r.getMonth()+n+1,0);const c=l.getDate();if(e>=c)return l;r.setFullYear(l.getFullYear(),l.getMonth(),e)}return r}function getDateDifference(e,n){const r=new TZDate(e.getFullYear(),e.getMonth(),e.getDate()).getTime();const l=new TZDate(n.getFullYear(),n.getMonth(),n.getDate()).getTime();return Math.round((r-l)/_t)}function hasCollision(e,n,r,l){return r>e&&r<n||l>e&&l<n||r<=e&&l>=n}function collidesWith({start:e,end:n,targetStart:r,targetEnd:l,goingDuration:c,comingDuration:d,targetGoingDuration:p,targetComingDuration:h,usingTravelTime:_}){Math.abs(n-e)<Dt&&(n+=Dt);Math.abs(n-e)<Dt&&(n+=Dt);if(_){e-=millisecondsFrom("minute",c);n+=millisecondsFrom("minute",d);r-=millisecondsFrom("minute",p);l+=millisecondsFrom("minute",h)}return hasCollision(e,n,r,l)}function isSameEvent(e,n,r){return e.id===n&&e.calendarId===r}function idGenerator(){let e=0;return{next(){e+=1;return e}}}const St=function(){const e=idGenerator();return()=>e.next()}();function stamp(e){e.__fe_id||(e.__fe_id=St());return e.__fe_id}class EventModel{constructor(e={}){this.id="";this.calendarId="";this.title="";this.body="";this.isAllday=false;this.start=new TZDate;this.end=new TZDate;this.goingDuration=0;this.comingDuration=0;this.location="";this.attendees=[];this.category="time";this.dueDateClass="";this.recurrenceRule="";this.state="Busy";this.isVisible=true;this.isPending=false;this.isFocused=false;this.isReadOnly=false;this.isPrivate=false;this.customStyle={};this.raw=null;this.hasMultiDates=false;stamp(this);this.init(e)}init({id:e="",calendarId:n="",title:r="",body:l="",isAllday:c=false,start:d=new TZDate,end:p=new TZDate,goingDuration:h=0,comingDuration:_=0,location:w="",attendees:$=[],category:P="time",dueDateClass:O="",recurrenceRule:A="",state:H="Busy",isVisible:G=true,isPending:B=false,isFocused:W=false,isReadOnly:U=false,isPrivate:X=false,color:K,backgroundColor:J,dragBackgroundColor:Q,borderColor:ee,customStyle:te={},raw:ne=null}={}){this.id=e;this.calendarId=n;this.title=r;this.body=l;this.isAllday="allday"===P||c;this.goingDuration=h;this.comingDuration=_;this.location=w;this.attendees=$;this.category=P;this.dueDateClass=O;this.recurrenceRule=A;this.state=H;this.isVisible=G;this.isPending=B;this.isFocused=W;this.isReadOnly=U;this.isPrivate=X;this.color=K;this.backgroundColor=J;this.dragBackgroundColor=Q;this.borderColor=ee;this.customStyle=te;this.raw=ne;this.isAllday?this.setAlldayPeriod(d,p):this.setTimePeriod(d,p);"milestone"!==P&&"task"!==P||(this.start=new TZDate(this.end))}setAlldayPeriod(e,n){let r;let l;r=qe(e)?parse(e.substring(0,10)):new TZDate(e||Date.now());l=qe(n)?parse(n.substring(0,10)):new TZDate(n||this.start);this.start=r;this.start.setHours(0,0,0);this.end=l||new TZDate(this.start);this.end.setHours(23,59,59)}setTimePeriod(e,n){this.start=new TZDate(e||Date.now());this.end=new TZDate(n||this.start);n||this.end.setMinutes(this.end.getMinutes()+30);this.hasMultiDates=this.end.getTime()-this.start.getTime()>_t}getStarts(){return this.start}getEnds(){return this.end}cid(){return stamp(this)}equals(e){return this.id===e.id&&(this.title===e.title&&(this.body===e.body&&(this.isAllday===e.isAllday&&(0===compare(this.getStarts(),e.getStarts())&&(0===compare(this.getEnds(),e.getEnds())&&(this.color===e.color&&(this.backgroundColor===e.backgroundColor&&(this.dragBackgroundColor===e.dragBackgroundColor&&this.borderColor===e.borderColor))))))))}duration(){const e=Number(this.getStarts());const n=Number(this.getEnds());let r;r=this.isAllday?Number(toEndOfDay(n))-Number(toStartOfDay(e)):n-e;return r}valueOf(){return this}collidesWith(e,n=true){e=e instanceof EventUIModel?e.model:e;return collidesWith({start:Number(this.getStarts()),end:Number(this.getEnds()),targetStart:Number(e.getStarts()),targetEnd:Number(e.getEnds()),goingDuration:this.goingDuration,comingDuration:this.comingDuration,targetGoingDuration:e.goingDuration,targetComingDuration:e.comingDuration,usingTravelTime:n})}toEventObject(){return{id:this.id,calendarId:this.calendarId,__cid:this.cid(),title:this.title,body:this.body,isAllday:this.isAllday,start:this.start,end:this.end,goingDuration:this.goingDuration,comingDuration:this.comingDuration,location:this.location,attendees:this.attendees,category:this.category,dueDateClass:this.dueDateClass,recurrenceRule:this.recurrenceRule,state:this.state,isVisible:this.isVisible,isPending:this.isPending,isFocused:this.isFocused,isReadOnly:this.isReadOnly,isPrivate:this.isPrivate,color:this.color,backgroundColor:this.backgroundColor,dragBackgroundColor:this.dragBackgroundColor,borderColor:this.borderColor,customStyle:this.customStyle,raw:this.raw}}getColors(){return{color:this.color,backgroundColor:this.backgroundColor,dragBackgroundColor:this.dragBackgroundColor,borderColor:this.borderColor}}}EventModel.schema={required:["title"],dateRange:["start","end"]};function isTimeEvent({model:e}){const{category:n,isAllday:r,hasMultiDates:l}=e;return"time"===n&&!r&&!l}class Collection{constructor(e){this.internalMap=new Map;isFunction$2(e)&&(this.getItemID=e)}static and(...e){const{length:n}=e;return r=>{for(let l=0;l<n;l+=1)if(!e[l].call(null,r))return false;return true}}static or(...e){const{length:n}=e;return n?r=>{let l=e[0].call(null,r);for(let c=1;c<n;c+=1)l=l||e[c].call(null,r);return l}:()=>false}getItemID(e){var n;return null!=(n=null==e?void 0:e._id)?n:""}getFirstItem(){const e=this.internalMap.values();return e.next().value}add(...e){e.forEach((e=>{const n=this.getItemID(e);this.internalMap.set(n,e)}));return this}remove(...e){const n=[];e.forEach((e=>{const r=qe(e)||Ye(e)?e:this.getItemID(e);if(this.internalMap.has(r)){n.push(this.internalMap.get(r));this.internalMap.delete(r)}}));return 1===n.length?n[0]:n}has(e){const n=qe(e)||Ye(e)?e:this.getItemID(e);return this.internalMap.has(n)}get(e){var n;const r=qe(e)||Ye(e)?e:this.getItemID(e);return null!=(n=this.internalMap.get(r))?n:null}doWhenHas(e,n){const r=this.internalMap.get(e);isNil(r)||n(r)}filter(e){const n=new Collection;this.hasOwnProperty("getItemID")&&(n.getItemID=this.getItemID);this.internalMap.forEach((r=>{true===e(r)&&n.add(r)}));return n}groupBy(e){const n={};this.internalMap.forEach((r=>{var l;let c=isFunction$2(e)?e(r):r[e];isFunction$2(c)&&(c=c.call(r));null!=(l=n[c])?l:n[c]=new Collection(this.getItemID);n[c].add(r)}));return n}find(e){let n=null;const r=this.internalMap.values();let l=r.next();while(false===l.done){if(e(l.value)){n=l.value;break}l=r.next()}return n}sort(e){return this.toArray().sort(e)}each(e){const n=this.internalMap.entries();let r=n.next();while(false===r.done){const[l,c]=r.value;if(false===e(c,l))break;r=n.next()}}clear(){this.internalMap.clear()}toArray(){return Array.from(this.internalMap.values())}get size(){return this.internalMap.size}}function createEventCollection(...e){const n=new Collection((e=>e.cid()));e.length&&n.add(...e);return n}function getDateRange(e,n){return makeDateRange(toStartOfDay(e),toEndOfDay(n),_t)}function isAllday(e){return e.isAllday||"time"===e.category&&Number(e.end)-Number(e.start)>_t}function filterByCategory(e){const{model:n}=e;return isAllday(n)?"allday":n.category}function addToMatrix(e,n){const r=getDateRange(n.getStarts(),n.getEnds());r.forEach((r=>{const l=toFormat(r,"YYYYMMDD");const c=e[l]=e[l]||[];c.push(n.cid())}))}function removeFromMatrix(e,n){const r=n.cid();Object.values(e).forEach((e=>{const n=e.indexOf(r);~n&&e.splice(n,1)}))}function addEvent(e,n){e.events.add(n);addToMatrix(e.idsOfDay,n);return n}function createEvent(e,n){const r=new EventModel(n);return addEvent(e,r)}function createEvents(e,n=[]){return n.map((n=>createEvent(e,n)))}function updateEvent(e,n,r,l){const{idsOfDay:c}=e;const d=e.events.find((e=>isSameEvent(e,n,r)));if(!d)return false;d.init(__spreadValues(__spreadValues({},d),l));removeFromMatrix(c,d);addToMatrix(c,d);return true}function deleteEvent(e,n){removeFromMatrix(e.idsOfDay,n);e.events.remove(n);return n}function clearEvents(e){e.idsOfDay={};e.events.clear()}function createCalendarSlice(e=[]){return{calendar:{calendars:e,events:createEventCollection(),idsOfDay:{}}}}function createCalendarDispatchers(e){return{createEvents:n=>e(Ce((e=>{createEvents(e.calendar,n)}))),updateEvent:({event:n,eventData:r})=>e(Ce((e=>{updateEvent(e.calendar,n.id,n.calendarId,r)}))),deleteEvent:n=>e(Ce((e=>{deleteEvent(e.calendar,n)}))),clearEvents:()=>e(Ce((e=>{clearEvents(e.calendar)}))),setCalendars:n=>e(Ce((e=>{e.calendar.calendars=n}))),setCalendarColor:(n,r)=>e(Ce((e=>{const l=e.calendar.calendars.map((e=>e.id===n?__spreadValues(__spreadValues({},e),r):e));const c=e.calendar.events.toArray().map((e=>{var l,c,d,p;if(e.calendarId===n){e.color=null!=(l=r.color)?l:e.color;e.backgroundColor=null!=(c=r.backgroundColor)?c:e.backgroundColor;e.borderColor=null!=(d=r.borderColor)?d:e.borderColor;e.dragBackgroundColor=null!=(p=r.dragBackgroundColor)?p:e.dragBackgroundColor}return e}));const d=createEventCollection(...c);e.calendar.calendars=l;e.calendar.events=d}))),setCalendarVisibility:(n,r)=>e(Ce((e=>{const l=e.calendar.events.toArray();e.calendar.events=createEventCollection(...l.map((e=>{n.includes(e.calendarId)&&(e.isVisible=r);return e})))})))}}var Ct=(e=>{e[e.IDLE=0]="IDLE";e[e.INIT=1]="INIT";e[e.DRAGGING=2]="DRAGGING";e[e.CANCELED=3]="CANCELED";return e})(Ct||{});function createDndSlice(){return{dnd:{draggingItemType:null,draggingState:0,initX:null,initY:null,x:null,y:null,draggingEventUIModel:null}}}function createDndDispatchers(e){return{initDrag:n=>{e(Ce((e=>{e.dnd=__spreadProps(__spreadValues(__spreadValues({},e.dnd),n),{draggingState:1})})))},setDragging:n=>{e(Ce((e=>{e.dnd=__spreadProps(__spreadValues(__spreadValues({},e.dnd),n),{draggingState:2})})))},cancelDrag:()=>{e(Ce((e=>{e.dnd=createDndSlice().dnd;e.dnd.draggingState=3})))},reset:()=>{e(Ce((e=>{e.dnd=createDndSlice().dnd})))},setDraggingEventUIModel:n=>{e(Ce((e=>{var r;e.dnd.draggingEventUIModel=null!=(r=null==n?void 0:n.clone())?r:null})))}}}function createGridSelectionSlice(){return{gridSelection:{dayGridMonth:null,dayGridWeek:null,timeGrid:null,accumulated:{dayGridMonth:[]}}}}function createGridSelectionDispatchers(e){return{setGridSelection:(n,r)=>{e(Ce((e=>{e.gridSelection[n]=r})))},addGridSelection:(n,r)=>{e(Ce((e=>{if("dayGridMonth"===n&&r){e.gridSelection.accumulated[n]=[...e.gridSelection.accumulated[n],r];e.gridSelection.dayGridMonth=null}})))},clearAll:()=>e(Ce((e=>{e.gridSelection=createGridSelectionSlice().gridSelection})))}}const Tt=3;const bt=-1;function getRestPanelHeight(e,n,r){return Object.keys(e).reduce(((r,l)=>l===n?r:r-e[l].height-Tt),r)}function createWeekViewLayoutSlice(){return{layout:500,weekViewLayout:{lastPanelType:null,dayGridRows:{},selectedDuplicateEventCid:bt}}}function createWeekViewLayoutDispatchers(e){return{setLastPanelType:n=>{e(Ce((e=>{e.weekViewLayout.lastPanelType=n;n&&(e.weekViewLayout.dayGridRows[n].height=getRestPanelHeight(e.weekViewLayout.dayGridRows,n,e.layout))})))},updateLayoutHeight:n=>e(Ce((e=>{const{lastPanelType:r}=e.weekViewLayout;e.layout=n;r&&(e.weekViewLayout.dayGridRows[r].height=getRestPanelHeight(e.weekViewLayout.dayGridRows,r,n))}))),updateDayGridRowHeight:({rowName:n,height:r})=>e(Ce((e=>{const{lastPanelType:l}=e.weekViewLayout;e.weekViewLayout.dayGridRows[n]={height:r};l&&(e.weekViewLayout.dayGridRows[l].height=getRestPanelHeight(e.weekViewLayout.dayGridRows,l,e.layout))}))),updateDayGridRowHeightByDiff:({rowName:n,diff:r})=>e(Ce((e=>{var l,c,d;const{lastPanelType:p}=e.weekViewLayout;const h=null!=(d=null==(c=null==(l=e.weekViewLayout.dayGridRows)?void 0:l[n])?void 0:c.height)?d:Be;e.weekViewLayout.dayGridRows[n]={height:h+r};p&&(e.weekViewLayout.dayGridRows[p].height=getRestPanelHeight(e.weekViewLayout.dayGridRows,p,e.layout))}))),setSelectedDuplicateEventCid:n=>e(Ce((e=>{e.weekViewLayout.selectedDuplicateEventCid=null!=n?n:bt})))}}function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}const kt=["sun","mon","tue","wed","thu","fri","sat"];const getDayName=e=>kt[e];function getDayNames(e,n){return e.map((e=>{const r=e.getDay();const l=n.length>0?n[r]:capitalize(getDayName(r));return{date:e.getDate(),day:e.getDay(),dayName:l,isToday:true,renderDate:"date",dateInstance:e}}))}function initializeCollapseDuplicateEvents(e){if(!e)return false;const n={getDuplicateEvents:(e,n)=>n.filter((n=>n.title===e.title&&0===compare(n.start,e.start)&&0===compare(n.end,e.end))).sort(((e,n)=>e.calendarId>n.calendarId?1:-1)),getMainEvent:e=>last(e)};return Ve(e)?n:__spreadValues(__spreadValues({},n),e)}function initializeWeekOptions(e={}){const n=__spreadValues({startDayOfWeek:ft.SUN,dayNames:[],narrowWeekend:false,workweek:false,showNowIndicator:true,showTimezoneCollapseButton:false,timezonesCollapsed:false,hourStart:0,hourEnd:24,eventView:true,taskView:true,collapseDuplicateEvents:false},e);n.collapseDuplicateEvents=initializeCollapseDuplicateEvents(n.collapseDuplicateEvents);return n}function initializeTimezoneOptions(e={}){return __spreadValues({zones:[]},e)}function initializeMonthOptions(e={}){const n=__spreadValues({dayNames:[],visibleWeeksCount:0,workweek:false,narrowWeekend:false,startDayOfWeek:ft.SUN,isAlways6Weeks:true,visibleEventCount:6},e);0===n.dayNames.length&&(n.dayNames=kt.slice());return n}function initializeGridSelectionOptions(e){return Ve(e)?{enableDblClick:e,enableClick:e}:__spreadValues({enableDblClick:true,enableClick:true},e)}const initialEventFilter=e=>!!e.isVisible;function createOptionsSlice(e={}){var n,r,l,c,d,p;return{options:{defaultView:null!=(n=e.defaultView)?n:"week",useFormPopup:null!=(r=e.useFormPopup)&&r,useDetailPopup:null!=(l=e.useDetailPopup)&&l,isReadOnly:null!=(c=e.isReadOnly)&&c,week:initializeWeekOptions(e.week),month:initializeMonthOptions(e.month),gridSelection:initializeGridSelectionOptions(e.gridSelection),usageStatistics:null==(d=e.usageStatistics)||d,eventFilter:null!=(p=e.eventFilter)?p:initialEventFilter,timezone:initializeTimezoneOptions(e.timezone)}}}function createOptionsDispatchers(e){return{setOptions:(n={})=>e(Ce((e=>{var r;n.gridSelection&&(n.gridSelection=initializeGridSelectionOptions(n.gridSelection));(null==(r=n.week)?void 0:r.collapseDuplicateEvents)&&(n.week.collapseDuplicateEvents=initializeCollapseDuplicateEvents(n.week.collapseDuplicateEvents));mergeObject(e.options,n)})))}}var Et=(e=>{e.SeeMore="seeMore";e.Form="form";e.Detail="detail";return e})(Et||{});function createPopupSlice(){return{popup:{seeMore:null,form:null,detail:null}}}function createPopupDispatchers(e){return{showSeeMorePopup:n=>e(Ce((e=>{e.popup.seeMore=n;e.popup.form=null;e.popup.detail=null}))),showFormPopup:n=>e(Ce((e=>{e.popup.form=n;e.popup.seeMore=null;e.popup.detail=null}))),showDetailPopup:(n,r)=>e(Ce((e=>{e.popup.detail=n;e.popup.form=null;r||(e.popup.seeMore=null)}))),hideSeeMorePopup:()=>e(Ce((e=>{e.popup.seeMore=null}))),hideFormPopup:()=>e(Ce((e=>{e.popup.form=null}))),hideDetailPopup:()=>e(Ce((e=>{e.popup.detail=null}))),hideAllPopup:()=>e(Ce((e=>{e.popup.seeMore=null;e.popup.form=null;e.popup.detail=null})))}}const noop=()=>{};const Mt=/^auto$|^$|%/;function getStyle(e,n){let r=e.style[n];if((!r||"auto"===r)&&document.defaultView){const l=document.defaultView.getComputedStyle(e,null);r=l?l[n]:null}return"auto"===r?null:r}function invalidateSizeValue(e){return qe(e)?Mt.test(e):null===e}function getSize(e){const n=getStyle(e,"width");const r=getStyle(e,"height");if((invalidateSizeValue(n)||invalidateSizeValue(r))&&e.getBoundingClientRect){const{width:n,height:r}=e.getBoundingClientRect();return{width:n||e.offsetWidth,height:r||e.offsetHeight}}return{width:parseFloat(null!=n?n:"0"),height:parseFloat(null!=r?r:"0")}}const xt="undefined"===typeof Element?noop:Element;const It=xt.prototype;It.matches||It.webkitMatchesSelector||It.msMatchesSelector||function(e){return Array.from(document.querySelectorAll(e)).includes(this)};function stripTags(e){return e.replace(/<([^>]+)>/gi,"")}const Nt=60;const Pt={milestone(e){const n=cls("icon","ic-milestone");return h$3(p$3,null,h$3("span",{className:n}),h$3("span",{style:{backgroundColor:e.backgroundColor}},stripTags(e.title)))},milestoneTitle(){return h$3("span",{className:cls("left-content")},"Milestone")},task(e){return`#${e.title}`},taskTitle(){return h$3("span",{className:cls("left-content")},"Task")},alldayTitle(){return h$3("span",{className:cls("left-content")},"All Day")},allday(e){return stripTags(e.title)},time(e){const{start:n,title:r}=e;return n?h$3("span",null,h$3("strong",null,toFormat(n,"HH:mm")),"",h$3("span",null,stripTags(r))):stripTags(r)},goingDuration(e){const{goingDuration:n}=e;const r=Math.floor(n/Nt);const l=n%Nt;return`GoingTime ${leadingZero(r,2)}:${leadingZero(l,2)}`},comingDuration(e){const{comingDuration:n}=e;const r=Math.floor(n/Nt);const l=n%Nt;return`ComingTime ${leadingZero(r,2)}:${leadingZero(l,2)}`},monthMoreTitleDate(e){const{date:n,day:r}=e;const l=cls("more-title-date");const c=cls("more-title-day");const d=capitalize(getDayName(r));return h$3(p$3,null,h$3("span",{className:l},n),h$3("span",{className:c},d))},monthMoreClose(){return""},monthGridHeader(e){const n=parseInt(e.date.split("-")[2],10);const r=cls("weekday-grid-date",{"weekday-grid-date-decorator":e.isToday});return h$3("span",{className:r},n)},monthGridHeaderExceed(e){const n=cls("weekday-grid-more-events");return h$3("span",{className:n},e," more")},monthGridFooter(e){return""},monthGridFooterExceed(e){return""},monthDayName(e){return e.label},weekDayName(e){const n=cls("day-name__date");const r=cls("day-name__name");return h$3(p$3,null,h$3("span",{className:n},e.date),"",h$3("span",{className:r},e.dayName))},weekGridFooterExceed(e){return`+${e}`},collapseBtnTitle(){const e=cls("collapse-btn-icon");return h$3("span",{className:e})},timezoneDisplayLabel({displayLabel:e,timezoneOffset:n}){if(isNil(e)&&isPresent(n)){const e=n<0?"-":"+";const r=Math.abs(n/Nt);const l=Math.abs(n%Nt);return`GMT${e}${leadingZero(r,2)}:${leadingZero(l,2)}`}return e},timegridDisplayPrimaryTime(e){const{time:n}=e;return toFormat(n,"hh tt")},timegridDisplayTime(e){const{time:n}=e;return toFormat(n,"HH:mm")},timegridNowIndicatorLabel(e){const{time:n,format:r="HH:mm"}=e;return toFormat(n,r)},popupIsAllday(){return"All day"},popupStateFree(){return"Free"},popupStateBusy(){return"Busy"},titlePlaceholder(){return"Subject"},locationPlaceholder(){return"Location"},startDatePlaceholder(){return"Start date"},endDatePlaceholder(){return"End date"},popupSave(){return"Save"},popupUpdate(){return"Update"},popupEdit(){return"Edit"},popupDelete(){return"Delete"},popupDetailTitle({title:e}){return e},popupDetailDate({isAllday:e,start:n,end:r}){const l="YYYY.MM.DD";const c="hh:mm tt";const d=`${l} ${c}`;const p=toFormat(n,e?l:c);const h=isSameDate(n,r)?c:d;return e?`${p}${isSameDate(n,r)?"":` - ${toFormat(r,l)}`}`:`${toFormat(n,d)} - ${toFormat(r,h)}`},popupDetailLocation({location:e}){return e},popupDetailAttendees({attendees:e=[]}){return e.join(", ")},popupDetailState({state:e}){return e||"Busy"},popupDetailRecurrenceRule({recurrenceRule:e}){return e},popupDetailBody({body:e}){return e}};function createTemplateSlice(e={}){return{template:__spreadValues(__spreadValues({},Pt),e)}}function createTemplateDispatchers(e){return{setTemplate:n=>e(Ce((e=>{e.template=__spreadValues(__spreadValues({},e.template),n)})))}}function createViewSlice(e="week"){const n=new TZDate;n.setHours(0,0,0,0);return{view:{currentView:e,renderDate:n}}}function createViewDispatchers(e){return{changeView:n=>e(Ce((e=>{e.view.currentView=n}))),setRenderDate:n=>e(Ce((e=>{e.view.renderDate=toStartOfDay(n)})))}}const Ot=Te(window)||!window.navigator;const Rt=Ot?_$2:h$2;function createStoreContext(){const e=B$1(null);function StoreProvider2({children:n,store:r}){return h$3(e.Provider,{value:r,children:n})}const useStore2=(n,r=Object.is)=>{const l=q$2(e);if(isNil(l))throw new Error("StoreProvider is not found");const[,c]=d$2((e=>e+1),0);const d=l.getState();const p=s$2(d);const h=s$2(n);const _=s$2(r);const w=s$2(false);const $=s$2();Te($.current)&&($.current=n(d));let P;let O=false;const A=p.current!==d||h.current!==n||_.current!==r||w.current;if(A){P=n(d);O=!r($.current,P)}Rt((()=>{O&&($.current=P);p.current=d;h.current=n;_.current=r;w.current=false}));const H=s$2(d);Rt((()=>{const listener=()=>{try{const e=l.getState();const n=h.current(e);const r=!_.current($.current,n);if(r){p.current=e;$.current=P;c()}}catch(e){console.error("[toastui-calendar] failed to update state",null==e?void 0:e.message);w.current=true;c()}};const e=l.subscribe(listener);l.getState()!==H.current&&listener();return e}),[]);return O?P:$.current};const useInternalStore2=()=>{const n=q$2(e);if(isNil(n))throw new Error("StoreProvider is not found");return F$2((()=>n),[n])};return{StoreProvider:StoreProvider2,useStore:useStore2,useInternalStore:useInternalStore2}}function createStore(e){let n;const r=new Set;const setState=e=>{const l=e(n);if(l!==n){const e=n;n=__spreadValues(__spreadValues({},n),l);r.forEach((r=>r(n,e)))}};const getState=()=>n;const subscribe=(e,l,c)=>{let d=e;if(l){let r=l(n);const p=null!=c?c:Object.is;d=()=>{const c=l(n);if(!p(r,c)){const n=r;r=c;e(r,n)}}}r.add(d);return()=>r.delete(d)};const clearListeners=()=>r.clear();const l={setState:setState,getState:getState,subscribe:subscribe,clearListeners:clearListeners};n=e(setState,getState,l);return l}const storeCreator=e=>n=>__spreadProps(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues({},createOptionsSlice(e)),createTemplateSlice(e.template)),createPopupSlice()),createWeekViewLayoutSlice()),createCalendarSlice(e.calendars)),createViewSlice(e.defaultView)),createDndSlice()),createGridSelectionSlice()),{dispatch:{options:createOptionsDispatchers(n),popup:createPopupDispatchers(n),weekViewLayout:createWeekViewLayoutDispatchers(n),calendar:createCalendarDispatchers(n),view:createViewDispatchers(n),dnd:createDndDispatchers(n),gridSelection:createGridSelectionDispatchers(n),template:createTemplateDispatchers(n)}});const initCalendarStore=(e={})=>createStore(storeCreator(e));const{StoreProvider:At,useStore:Ft,useInternalStore:Lt}=createStoreContext();function useDispatch(e){return Ft(T$1((n=>e?n.dispatch[e]:n.dispatch),[e]))}function topLevelStateSelector(e){return n=>n[e]}const Ht=topLevelStateSelector("calendar");const zt=topLevelStateSelector("weekViewLayout");const Gt=topLevelStateSelector("template");const Bt=topLevelStateSelector("view");const Wt=topLevelStateSelector("options");const Ut=topLevelStateSelector("dnd");var jt={exports:{}};
/*! @license DOMPurify 2.3.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.8/LICENSE */(function(e,n){(function(n,r){e.exports=r()})(0,(function(){function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _setPrototypeOf(e,n){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf2(e,n){e.__proto__=n;return e};return _setPrototypeOf(e,n)}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _construct(e,n,r){_construct=_isNativeReflectConstruct()?Reflect.construct:function _construct2(e,n,r){var l=[null];l.push.apply(l,n);var c=Function.bind.apply(e,l);var d=new c;r&&_setPrototypeOf(d,r.prototype);return d};return _construct.apply(null,arguments)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,n){if(e){if("string"===typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,l=new Array(n);r<n;r++)l[r]=e[r];return l}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e=Object.hasOwnProperty,n=Object.setPrototypeOf,r=Object.isFrozen,l=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor;var d=Object.freeze,p=Object.seal,h=Object.create;var _="undefined"!==typeof Reflect&&Reflect,w=_.apply,$=_.construct;w||(w=function apply2(e,n,r){return e.apply(n,r)});d||(d=function freeze2(e){return e});p||(p=function seal2(e){return e});$||($=function construct2(e,n){return _construct(e,_toConsumableArray(n))});var P=unapply(Array.prototype.forEach);var O=unapply(Array.prototype.pop);var A=unapply(Array.prototype.push);var H=unapply(String.prototype.toLowerCase);var G=unapply(String.prototype.match);var B=unapply(String.prototype.replace);var W=unapply(String.prototype.indexOf);var U=unapply(String.prototype.trim);var X=unapply(RegExp.prototype.test);var K=unconstruct(TypeError);function unapply(e){return function(n){for(var r=arguments.length,l=new Array(r>1?r-1:0),c=1;c<r;c++)l[c-1]=arguments[c];return w(e,n,l)}}function unconstruct(e){return function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return $(e,r)}}function addToSet(e,l){n&&n(e,null);var c=l.length;while(c--){var d=l[c];if("string"===typeof d){var p=H(d);if(p!==d){r(l)||(l[c]=p);d=p}}e[d]=true}return e}function clone2(n){var r=h(null);var l;for(l in n)w(e,n,[l])&&(r[l]=n[l]);return r}function lookupGetter(e,n){while(null!==e){var r=c(e,n);if(r){if(r.get)return unapply(r.get);if("function"===typeof r.value)return unapply(r.value)}e=l(e)}function fallbackValue(e){console.warn("fallback value for",e);return null}return fallbackValue}var J=d(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]);var Q=d(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]);var ee=d(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]);var te=d(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]);var ne=d(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]);var oe=d(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]);var re=d(["#text"]);var ie=d(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]);var ae=d(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]);var se=d(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]);var le=d(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var ce=p(/\{\{[\w\W]*|[\w\W]*\}\}/gm);var ue=p(/<%[\w\W]*|[\w\W]*%>/gm);var de=p(/^data-[\-\w.\u00B7-\uFFFF]/);var pe=p(/^aria-[\-\w]+$/);var fe=p(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i);var he=p(/^(?:\w+script|data):/i);var me=p(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g);var ge=p(/^html$/i);var ve=function getGlobal2(){return"undefined"===typeof window?null:window};var ye=function _createTrustedTypesPolicy2(e,n){if("object"!==_typeof(e)||"function"!==typeof e.createPolicy)return null;var r=null;var l="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(l)&&(r=n.currentScript.getAttribute(l));var c="dompurify"+(r?"#"+r:"");try{return e.createPolicy(c,{createHTML:function createHTML(e){return e}})}catch(e){console.warn("TrustedTypes policy "+c+" could not be created.");return null}};function createDOMPurify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve();var n=function DOMPurify2(e){return createDOMPurify(e)};n.version="2.3.8";n.removed=[];if(!e||!e.document||9!==e.document.nodeType){n.isSupported=false;return n}var r=e.document;var l=e.document;var c=e.DocumentFragment,p=e.HTMLTemplateElement,h=e.Node,_=e.Element,w=e.NodeFilter,$=e.NamedNodeMap,_e=void 0===$?e.NamedNodeMap||e.MozNamedAttrMap:$,we=e.HTMLFormElement,De=e.DOMParser,$e=e.trustedTypes;var Se=_.prototype;var Ce=lookupGetter(Se,"cloneNode");var Te=lookupGetter(Se,"nextSibling");var be=lookupGetter(Se,"childNodes");var ke=lookupGetter(Se,"parentNode");if("function"===typeof p){var Ee=l.createElement("template");Ee.content&&Ee.content.ownerDocument&&(l=Ee.content.ownerDocument)}var Me=ye($e,r);var xe=Me?Me.createHTML(""):"";var Ie=l,Ne=Ie.implementation,Pe=Ie.createNodeIterator,Oe=Ie.createDocumentFragment,Re=Ie.getElementsByTagName;var Ae=r.importNode;var Fe={};try{Fe=clone2(l).documentMode?l.documentMode:{}}catch(e){}var Le={};n.isSupported="function"===typeof ke&&Ne&&"undefined"!==typeof Ne.createHTMLDocument&&9!==Fe;var He=ce,ze=ue,Ge=de,Be=pe,We=he,Ue=me;var je=fe;var Ve=null;var Ye=addToSet({},[].concat(_toConsumableArray(J),_toConsumableArray(Q),_toConsumableArray(ee),_toConsumableArray(ne),_toConsumableArray(re)));var Ze=null;var qe=addToSet({},[].concat(_toConsumableArray(ie),_toConsumableArray(ae),_toConsumableArray(se),_toConsumableArray(le)));var Xe=Object.seal(Object.create(null,{tagNameCheck:{writable:true,configurable:false,enumerable:true,value:null},attributeNameCheck:{writable:true,configurable:false,enumerable:true,value:null},allowCustomizedBuiltInElements:{writable:true,configurable:false,enumerable:true,value:false}}));var Ke=null;var Je=null;var Qe=true;var et=true;var tt=false;var nt=false;var ot=false;var rt=false;var it=false;var at=false;var st=false;var lt=false;var ct=true;var ut=true;var dt=false;var pt={};var ft=null;var ht=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);var mt=null;var gt=addToSet({},["audio","video","img","source","image","track"]);var vt=null;var yt=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]);var _t="http://www.w3.org/1998/Math/MathML";var wt="http://www.w3.org/2000/svg";var Dt="http://www.w3.org/1999/xhtml";var $t=Dt;var St=false;var Ct;var Tt=["application/xhtml+xml","text/html"];var bt="text/html";var kt;var Et=null;var Mt=l.createElement("form");var xt=function isRegexOrFunction2(e){return e instanceof RegExp||e instanceof Function};var It=function _parseConfig2(e){if(!Et||Et!==e){e&&"object"===_typeof(e)||(e={});e=clone2(e);Ve="ALLOWED_TAGS"in e?addToSet({},e.ALLOWED_TAGS):Ye;Ze="ALLOWED_ATTR"in e?addToSet({},e.ALLOWED_ATTR):qe;vt="ADD_URI_SAFE_ATTR"in e?addToSet(clone2(yt),e.ADD_URI_SAFE_ATTR):yt;mt="ADD_DATA_URI_TAGS"in e?addToSet(clone2(gt),e.ADD_DATA_URI_TAGS):gt;ft="FORBID_CONTENTS"in e?addToSet({},e.FORBID_CONTENTS):ht;Ke="FORBID_TAGS"in e?addToSet({},e.FORBID_TAGS):{};Je="FORBID_ATTR"in e?addToSet({},e.FORBID_ATTR):{};pt="USE_PROFILES"in e&&e.USE_PROFILES;Qe=false!==e.ALLOW_ARIA_ATTR;et=false!==e.ALLOW_DATA_ATTR;tt=e.ALLOW_UNKNOWN_PROTOCOLS||false;nt=e.SAFE_FOR_TEMPLATES||false;ot=e.WHOLE_DOCUMENT||false;at=e.RETURN_DOM||false;st=e.RETURN_DOM_FRAGMENT||false;lt=e.RETURN_TRUSTED_TYPE||false;it=e.FORCE_BODY||false;ct=false!==e.SANITIZE_DOM;ut=false!==e.KEEP_CONTENT;dt=e.IN_PLACE||false;je=e.ALLOWED_URI_REGEXP||je;$t=e.NAMESPACE||Dt;e.CUSTOM_ELEMENT_HANDLING&&xt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Xe.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck);e.CUSTOM_ELEMENT_HANDLING&&xt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Xe.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck);e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Xe.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements);Ct=Ct=-1===Tt.indexOf(e.PARSER_MEDIA_TYPE)?bt:e.PARSER_MEDIA_TYPE;kt="application/xhtml+xml"===Ct?function(e){return e}:H;nt&&(et=false);st&&(at=true);if(pt){Ve=addToSet({},_toConsumableArray(re));Ze=[];if(true===pt.html){addToSet(Ve,J);addToSet(Ze,ie)}if(true===pt.svg){addToSet(Ve,Q);addToSet(Ze,ae);addToSet(Ze,le)}if(true===pt.svgFilters){addToSet(Ve,ee);addToSet(Ze,ae);addToSet(Ze,le)}if(true===pt.mathMl){addToSet(Ve,ne);addToSet(Ze,se);addToSet(Ze,le)}}if(e.ADD_TAGS){Ve===Ye&&(Ve=clone2(Ve));addToSet(Ve,e.ADD_TAGS)}if(e.ADD_ATTR){Ze===qe&&(Ze=clone2(Ze));addToSet(Ze,e.ADD_ATTR)}e.ADD_URI_SAFE_ATTR&&addToSet(vt,e.ADD_URI_SAFE_ATTR);if(e.FORBID_CONTENTS){ft===ht&&(ft=clone2(ft));addToSet(ft,e.FORBID_CONTENTS)}ut&&(Ve["#text"]=true);ot&&addToSet(Ve,["html","head","body"]);if(Ve.table){addToSet(Ve,["tbody"]);delete Ke.tbody}d&&d(e);Et=e}};var Nt=addToSet({},["mi","mo","mn","ms","mtext"]);var Pt=addToSet({},["foreignobject","desc","title","annotation-xml"]);var Ot=addToSet({},["title","style","font","a","script"]);var Rt=addToSet({},Q);addToSet(Rt,ee);addToSet(Rt,te);var At=addToSet({},ne);addToSet(At,oe);var Ft=function _checkValidNamespace2(e){var n=ke(e);n&&n.tagName||(n={namespaceURI:Dt,tagName:"template"});var r=H(e.tagName);var l=H(n.tagName);return e.namespaceURI===wt?n.namespaceURI===Dt?"svg"===r:n.namespaceURI===_t?"svg"===r&&("annotation-xml"===l||Nt[l]):Boolean(Rt[r]):e.namespaceURI===_t?n.namespaceURI===Dt?"math"===r:n.namespaceURI===wt?"math"===r&&Pt[l]:Boolean(At[r]):e.namespaceURI===Dt&&(!(n.namespaceURI===wt&&!Pt[l])&&(!(n.namespaceURI===_t&&!Nt[l])&&(!At[r]&&(Ot[r]||!Rt[r]))))};var Lt=function _forceRemove2(e){A(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(n){try{e.outerHTML=xe}catch(n){e.remove()}}};var Ht=function _removeAttribute2(e,r){try{A(n.removed,{attribute:r.getAttributeNode(e),from:r})}catch(e){A(n.removed,{attribute:null,from:r})}r.removeAttribute(e);if("is"===e&&!Ze[e])if(at||st)try{Lt(r)}catch(e){}else try{r.setAttribute(e,"")}catch(e){}};var zt=function _initDocument2(e){var n;var r;if(it)e="<remove></remove>"+e;else{var c=G(e,/^[\r\n\t ]+/);r=c&&c[0]}"application/xhtml+xml"===Ct&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var d=Me?Me.createHTML(e):e;if($t===Dt)try{n=(new De).parseFromString(d,Ct)}catch(e){}if(!n||!n.documentElement){n=Ne.createDocument($t,"template",null);try{n.documentElement.innerHTML=St?"":d}catch(e){}}var p=n.body||n.documentElement;e&&r&&p.insertBefore(l.createTextNode(r),p.childNodes[0]||null);return $t===Dt?Re.call(n,ot?"html":"body")[0]:ot?n.documentElement:p};var Gt=function _createIterator2(e){return Pe.call(e.ownerDocument||e,e,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT,null,false)};var Bt=function _isClobbered2(e){return e instanceof we&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof _e)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore)};var Wt=function _isNode2(e){return"object"===_typeof(h)?e instanceof h:e&&"object"===_typeof(e)&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName};var Ut=function _executeHook2(e,r,l){Le[e]&&P(Le[e],(function(e){e.call(n,r,l,Et)}))};var jt=function _sanitizeElements2(e){var r;Ut("beforeSanitizeElements",e,null);if(Bt(e)){Lt(e);return true}if(X(/[\u0080-\uFFFF]/,e.nodeName)){Lt(e);return true}var l=kt(e.nodeName);Ut("uponSanitizeElement",e,{tagName:l,allowedTags:Ve});if(e.hasChildNodes()&&!Wt(e.firstElementChild)&&(!Wt(e.content)||!Wt(e.content.firstElementChild))&&X(/<[/\w]/g,e.innerHTML)&&X(/<[/\w]/g,e.textContent)){Lt(e);return true}if("select"===l&&X(/<template/i,e.innerHTML)){Lt(e);return true}if(!Ve[l]||Ke[l]){if(!Ke[l]&&Yt(l)){if(Xe.tagNameCheck instanceof RegExp&&X(Xe.tagNameCheck,l))return false;if(Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(l))return false}if(ut&&!ft[l]){var c=ke(e)||e.parentNode;var d=be(e)||e.childNodes;if(d&&c){var p=d.length;for(var h=p-1;h>=0;--h)c.insertBefore(Ce(d[h],true),Te(e))}}Lt(e);return true}if(e instanceof _&&!Ft(e)){Lt(e);return true}if(("noscript"===l||"noembed"===l)&&X(/<\/no(script|embed)/i,e.innerHTML)){Lt(e);return true}if(nt&&3===e.nodeType){r=e.textContent;r=B(r,He," ");r=B(r,ze," ");if(e.textContent!==r){A(n.removed,{element:e.cloneNode()});e.textContent=r}}Ut("afterSanitizeElements",e,null);return false};var Vt=function _isValidAttribute2(e,n,r){if(ct&&("id"===n||"name"===n)&&(r in l||r in Mt))return false;if(et&&!Je[n]&&X(Ge,n));else if(Qe&&X(Be,n));else if(!Ze[n]||Je[n]){if(!(Yt(e)&&(Xe.tagNameCheck instanceof RegExp&&X(Xe.tagNameCheck,e)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(e))&&(Xe.attributeNameCheck instanceof RegExp&&X(Xe.attributeNameCheck,n)||Xe.attributeNameCheck instanceof Function&&Xe.attributeNameCheck(n))||"is"===n&&Xe.allowCustomizedBuiltInElements&&(Xe.tagNameCheck instanceof RegExp&&X(Xe.tagNameCheck,r)||Xe.tagNameCheck instanceof Function&&Xe.tagNameCheck(r))))return false}else if(vt[n]);else if(X(je,B(r,Ue,"")));else if("src"!==n&&"xlink:href"!==n&&"href"!==n||"script"===e||0!==W(r,"data:")||!mt[e]){if(tt&&!X(We,B(r,Ue,"")));else if(r)return false}else;return true};var Yt=function _basicCustomElementTest2(e){return e.indexOf("-")>0};var Zt=function _sanitizeAttributes2(e){var r;var l;var c;var d;Ut("beforeSanitizeAttributes",e,null);var p=e.attributes;if(p){var h={attrName:"",attrValue:"",keepAttr:true,allowedAttributes:Ze};d=p.length;while(d--){r=p[d];var _=r,w=_.name,$=_.namespaceURI;l="value"===w?r.value:U(r.value);c=kt(w);h.attrName=c;h.attrValue=l;h.keepAttr=true;h.forceKeepAttr=void 0;Ut("uponSanitizeAttribute",e,h);l=h.attrValue;if(!h.forceKeepAttr){Ht(w,e);if(h.keepAttr)if(X(/\/>/i,l))Ht(w,e);else{if(nt){l=B(l,He," ");l=B(l,ze," ")}var P=kt(e.nodeName);if(Vt(P,c,l))try{$?e.setAttributeNS($,w,l):e.setAttribute(w,l);O(n.removed)}catch(e){}}}}Ut("afterSanitizeAttributes",e,null)}};var qt=function _sanitizeShadowDOM2(e){var n;var r=Gt(e);Ut("beforeSanitizeShadowDOM",e,null);while(n=r.nextNode()){Ut("uponSanitizeShadowNode",n,null);if(!jt(n)){n.content instanceof c&&_sanitizeShadowDOM2(n.content);Zt(n)}}Ut("afterSanitizeShadowDOM",e,null)};n.sanitize=function(l,d){var p;var _;var w;var $;var P;St=!l;St&&(l="\x3c!--\x3e");if("string"!==typeof l&&!Wt(l)){if("function"!==typeof l.toString)throw K("toString is not a function");l=l.toString();if("string"!==typeof l)throw K("dirty is not a string, aborting")}if(!n.isSupported){if("object"===_typeof(e.toStaticHTML)||"function"===typeof e.toStaticHTML){if("string"===typeof l)return e.toStaticHTML(l);if(Wt(l))return e.toStaticHTML(l.outerHTML)}return l}rt||It(d);n.removed=[];"string"===typeof l&&(dt=false);if(dt){if(l.nodeName){var O=kt(l.nodeName);if(!Ve[O]||Ke[O])throw K("root node is forbidden and cannot be sanitized in-place")}}else if(l instanceof h){p=zt("\x3c!----\x3e");_=p.ownerDocument.importNode(l,true);1===_.nodeType&&"BODY"===_.nodeName||"HTML"===_.nodeName?p=_:p.appendChild(_)}else{if(!at&&!nt&&!ot&&-1===l.indexOf("<"))return Me&&lt?Me.createHTML(l):l;p=zt(l);if(!p)return at?null:lt?xe:""}p&&it&&Lt(p.firstChild);var A=Gt(dt?l:p);while(w=A.nextNode())if((3!==w.nodeType||w!==$)&&!jt(w)){w.content instanceof c&&qt(w.content);Zt(w);$=w}$=null;if(dt)return l;if(at){if(st){P=Oe.call(p.ownerDocument);while(p.firstChild)P.appendChild(p.firstChild)}else P=p;Ze.shadowroot&&(P=Ae.call(r,P,true));return P}var H=ot?p.outerHTML:p.innerHTML;ot&&Ve["!doctype"]&&p.ownerDocument&&p.ownerDocument.doctype&&p.ownerDocument.doctype.name&&X(ge,p.ownerDocument.doctype.name)&&(H="<!DOCTYPE "+p.ownerDocument.doctype.name+">\n"+H);if(nt){H=B(H,He," ");H=B(H,ze," ")}return Me&&lt?Me.createHTML(H):H};n.setConfig=function(e){It(e);rt=true};n.clearConfig=function(){Et=null;rt=false};n.isValidAttribute=function(e,n,r){Et||It({});var l=kt(e);var c=kt(n);return Vt(l,c,r)};n.addHook=function(e,n){if("function"===typeof n){Le[e]=Le[e]||[];A(Le[e],n)}};n.removeHook=function(e){if(Le[e])return O(Le[e])};n.removeHooks=function(e){Le[e]&&(Le[e]=[])};n.removeAllHooks=function(){Le={}};return n}var _e=createDOMPurify();return _e}))})(jt);var Vt=window.DOMPurify||(window.DOMPurify=jt.exports.default||jt.exports);const Yt="data-target-temp";function addAttributeHooks(){Vt.addHook("beforeSanitizeAttributes",(e=>{if("A"===e.tagName){const n=e.getAttribute("target");n?e.setAttribute(Yt,n):e.setAttribute("target","_self")}}));Vt.addHook("afterSanitizeAttributes",(e=>{if("A"===e.tagName&&e.hasAttribute(Yt)){e.setAttribute("target",e.getAttribute(Yt));e.removeAttribute(Yt);"_blank"===e.getAttribute("target")&&e.setAttribute("rel","noopener")}}))}function removeAttributeHooks(){Vt.removeAllHooks()}function sanitize(e){return Vt.sanitize(e)}function Template({template:e,param:n,as:r="div"}){var l;const c=Ft(Gt);const d=c[e];if(isNil(d))return null;const p=d(n);return qe(p)?h$3(r,{className:cls(`template-${e}`),dangerouslySetInnerHTML:{__html:sanitize(p)}}):q$3(p,{className:`${null!=(l=p.props.className)?l:""} ${cls(`template-${e}`)}`})}const Zt=B$1(null);const qt=Zt.Provider;const useEventBus=()=>{const e=q$2(Zt);if(!e)throw new Error("useEventBus must be used within a EventBusProvider");return e};const primaryTimezoneSelector=e=>{var n,r,l,c,d;return null!=(d=null==(c=null==(l=null==(r=null==(n=e.options)?void 0:n.timezone)?void 0:r.zones)?void 0:l[0])?void 0:c.timezoneName)?d:"Local"};const customOffsetCalculatorSelector=e=>{var n,r;return null==(r=null==(n=e.options)?void 0:n.timezone)?void 0:r.customOffsetCalculator};const timezonesSelector=e=>{var n;return null!=(n=e.options.timezone.zones)?n:[]};function useTZConverter(){const e=Ft(customOffsetCalculatorSelector);const n=isPresent(e);return T$1(((r,l=new TZDate)=>l.tz(n?e(r,l.getTime()):r)),[e,n])}function usePrimaryTimezone(){const e=Ft(primaryTimezoneSelector);const n=useTZConverter();const r=T$1((()=>n(e)),[e,n]);return[e,r]}function isWeekDayName(e,n){return"week"===e}function getWeekDayNameColor({dayName:e,theme:n,today:r}){var l,c;const{day:d,dateInstance:p}=e;const h=isSameDate(r,p);const _=!h&&p<r;return isSunday(d)?n.common.holiday.color:_?null==(l=n.week)?void 0:l.pastDay.color:isSaturday(d)?n.common.saturday.color:h?null==(c=n.week)?void 0:c.today.color:n.common.dayName.color}function getMonthDayNameColor({dayName:e,theme:n}){const{day:r}=e;return isSunday(r)?n.common.holiday.color:isSaturday(r)?n.common.saturday.color:n.common.dayName.color}function DayName({dayName:e,style:n,type:r,theme:l}){const c=useEventBus();const[,d]=usePrimaryTimezone();const p=d();const{day:h}=e;const _="week"===r?getWeekDayNameColor({dayName:e,theme:l,today:p}):getMonthDayNameColor({dayName:e,theme:l});const w=`${r}DayName`;const handleClick=()=>{isWeekDayName(r)&&c.fire("clickDayName",{date:toFormat(e.dateInstance,"YYYY-MM-DD")})};return h$3("div",{className:cls("day-name-item",r),style:n},h$3("span",{className:cls({[`holiday-${getDayName(h)}`]:isWeekend(h)}),style:{color:_},onClick:handleClick,"data-testid":`dayName-${r}-${getDayName(h)}`},h$3(Template,{template:w,param:e})))}const Xt=topLevelStateSelector("common");const Kt=topLevelStateSelector("month");const weekDayGridLeftSelector=e=>e.week.dayGridLeft;const weekTimeGridLeftSelector=e=>e.week.timeGridLeft;const monthMoreViewSelector=e=>e.month.moreView;const monthGridCellSelector=e=>e.month.gridCell;const Jt={border:"1px solid #e5e5e5",backgroundColor:"white",holiday:{color:"#ff4040"},saturday:{color:"#333"},dayName:{color:"#333"},today:{color:"#fff"},gridSelection:{backgroundColor:"rgba(81, 92, 230, 0.05)",border:"1px solid #515ce6"}};const Qt={dayName:{borderLeft:"none",borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",backgroundColor:"inherit"},weekend:{backgroundColor:"inherit"},today:{color:"inherit",backgroundColor:"rgba(81, 92, 230, 0.05)"},pastDay:{color:"#bbb"},panelResizer:{border:"1px solid #e5e5e5"},dayGrid:{borderRight:"1px solid #e5e5e5",backgroundColor:"inherit"},dayGridLeft:{borderRight:"1px solid #e5e5e5",backgroundColor:"inherit",width:"72px"},timeGrid:{borderRight:"1px solid #e5e5e5"},timeGridLeft:{backgroundColor:"inherit",borderRight:"1px solid #e5e5e5",width:"72px"},timeGridLeftAdditionalTimezone:{backgroundColor:"white"},timeGridHalfHourLine:{borderBottom:"none"},timeGridHourLine:{borderBottom:"1px solid #e5e5e5"},nowIndicatorLabel:{color:"#515ce6"},nowIndicatorPast:{border:"1px dashed #515ce6"},nowIndicatorBullet:{backgroundColor:"#515ce6"},nowIndicatorToday:{border:"1px solid #515ce6"},nowIndicatorFuture:{border:"none"},pastTime:{color:"#bbb"},futureTime:{color:"#333"},gridSelection:{color:"#515ce6"}};const en={dayName:{borderLeft:"none",backgroundColor:"inherit"},holidayExceptThisMonth:{color:"rgba(255, 64, 64, 0.4)"},dayExceptThisMonth:{color:"rgba(51, 51, 51, 0.4)"},weekend:{backgroundColor:"inherit"},moreView:{border:"1px solid #d5d5d5",boxShadow:"0 2px 6px 0 rgba(0, 0, 0, 0.1)",backgroundColor:"white",width:null,height:null},gridCell:{headerHeight:31,footerHeight:null},moreViewTitle:{backgroundColor:"inherit"}};function createCommonTheme(e={}){return{common:mergeObject(Jt,e)}}function createThemeDispatch(e){return{setTheme:n=>{e(Ce((e=>{e.common=mergeObject(e.common,n.common);e.week=mergeObject(e.week,n.week);e.month=mergeObject(e.month,n.month)})))},setCommonTheme:n=>{e(Ce((e=>{e.common=mergeObject(e.common,n)})))},setWeekTheme:n=>{e(Ce((e=>{e.week=mergeObject(e.week,n)})))},setMonthTheme:n=>{e(Ce((e=>{e.month=mergeObject(e.month,n)})))}}}function createMonthTheme(e={}){return{month:mergeObject(en,e)}}function createWeekTheme(e={}){return{week:mergeObject(Qt,e)}}const themeStoreCreator=(e={})=>n=>__spreadProps(__spreadValues(__spreadValues(__spreadValues({},createCommonTheme(null==e?void 0:e.common)),createWeekTheme(null==e?void 0:e.week)),createMonthTheme(null==e?void 0:e.month)),{dispatch:__spreadValues({},createThemeDispatch(n))});const initThemeStore=(e={})=>createStore(themeStoreCreator(e));const{StoreProvider:tn,useInternalStore:nn,useStore:on}=createStoreContext();function useCommonTheme(){return on(Xt)}function useMonthTheme(){return on(Kt)}function weekDayNameSelector(e){return{common:{saturday:e.common.saturday,holiday:e.common.holiday,today:e.common.today,dayName:e.common.dayName},week:{pastDay:e.week.pastDay,today:e.week.today,dayName:e.week.dayName}}}function monthDayNameSelector(e){return{common:{saturday:e.common.saturday,holiday:e.common.holiday,today:e.common.today,dayName:e.common.dayName},month:{dayName:e.month.dayName}}}function GridHeader({dayNames:e,marginLeft:n=Ee,rowStyleInfo:r,type:l="month"}){var c,d;const p=on("month"===l?monthDayNameSelector:weekDayNameSelector);const h=null!=(d=null==(c=p[l])?void 0:c.dayName)?d:{},{backgroundColor:_="white",borderLeft:w=null}=h,$=__objRest(h,["backgroundColor","borderLeft"]);const{borderTop:P=null,borderBottom:O=null}=$;return h$3("div",{"data-testid":`grid-header-${l}`,className:cls("day-names",l),style:{backgroundColor:_,borderTop:P,borderBottom:O}},h$3("div",{className:cls("day-name-container"),style:{marginLeft:n}},e.map(((e,n)=>h$3(DayName,{type:l,key:`dayNames-${e.day}`,dayName:e,style:{width:toPercent(r[n].width),left:toPercent(r[n].left),borderLeft:w},theme:p})))))}const rn=6;var an=(e=>{e.header="header";e.footer="footer";return e})(an||{});function getCollisionGroup(e,n=true){const r=[];let l;if(!e.length)return r;r[0]=[e[0].cid()];e.slice(1).forEach(((c,d)=>{l=e.slice(0,d+1).reverse();const p=l.find((e=>c.collidesWith(e,n)));p?r.slice().reverse().some((e=>{if(~e.indexOf(p.cid())){e.push(c.cid());return true}return false})):r.push([c.cid()])}));return r}function getLastRowInColumn(e,n){let{length:r}=e;while(r>0){r-=1;if(!Te(e[r][n]))return r}return-1}function getMatrices(e,n,r=true){const l=[];n.forEach((n=>{const c=[[]];n.forEach((n=>{const l=e.get(n);let d=0;let p=false;let h;let _;while(!p){_=getLastRowInColumn(c,d);if(-1===_){c[0].push(l);p=true}else if(!l.collidesWith(c[_][d],r)){h=_+1;Te(c[h])&&(c[h]=[]);c[h][d]=l;p=true}d+=1}}));l.push(c)}));return l}function getEventInDateRangeFilter(e,n){return r=>{const l=r.getStarts();const c=r.getEnds();return!(c<e||l>n)}}function positionUIModels(e,n,r,l){const c=makeDateRange(e,n,_t).map((e=>toFormat(e,"YYYYMMDD")));r.forEach((e=>{e.forEach((e=>{e.forEach(((e,n)=>{if(!e)return;const r=toFormat(e.getStarts(),"YYYYMMDD");const d=makeDateRange(toStartOfDay(e.getStarts()),toEndOfDay(e.getEnds()),_t).length;e.top=n;e.left=c.indexOf(r);e.width=d;null==l?void 0:l(e)}))}))}))}function limit$1(e,n,r){if(r.getStarts()<e){r.exceedLeft=true;r.renderStarts=new TZDate(e)}if(r.getEnds()>n){r.exceedRight=true;r.renderEnds=new TZDate(n)}return r}function limitRenderRange(e,n,r){if(r instanceof Collection){r.each((r=>{limit$1(e,n,r);return true}));return null}return limit$1(e,n,r)}function convertToUIModel(e){const n=new Collection((e=>e.cid()));e.each((function(e){n.add(new EventUIModel(e))}));return n}function _isAllday({model:e}){return e.isAllday||e.hasMultiDates}function _isNotAllday(e){return!_isAllday(e)}function _weightTopValue(e){e.top=e.top||0;e.top+=1}function _adjustRenderRange(e,n,r){r.each((r=>{(r.model.isAllday||r.model.hasMultiDates)&&limitRenderRange(toStartOfDay(e),toEndOfDay(n),r)}))}function _getAlldayMaxTopIndexAtYMD(e,n,r){const l=[];e[n].forEach((e=>{r.doWhenHas(e,(e=>{l.push(e.top)}))}));return l.length>0?Math.max(...l):0}function _adjustTimeTopIndex(e,n){const r=n.filter(_isAllday);const l=n.filter(_isNotAllday).sort(pt.compare.event.asc);const c={};l.forEach((n=>{const l=toFormat(n.getStarts(),"YYYYMMDD");let d=c[l];Te(d)&&(d=c[l]=_getAlldayMaxTopIndexAtYMD(e,l,r));c[l]=n.top=d+1}))}function _stackTimeFromTop(e,n){const r=n.filter(_isAllday);const l=n.filter(_isNotAllday).sort(pt.compare.event.asc);const c={};l.forEach((n=>{const l=toFormat(n.getStarts(),"YYYYMMDD");let d=c[l];if(Te(d)){d=c[l]=[];e[l].forEach((e=>{r.doWhenHas(e,(e=>{d.push(e.top)}))}))}if(d.indexOf(n.top)>=0){const e=Math.max(...d)+1;for(let r=1;r<=e;r+=1){n.top=r;if(d.indexOf(n.top)<0)break}}d.push(n.top)}))}function _addMultiDatesInfo$1(e){e.each((e=>{const{model:n}=e;const r=n.getStarts();const l=n.getEnds();n.hasMultiDates=!isSameDate(r,l);if(!n.isAllday&&n.hasMultiDates){e.renderStarts=toStartOfDay(r);e.renderEnds=toEndOfDay(l)}}))}function findByDateRange$1(e,n){const{start:r,end:l,andFilters:c=[],alldayFirstMode:d=false}=n;const{events:p,idsOfDay:h}=e;const _=Collection.and(...[getEventInDateRangeFilter(r,l)].concat(c));const w=p.filter(_);const $=convertToUIModel(w);_addMultiDatesInfo$1($);_adjustRenderRange(r,l,$);const P=$.sort(pt.compare.event.asc);const O=false;const A=getCollisionGroup(P,O);const H=getMatrices($,A,O);positionUIModels(r,l,H,_weightTopValue);d?_adjustTimeTopIndex(h,$):_stackTimeFromTop(h,$);return H}function _makeHourRangeFilter(e,n){return r=>{const l=r.getStarts();const c=r.getEnds();const d=l.getTime();const p=c.getTime();const h=l.getFullYear();const _=l.getMonth();const w=l.getDate();const $=new TZDate(h,_,w).setHours(e);const P=new TZDate(h,_,w).setHours(n);return d>=$&&d<P||p>$&&p<=P||d<$&&p>$||p>P&&d<P}}function _makeGetUIModelFuncForTimeView(e,n){return 0===e&&24===n?e=>e.sort(pt.compare.event.asc):r=>r.filter(_makeHourRangeFilter(e,n)).sort(pt.compare.event.asc)}function splitEventByDateRange(e,n,r,l){const c={};const d=getDateRange(n,r);d.forEach((n=>{const r=toFormat(n,"YYYYMMDD");const d=e[r];const p=c[r]=new Collection((e=>e.cid()));d&&d.length&&d.forEach((e=>{l.doWhenHas(e,(e=>{p.add(e)}))}))}),{});return c}function getUIModelForTimeView(e,n){const{start:r,end:l,uiModelTimeColl:c,hourStart:d,hourEnd:p}=n;const h=splitEventByDateRange(e,r,l,c);const _={};const w=_makeGetUIModelFuncForTimeView(d,p);const $=true;Object.entries(h).forEach((([e,n])=>{const r=w(n);const l=getCollisionGroup(r,$);const c=getMatrices(n,l,$);_[e]=c}));return _}function _addMultiDatesInfo(e){e.each((e=>{const{model:n}=e;n.hasMultiDates=true;e.renderStarts=toStartOfDay(n.getStarts());e.renderEnds=toEndOfDay(n.getEnds())}))}function getUIModelForAlldayView(e,n,r){if(!r||!r.size)return[];_addMultiDatesInfo(r);limitRenderRange(e,n,r);const l=r.sort(pt.compare.event.asc);const c=true;const d=getCollisionGroup(l,c);const p=getMatrices(r,d,c);positionUIModels(e,n,p);return p}function findByDateRange(e,n){var r,l;const{start:c,end:d,panels:p,andFilters:h=[],options:_}=n;const{events:w,idsOfDay:$}=e;const P=null!=(r=null==_?void 0:_.hourStart)?r:0;const O=null!=(l=null==_?void 0:_.hourEnd)?l:24;const A=Collection.and(...[getEventInDateRangeFilter(c,d)].concat(h));const H=convertToUIModel(w.filter(A));const G=H.groupBy(filterByCategory);return p.reduce(((e,n)=>{const{name:r,type:l}=n;return isNil(G[r])?e:__spreadProps(__spreadValues({},e),{[r]:"daygrid"===l?getUIModelForAlldayView(c,d,G[r]):getUIModelForTimeView($,{start:c,end:d,uiModelTimeColl:G[r],hourStart:P,hourEnd:O})})}),{milestone:[],task:[],allday:[],time:{}})}function limit(e,n,r){const l=Math.max(e,...n);return Math.min(l,...r)}function ratio(e,n,r){return n*r/e}function isBetween$1(e,n,r){return n<=e&&e<=r}const sn=22;const ln=100;function forEachMatrix3d(e,n){e.forEach((e=>{e.forEach((e=>{e.forEach(((e,r)=>{n(e,r)}))}))}))}function isWithinHeight(e,n){return({top:r})=>e>=r*n}function isExceededHeight(e,n){return({top:r})=>e<r*n}function getExceedCount(e,n,r){return e.filter(isExceededHeight(n,r)).length}const getWeekendCount=e=>e.filter((e=>isWeekend(e.getDay()))).length;function getGridWidthAndLeftPercentValues(e,n,r){const l=getWeekendCount(e);const c=e.length;const d=l===c;const p=r/(n&&!d?2*c-l:c);const h=e.map((e=>{const r=e.getDay();return!n||d||isWeekend(r)?p:2*p}));const _=h.reduce(((e,n,r)=>r?[...e,e[r-1]+h[r-1]]:[0]),[]);return{widthList:h,leftList:_}}function getWidth(e,n,r){return e.reduce(((e,l,c)=>n<=c&&c<=r?e+l:e),0)}const isInGrid=e=>n=>{const r=toStartOfDay(n.getStarts());const l=toStartOfDay(n.getEnds());return r<=e&&e<=l};function getGridDateIndex(e,n){return n.findIndex((n=>e>=toStartOfDay(n)&&e<=toEndOfDay(n)))}const getLeftAndWidth=(e,n,r,l)=>{const{widthList:c}=getGridWidthAndLeftPercentValues(r,l,ln);return{left:e?getWidth(c,0,e-1):0,width:getWidth(c,null!=e?e:0,n<0?r.length-1:n)}};const getEventLeftAndWidth=(e,n,r,l)=>{const{widthList:c}=getGridWidthAndLeftPercentValues(r,l,ln);let d=0;let p=r.length-1;r.forEach(((r,l)=>{r<=e&&(d=l);r<=n&&(p=l)}));return{width:getWidth(c,d,p),left:d?getWidth(c,0,d-1):0}};function getEventUIModelWithPosition(e,n,r=false){const l=e.getStarts();const c=e.getEnds();const{width:d,left:p}=getEventLeftAndWidth(l,c,n,r);e.width=d;e.left=p;return e}function getRenderedEventUIModels(e,n,r){const{idsOfDay:l}=n;const c=findByDateRange$1(n,{start:e[0],end:toEndOfDay(e[e.length-1])});const d=[];forEachMatrix3d(c,(n=>{const l=n.model.cid();d[l]=getEventUIModelWithPosition(n,e,r)}));const p=Object.keys(l).reduce(((e,n)=>{const r=l[n];e[n]=r.map((e=>d[e])).filter((e=>!!e));return e}),{});return{uiModels:Object.values(d),gridDateEventModelMap:p}}const getDayGridEventModels=(e,n,r=false)=>{forEachMatrix3d(e,(e=>{const l=e.getStarts();const c=e.getEnds();const{width:d,left:p}=getEventLeftAndWidth(l,c,n,r);e.width=d;e.left=p;e.top+=1}));return flattenMatrix3d(e)};const getModels=e=>e.filter((e=>!!e));function flattenMatrix3d(e){return e.flatMap((e=>e.flatMap((e=>getModels(e)))))}const getTimeGridEventModels=e=>Array.from(new Set(Object.values(e).reduce(((e,n)=>e.concat(...flattenMatrix3d(n))),[])));const getWeekViewEvents=(e,n,{narrowWeekend:r,hourStart:l,hourEnd:c,weekStartDate:d,weekEndDate:p})=>{const h=[{name:"milestone",type:"daygrid",show:true},{name:"task",type:"daygrid",show:true},{name:"allday",type:"daygrid",show:true},{name:"time",type:"timegrid",show:true}];const _=findByDateRange(n,{start:d,end:p,panels:h,andFilters:[],options:{hourStart:l,hourEnd:c}});return Object.keys(_).reduce(((n,l)=>{const c=_[l];return __spreadProps(__spreadValues({},n),{[l]:Array.isArray(c)?getDayGridEventModels(c,e,r):getTimeGridEventModels(c)})}),{milestone:[],allday:[],task:[],time:[]})};function createDateMatrixOfMonth(e,{workweek:n=false,visibleWeeksCount:r=0,startDayOfWeek:l=0,isAlways6Weeks:c=true}){const d=new TZDate(e);const p=r>0;const h=p?d:toStartOfMonth(d);const _=subtractDate(h,h.getDay()-l+(h.getDay()<l?ht:0));const w=_.getDay();const $=toEndOfMonth(d).getDate();const P=getDateDifference(_,h);const O=$+Math.abs(P);let A=rn;p?A=r:false===c&&(A=Math.ceil(O/ht));return ke(0,A).map((e=>ke(0,ht).reduce(((r,l)=>{const c=e*ht+l;const d=(c+w)%ht;if(!n||n&&!isWeekend(d)){const e=addDate(_,c);r.push(e)}return r}),[])))}function getWeekDates(e,{startDayOfWeek:n=ft.SUN,workweek:r}){const l=toStartOfDay(e);const c=l.getDay();const d=c-n;const p=d>=0?ke(-d,ht-d):ke(-ht-d,-d);return p.reduce(((e,n)=>{const c=addDate(l,n);if(r&&isWeekend(c.getDay()))return e;e.push(c);return e}),[])}function getColumnsData(e,n=false){const r=e.length;const l=r>5&&n;const c=l?100/(r-1):100/r;return e.map((e=>{const n=l&&isWeekend(e.getDay())?c/2:c;return{date:e,width:n}})).reduce(((e,n,r)=>{const l=e[r-1];e.push(__spreadProps(__spreadValues({},n),{left:0===r?0:l.left+l.width}));return e}),[])}function createTimeGridData(e,n){var r;const l=getColumnsData(e,null!=(r=n.narrowWeekend)&&r);const c=2*(n.hourEnd-n.hourStart);const d=100/c;const p=ke(c).map(((e,r)=>{const l=r%2===1;const c=n.hourStart+Math.floor(e/2);const p=`${c}:${l?"30":"00"}`.padStart(5,"0");const h=(l?`${c+1}:00`:`${c}:30`).padStart(5,"0");return{top:d*r,height:d,startTime:p,endTime:h}}));return{columns:l,rows:p}}function getRelativeMousePosition({clientX:e,clientY:n},{left:r,top:l,clientLeft:c,clientTop:d}){return[e-r-c,n-l-d]}function getIndexFromPosition(e,n,r){const l=Math.floor(ratio(n,e,r));return limit(l,[0],[e-1])}function createGridPositionFinder({rowsCount:e,columnsCount:n,container:r,narrowWeekend:l=false,startDayOfWeek:c=ft.SUN}){if(isNil(r))return()=>null;const d=ke(c,c+n).map((e=>e%ht));const p=l?d.filter((e=>isWeekend(e))).length:0;return function gridPositionFinder(c){const{left:h,top:_,width:w,height:$}=r.getBoundingClientRect();const[P,O]=getRelativeMousePosition(c,{left:h,top:_,clientLeft:r.clientLeft,clientTop:r.clientTop});if(P<0||O<0||P>w||O>$)return null;const A=l?w/(n-p+1):w/n;const H=d.map((e=>l&&isWeekend(e)?A/2:A));const G=[];H.forEach(((e,n)=>{0===n?G.push(0):G.push(G[n-1]+H[n-1])}));const B=findLastIndex(G,(e=>P>=e));return{columnIndex:B,rowIndex:getIndexFromPosition(e,$,O)}}}function commonGridSelectionSelector(e){return e.common.gridSelection}function GridSelection$1({type:e,gridSelectionData:n,weekDates:r,narrowWeekend:l}){const{backgroundColor:c,border:d}=on(commonGridSelectionSelector);const{startCellIndex:p,endCellIndex:h}=n;const{left:_,width:w}=getLeftAndWidth(Math.min(p,h),Math.max(p,h),r,l);const $={left:toPercent(_),width:toPercent(w),height:toPercent(100),backgroundColor:c,border:d};return w>0?h$3("div",{className:cls(e,"grid-selection"),style:$}):null}function createSortedGridSelection(e,n,r){return{startColumnIndex:r?n.columnIndex:e.columnIndex,startRowIndex:r?n.rowIndex:e.rowIndex,endColumnIndex:r?e.columnIndex:n.columnIndex,endRowIndex:r?e.rowIndex:n.rowIndex}}function calculateTimeGridSelectionByCurrentIndex(e,n,r){if(isNil(e))return null;const{startColumnIndex:l,endColumnIndex:c,endRowIndex:d,startRowIndex:p}=e;if(!isBetween$1(n,l,c))return null;const h=l!==c;const _=n===l;const w={startRowIndex:p,endRowIndex:d,isSelectingMultipleColumns:h,isStartingColumn:_};if(l<n&&n<c){w.startRowIndex=0;w.endRowIndex=r}else l!==c&&(l===n?w.endRowIndex=r:c===n&&(w.startRowIndex=0));return w}const cn={sortSelection:(e,n)=>{const r=e.columnIndex>n.columnIndex||e.columnIndex===n.columnIndex&&e.rowIndex>n.rowIndex;return createSortedGridSelection(e,n,r)},getDateFromCollection:(e,n)=>{const r=e;const l=setTimeStrToDate(r.columns[n.startColumnIndex].date,r.rows[n.startRowIndex].startTime);const c=setTimeStrToDate(r.columns[n.endColumnIndex].date,r.rows[n.endRowIndex].endTime);return[l,c]},calculateSelection:calculateTimeGridSelectionByCurrentIndex};function calculateDayGridMonthSelectionByCurrentIndex(e,n,r){if(!(isPresent(e)&&isPresent(n)&&isPresent(r)))return null;const{startRowIndex:l,startColumnIndex:c,endRowIndex:d,endColumnIndex:p}=e;if(!isBetween$1(n,Math.min(l,d),Math.max(l,d)))return null;let h=c;let _=p;l<n&&(h=0);d>n&&(_=r-1);return{startCellIndex:h,endCellIndex:_}}const dn={sortSelection:(e,n)=>{const r=e.rowIndex>n.rowIndex||e.rowIndex===n.rowIndex&&e.columnIndex>n.columnIndex;return createSortedGridSelection(e,n,r)},getDateFromCollection:(e,n)=>{const r=e;return[r[n.startRowIndex][n.startColumnIndex],r[n.endRowIndex][n.endColumnIndex]]},calculateSelection:calculateDayGridMonthSelectionByCurrentIndex};function calculateAlldayGridRowSelectionByCurrentIndex(e){return isPresent(e)?{startCellIndex:e.startColumnIndex,endCellIndex:e.endColumnIndex}:null}const pn={sortSelection:(e,n)=>{const r=e.columnIndex>n.columnIndex;return createSortedGridSelection(e,n,r)},getDateFromCollection:(e,n)=>{const r=e;return[r[n.startColumnIndex],r[n.endColumnIndex]]},calculateSelection:calculateAlldayGridRowSelectionByCurrentIndex};function dayGridWeekSelectionSelector(e){return pn.calculateSelection(e.gridSelection.dayGridWeek)}function AlldayGridSelection({weekDates:e,narrowWeekend:n}){const r=Ft(dayGridWeekSelectionSelector);return isNil(r)?null:h$3(GridSelection$1,{type:"allday",gridSelectionData:r,weekDates:e,narrowWeekend:n})}function S(e,n){for(var r in n)e[r]=n[r];return e}function C(e,n){for(var r in e)if("__source"!==r&&!(r in n))return true;for(var l in n)if("__source"!==l&&e[l]!==n[l])return true;return false}function E(e){this.props=e}function g$1(e,n){function e2(e){var r=this.props.ref,l=r==e.ref;return!l&&r&&(r.call?r(null):r.current=null),n?!n(this.props,e)||!l:C(this.props,e)}function r2(n){return this.shouldComponentUpdate=e2,h$3(e,n)}return r2.displayName="Memo("+(e.displayName||e.name)+")",r2.prototype.isReactComponent=true,r2.__f=true,r2}(E.prototype=new d$3).isPureReactComponent=true,E.prototype.shouldComponentUpdate=function(e,n){return C(this.props,e)||C(this.state,n)};var fn=_.__b;_.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),fn&&fn(e)};var hn="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function R(e){function t2(n){var r=S({},n);return delete r.ref,e(r,n.ref||null)}return t2.$$typeof=hn,t2.render=t2,t2.prototype.isReactComponent=t2.__f=true,t2.displayName="ForwardRef("+(e.displayName||e.name)+")",t2}var mn=_.__e;_.__e=function(e,n,r,l){if(e.then)for(var c,d=n;d=d.__;)if((c=d.__c)&&c.__c)return null==n.__e&&(n.__e=r.__e,n.__k=r.__k),c.__c(e,n);mn(e,n,r,l)};var gn=_.unmount;function T(){this.__u=0,this.t=null,this.__b=null}function L(e){var n=e.__.__c;return n&&n.__a&&n.__a(e)}function D(){this.u=null,this.o=null}_.unmount=function(e){var n=e.__c;n&&n.__R&&n.__R(),n&&true===e.__h&&(e.type=null),gn&&gn(e)},(T.prototype=new d$3).__c=function(e,n){var r=n.__c,l=this;null==l.t&&(l.t=[]),l.t.push(r);var c=L(l.__v),d=false,i2=function(){d||(d=true,r.__R=null,c?c(l2):l2())};r.__R=i2;var l2=function(){if(!--l.__u){if(l.state.__a){var e=l.state.__a;l.__v.__k[0]=function n4(e,n,r){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return n4(e,n,r)})),e.__c&&e.__c.__P===n&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=true,e.__c.__P=r)),e}(e,e.__c.__P,e.__c.__O)}var n;for(l.setState({__a:l.__b=null});n=l.t.pop();)n.forceUpdate()}},p=true===n.__h;l.__u++||p||l.setState({__a:l.__b=l.__v.__k[0]}),e.then(i2,i2)},T.prototype.componentWillUnmount=function(){this.t=[]},T.prototype.render=function(e,n){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),l=this.__v.__k[0].__c;this.__v.__k[0]=function n3(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=S({},e)).__c&&(e.__c.__P===r&&(e.__c.__P=n),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return n3(e,n,r)}))),e}(this.__b,r,l.__O=l.__P)}this.__b=null}var c=n.__a&&h$3(p$3,null,e.fallback);return c&&(c.__h=null),[h$3(p$3,null,n.__a?null:e.children),c]};var F=function(e,n,r){if(++r[1]===r[0]&&e.o.delete(n),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};function I(e){return this.getChildContext=function(){return e.context},e.children}function M(e){var n=this,r=e.i;n.componentWillUnmount=function(){P$2(null,n.l),n.l=null,n.i=null},n.i&&n.i!==r&&n.componentWillUnmount(),e.__v?(n.l||(n.i=r,n.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(e){this.childNodes.push(e),n.i.appendChild(e)},insertBefore:function(e,r){this.childNodes.push(e),n.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),n.i.removeChild(e)}}),P$2(h$3(I,{context:n.context},e.__v),n.l)):n.l&&n.componentWillUnmount()}function V(e,n){var r=h$3(M,{__v:e,i:n});return r.containerInfo=n,r}(D.prototype=new d$3).__a=function(e){var n=this,r=L(n.__v),l=n.o.get(e);return l[0]++,function(c){var o2=function(){n.props.revealOrder?(l.push(c),F(n,e,l)):c()};r?r(o2):o2()}},D.prototype.render=function(e){this.u=null,this.o=new Map;var n=x$3(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&n.reverse();for(var r=n.length;r--;)this.o.set(n[r],this.u=[1,0,this.u]);return e.children},D.prototype.componentDidUpdate=D.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(n,r){F(e,r,n)}))};var vn="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,yn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|shape|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,_n="undefined"!=typeof document,j=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};d$3.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(d$3.prototype,e,{configurable:true,get:function(){return this["UNSAFE_"+e]},set:function(n){Object.defineProperty(this,e,{configurable:true,writable:true,value:n})}})}));var wn=_.event;function Z(){}function Y(){return this.cancelBubble}function q(){return this.defaultPrevented}_.event=function(e){return wn&&(e=wn(e)),e.persist=Z,e.isPropagationStopped=Y,e.isDefaultPrevented=q,e.nativeEvent=e};var Dn={configurable:true,get:function(){return this.class}},$n=_.vnode;_.vnode=function(e){var n=e.type,r=e.props,l=r;if("string"==typeof n){var c=-1===n.indexOf("-");for(var d in l={},r){var p=r[d];_n&&"children"===d&&"noscript"===n||"value"===d&&"defaultValue"in r&&null==p||("defaultValue"===d&&"value"in r&&null==r.value?d="value":"download"===d&&true===p?p="":/ondoubleclick/i.test(d)?d="ondblclick":/^onchange(textarea|input)/i.test(d+n)&&!j(r.type)?d="oninput":/^onfocus$/i.test(d)?d="onfocusin":/^onblur$/i.test(d)?d="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(d)?d=d.toLowerCase():c&&yn.test(d)?d=d.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===p&&(p=void 0),/^oninput$/i.test(d)&&(d=d.toLowerCase(),l[d]&&(d="oninputCapture")),l[d]=p)}"select"==n&&l.multiple&&Array.isArray(l.value)&&(l.value=x$3(r.children).forEach((function(e){e.props.selected=-1!=l.value.indexOf(e.props.value)}))),"select"==n&&null!=l.defaultValue&&(l.value=x$3(r.children).forEach((function(e){e.props.selected=l.multiple?-1!=l.defaultValue.indexOf(e.props.value):l.defaultValue==e.props.value}))),e.props=l,r.class!=r.className&&(Dn.enumerable="className"in r,null!=r.className&&(l.class=r.className),Object.defineProperty(l,"className",Dn))}e.$$typeof=vn,$n&&$n(e)};var Sn=_.__r;_.__r=function(e){Sn&&Sn(e),e.__c};function un(e){return!!e.__k&&(P$2(null,e),true)}function ExceedCount({index:e,exceedCount:n,isClicked:r,onClickExceedCount:l}){const clickExceedCount=()=>l(e);const c={display:r?"none":""};return n&&!r?h$3("span",{className:cls("weekday-exceed-in-week"),onClick:clickExceedCount,style:c},h$3(Template,{template:"weekGridFooterExceed",param:n})):null}function CollapseButton({isClicked:e,isClickedIndex:n,onClickCollapseButton:r}){return e&&n?h$3("span",{className:cls("weekday-exceed-in-week"),onClick:r},h$3(Template,{template:"collapseBtnTitle"})):null}function GridCell$1({width:e,left:n,index:r,exceedCount:l,isClicked:c,onClickExceedCount:d,isClickedIndex:p,onClickCollapseButton:h,isLastCell:_}){const{borderRight:w,backgroundColor:$}=on(T$1((e=>e.week.dayGrid),[]));const P={width:e,left:n,borderRight:_?"none":w,backgroundColor:$};return h$3("div",{className:cls("panel-grid"),style:P},h$3(ExceedCount,{index:r,exceedCount:l,isClicked:c,onClickExceedCount:d}),h$3(CollapseButton,{isClickedIndex:p,isClicked:c,onClickCollapseButton:h}))}const Cn=g$1((function GridCells2({uiModels:e,weekDates:n,narrowWeekend:r,height:l,clickedIndex:c,isClickedCount:d,onClickExceedCount:p,onClickCollapseButton:h}){const _=2;const{widthList:w,leftList:$}=getGridWidthAndLeftPercentValues(n,r,ln);const P=n.length-1;return h$3(p$3,null,n.map(((n,r)=>{const O=toPercent(w[r]);const A=toPercent($[r]);const H=e.filter(isInGrid(n));const G=getExceedCount(H,l,sn+_);const B=r===c;const W=r===P;return h$3(GridCell$1,{key:`panel-grid-${n.getDate()}`,width:O,left:A,index:r,exceedCount:G,isClicked:d,onClickExceedCount:p,isClickedIndex:B,onClickCollapseButton:h,isLastCell:W})})))}));function HorizontalEventResizeIcon({onMouseDown:e}){return h$3("span",{className:`${cls("weekday-resize-handle")} ${cls("handle-y")}`,onMouseDown:e,"data-testid":"horizontal-event-resize-icon"},h$3("i",{className:`${cls("icon")} ${cls("ic-handle-y")}`}))}const Tn=B$1(null);const bn=Tn.Provider;const useLayoutContainer=()=>{const e=q$2(Tn);if(Te(e))throw new Error("LayoutContainerProvider is not found");return e};const kn={panelResizer:"panelResizer"};const En={resizeEvent:(e,n)=>`event/${e}/resize/${n}`,moveEvent:(e,n)=>`event/${e}/move/${n}`,gridSelection:e=>`gridSelection/${e}`};function useCalendarById(e){return Ft(T$1((n=>n.calendar.calendars.find((n=>n.id===e))),[e]))}function useCalendarColor(e){var n;const r=useCalendarById(null!=(n=null==e?void 0:e.calendarId)?n:null);return F$2((()=>({color:null==r?void 0:r.color,borderColor:null==r?void 0:r.borderColor,backgroundColor:null==r?void 0:r.backgroundColor,dragBackgroundColor:null==r?void 0:r.dragBackgroundColor})),[r])}var Mn=(e=>{e.ESCAPE="Escape";return e})(Mn||{});const xn={Escape:27};const In=3;function useTransientUpdate(e,n){const r=Lt();const l=s$2(e);const c=s$2(n);_$2((()=>{l.current=e;c.current=n}),[e,n]);_$2((()=>r.subscribe((e=>c.current(e)),(e=>l.current(e)))),[e,r])}function isKeyPressed(e,n){return e.key?e.key===n:e.keyCode===xn[n]}function isLeftClick(e){return 0===e}function isMouseMoved(e,n,r,l){return Math.abs(e-r)>=In||Math.abs(n-l)>=In}function useDrag(e,{onInit:n,onDragStart:r,onDrag:l,onMouseUp:c,onPressESCKey:d}={}){const{initDrag:p,setDragging:h,cancelDrag:_,reset:w}=useDispatch("dnd");const $=Lt();const P=s$2($.getState().dnd);useTransientUpdate(Ut,(e=>{P.current=e}));const[O,A]=y$1(false);const H=s$2(null);const G=s$2(null);const B=s$2(null);const W=T$1((r=>{if(isLeftClick(r.button)){r.currentTarget&&(r.currentTarget.ondragstart=function(){return false});r.preventDefault();A(true);p({draggingItemType:e,initX:r.clientX,initY:r.clientY});null==n?void 0:n(r,P.current)}}),[n,e,p]);const U=T$1((n=>{const{initX:c,initY:d,draggingState:p,draggingItemType:_}=P.current;if(_===e){if(!isPresent(c)||!isPresent(d)||isMouseMoved(c,d,n.clientX,n.clientY))if(p<=Ct.INIT){h({x:n.clientX,y:n.clientY});null==r?void 0:r(n,P.current)}else{h({x:n.clientX,y:n.clientY});null==l?void 0:l(n,P.current)}}else{A(false);w()}}),[e,l,r,h,w]);const X=T$1((e=>{e.stopPropagation();if(O){null==c?void 0:c(e,P.current);A(false);w()}}),[O,c,w]);const K=T$1((e=>{if(isKeyPressed(e,Mn.ESCAPE)){A(false);_();null==d?void 0:d(e,P.current)}}),[d,_]);_$2((()=>{H.current=U;G.current=X;B.current=K}),[K,U,X]);_$2((()=>{const wrappedHandleMouseMove=e=>{var n;return null==(n=H.current)?void 0:n.call(H,e)};const wrappedHandleMouseUp=e=>{var n;return null==(n=G.current)?void 0:n.call(G,e)};const wrappedHandleKeyDown=e=>{var n;return null==(n=B.current)?void 0:n.call(B,e)};if(O){document.addEventListener("mousemove",wrappedHandleMouseMove);document.addEventListener("mouseup",wrappedHandleMouseUp);document.addEventListener("keydown",wrappedHandleKeyDown);return()=>{document.removeEventListener("mousemove",wrappedHandleMouseMove);document.removeEventListener("mouseup",wrappedHandleMouseUp);document.removeEventListener("keydown",wrappedHandleKeyDown)}}return noop}),[O,w]);return W}function passConditionalProp(e,n){return e?n:void 0}function getMargins(e){return{vertical:e?5:2,horizontal:8}}function getBorderRadius(e,n){const r=e?0:"2px";const l=n?0:"2px";return`${r} ${l} ${l} ${r}`}function getEventItemStyle({uiModel:e,flat:n,eventHeight:r,isDraggingTarget:l,calendarColor:c}){const{exceedLeft:d,exceedRight:p}=e;const{color:h,backgroundColor:_,dragBackgroundColor:w,borderColor:$}=getEventColors(e,c);const P={color:h,backgroundColor:l?w:_,borderLeft:d?"none":`3px solid ${$}`,borderRadius:getBorderRadius(d,p),overflow:"hidden",height:r,lineHeight:toPx(r),opacity:l?.5:1};const O=getMargins(n);return __spreadValues(n?{marginTop:O.vertical}:{marginLeft:d?0:O.horizontal,marginRight:p?0:O.horizontal},P)}function getContainerStyle({flat:e,uiModel:n,resizingWidth:r,movingLeft:l,eventHeight:c,headerHeight:d}){const{top:p,left:h,width:_,model:w}=n;const $=getMargins(e);const P=e?{}:{width:r||toPercent(_),left:toPercent(null!=l?l:h),top:(p-1)*(c+$.vertical)+d,position:"absolute"};return Object.assign(P,w.customStyle)}function getTestId({model:e}){const n=e.calendarId?`${e.calendarId}-`:"";const r=e.id?`${e.id}-`:"";return`${n}${r}${e.title}`}const Nn={eventBody:cls("weekday-event"),eventTitle:cls("weekday-event-title"),eventDot:cls("weekday-event-dot"),moveEvent:cls("dragging--move-event"),resizeEvent:cls("dragging--resize-horizontal-event")};function HorizontalEvent({flat:e=false,uiModel:n,eventHeight:r,headerHeight:l,resizingWidth:c=null,movingLeft:d=null}){const{currentView:p}=Ft(Bt);const{useDetailPopup:h,isReadOnly:_}=Ft(Wt);const{setDraggingEventUIModel:w}=useDispatch("dnd");const{showDetailPopup:$}=useDispatch("popup");const P=useLayoutContainer();const O=useEventBus();const A=useCalendarColor(n.model);const[H,G]=y$1(false);const B=s$2(null);const{isReadOnly:W,id:U,calendarId:X}=n.model;const K=!_&&!W&&isNil(c)&&isNil(d);const startDragEvent=e=>{w(n);null==P?void 0:P.classList.add(e)};const endDragEvent=e=>{G(false);null==P?void 0:P.classList.remove(e)};useTransientUpdate(Ut,(({draggingEventUIModel:e,draggingState:r})=>{r===Ct.DRAGGING&&(null==e?void 0:e.cid())===n.cid()&&isNil(c)&&isNil(d)?G(true):G(false)}));_$2((()=>{K&&O.fire("afterRenderEvent",n.model.toEventObject())}),[]);const J=useDrag(En.resizeEvent("dayGrid",`${n.cid()}`),{onDragStart:()=>startDragEvent(Nn.resizeEvent),onMouseUp:()=>endDragEvent(Nn.resizeEvent),onPressESCKey:()=>endDragEvent(Nn.resizeEvent)});const Q=useDrag(En.moveEvent("dayGrid",`${n.cid()}`),{onDragStart:()=>{K&&startDragEvent(Nn.moveEvent)},onMouseUp:(r,{draggingState:l})=>{endDragEvent(Nn.moveEvent);const c=l<=Ct.INIT;c&&h&&B.current&&$({event:n.model,eventRect:B.current.getBoundingClientRect()},e);c&&O.fire("clickEvent",{event:n.model.toEventObject(),nativeEvent:r})},onPressESCKey:()=>endDragEvent(Nn.moveEvent)});const handleResizeStart=e=>{e.stopPropagation();K&&J(e)};const handleMoveStart=e=>{e.stopPropagation();Q(e)};const ee=!H&&"month"===p&&"time"===n.model.category&&isSameDate(n.model.start,n.model.end);const te=!K||e||H||n.exceedRight;const ne=getContainerStyle({uiModel:n,eventHeight:r,headerHeight:l,flat:e,movingLeft:d,resizingWidth:c});const oe=getEventItemStyle({uiModel:n,flat:e,eventHeight:r,isDraggingTarget:H,calendarColor:A});return h$3("div",{className:cls("weekday-event-block",{"weekday-exceed-left":n.exceedLeft,"weekday-exceed-right":n.exceedRight}),style:ne,"data-testid":passConditionalProp(K,getTestId(n)),"data-calendar-id":X,"data-event-id":U,ref:B},h$3("div",{className:Nn.eventBody,style:__spreadProps(__spreadValues({},oe),{backgroundColor:ee?null:oe.backgroundColor,borderLeft:ee?null:oe.borderLeft}),onMouseDown:handleMoveStart},ee?h$3("span",{className:Nn.eventDot,style:{backgroundColor:oe.backgroundColor}}):null,h$3("span",{className:Nn.eventTitle},h$3(Template,{template:n.model.category,param:n.model})),te?null:h$3(HorizontalEventResizeIcon,{onMouseDown:handleResizeStart})))}function useWhen(e,n){const r=s$2(e);_$2((()=>{r.current=e}),[e]);_$2((()=>{const invoke=()=>r.current();n&&invoke()}),[n])}function useCurrentPointerPositionInGrid(e){const[n,r]=y$1(null);useTransientUpdate(Ut,(n=>{if(isPresent(n.x)&&isPresent(n.y)){const l=e({clientX:n.x,clientY:n.y});l&&r(l)}}));const l=T$1((()=>r(null)),[]);return[n,l]}const getTargetEventId=(e,n,r)=>{function isEventDraggingType(e){return new RegExp(`^event/${n}/${r}/\\d+$`).test(e)}return isNil(e)?null:isEventDraggingType(e)?last(e.split("/")):null};function useDraggingEvent(e,n){const[r,l]=y$1(false);const[c,d]=y$1(false);const[p,h]=y$1(null);useTransientUpdate(Ut,(({draggingItemType:r,draggingEventUIModel:c,draggingState:_})=>{const w=getTargetEventId(r,e,n);const $=Number(w)===(null==c?void 0:c.cid());const P=_===Ct.IDLE;const O=_===Ct.CANCELED;isNil(p)&&$&&h(c);if(isPresent(p)&&(P||O)){l(true);d(O)}}));const clearDraggingEvent=()=>{h(null);l(false);d(false)};return{isDraggingEnd:r,isDraggingCanceled:c,draggingEvent:p,clearDraggingEvent:clearDraggingEvent}}function useAlldayGridRowEventMove({rowStyleInfo:e,gridPositionFinder:n}){const r=useEventBus();const{isDraggingEnd:l,isDraggingCanceled:c,draggingEvent:d,clearDraggingEvent:p}=useDraggingEvent("dayGrid","move");const h=s$2(null);const[_,w]=useCurrentPointerPositionInGrid(n);const{columnIndex:$}=null!=_?_:{};const P=F$2((()=>isNil(d)?null:e.findIndex((({left:e})=>e===d.left))),[e,d]);const O=F$2((()=>{if(isNil($)||isNil(h.current)||isNil(P))return null;const n=P+$-h.current;return n<0?-e[-n].left:e[n].left}),[$,e,P]);_$2((()=>{isNil(h.current)&&isPresent($)&&(h.current=$)}),[$]);useWhen((()=>{const e=!c&&isPresent(d)&&isPresent($)&&isPresent(O)&&$!==h.current;if(e&&isPresent(h.current)){const e=$-h.current;const n=new TZDate(d.model.getStarts());const l=new TZDate(d.model.getEnds());n.addDate(e);l.addDate(e);r.fire("beforeUpdateEvent",{event:d.model.toEventObject(),changes:{start:n,end:l}})}p();w();h.current=null}),l);return F$2((()=>({movingEvent:d,movingLeft:O})),[O,d])}function MovingEventShadow$2({rowStyleInfo:e,gridPositionFinder:n}){const{movingEvent:r,movingLeft:l}=useAlldayGridRowEventMove({rowStyleInfo:e,gridPositionFinder:n});return isNil(r)?null:h$3(HorizontalEvent,{uiModel:r,eventHeight:sn,headerHeight:0,movingLeft:l})}function getEventColIndex(e,n){const r=getGridDateIndex(e.getStarts(),n);const l=getGridDateIndex(e.getEnds(),n);return{start:r,end:l}}function useAlldayGridRowEventResize({weekDates:e,gridColWidthMap:n,gridPositionFinder:r}){const l=useEventBus();const{isDraggingEnd:c,isDraggingCanceled:d,draggingEvent:p,clearDraggingEvent:h}=useDraggingEvent("dayGrid","resize");const[_,w]=useCurrentPointerPositionInGrid(r);const{columnIndex:$}=null!=_?_:{};const P=F$2((()=>p?getEventColIndex(p,e):{start:-1,end:-1}),[e,p]);const O=F$2((()=>P.start>-1&&isPresent($)?n[P.start][$]:null),[$,n,P.start]);useWhen((()=>{const n=!d&&isPresent(p)&&isPresent($)&&P.start<=$&&P.end!==$;if(n){const n=e[$];l.fire("beforeUpdateEvent",{event:p.model.toEventObject(),changes:{end:n}})}w();h()}),c);return F$2((()=>({resizingEvent:p,resizingWidth:O})),[O,p])}function ResizingEventShadow({weekDates:e,gridColWidthMap:n,gridPositionFinder:r}){const{resizingEvent:l,resizingWidth:c}=useAlldayGridRowEventResize({weekDates:e,gridColWidthMap:n,gridPositionFinder:r});return isNil(l)?null:h$3(HorizontalEvent,{uiModel:l,eventHeight:sn,headerHeight:0,resizingWidth:c})}function useDOMNode(){const[e,n]=y$1(null);const r=T$1((e=>{e&&n(e)}),[]);return[e,r]}function useGridRowHeightController(e,n){const[r,l]=y$1(0);const[c,d]=y$1(false);const{updateDayGridRowHeight:p}=useDispatch("weekViewLayout");const h=T$1((r=>{d(true);l(r);p({rowName:n,height:(e+1)*sn})}),[n,e,p]);const _=T$1((()=>{d(false);p({rowName:n,height:Be})}),[n,p]);return{clickedIndex:r,isClickedCount:c,onClickExceedCount:h,onClickCollapseButton:_}}function requestTimeout(e,n,r){let l;const loop=c=>{l||(l=c);const d=c-l;if(d>=n){e();r(noop);return}const p=requestAnimationFrame(loop);r((()=>cancelAnimationFrame(p)))};const c=requestAnimationFrame(loop);r((()=>cancelAnimationFrame(c)))}function useClickPrevention({onClick:e,onDblClick:n,delay:r=300}){const l=s$2(noop);const registerCancel=e=>{l.current=e};const cancelScheduledWork=()=>{l.current()};_$2((()=>cancelScheduledWork),[]);const handleClick=n=>{cancelScheduledWork();requestTimeout(e.bind(null,n),r,registerCancel)};const handleDblClick=e=>{cancelScheduledWork();n(e)};return[handleClick,handleDblClick]}const Pn={dayGridMonth:"month",dayGridWeek:"allday",timeGrid:"time"};function sortDates(e,n){const r=e<n;return r?[e,n]:[n,e]}function useGridSelection({type:e,selectionSorter:n,dateGetter:r,dateCollection:l,gridPositionFinder:c}){const{useFormPopup:d,gridSelection:p}=Ft(Wt);const{enableDblClick:h,enableClick:_}=p;const{setGridSelection:w,addGridSelection:$,clearAll:P}=useDispatch("gridSelection");const{hideAllPopup:O,showFormPopup:A}=useDispatch("popup");const H=useEventBus();const G=useLayoutContainer();const[B,W]=y$1(null);const[U,X]=y$1(null);const K=s$2(false);const J=s$2(null);useTransientUpdate(T$1((n=>n.gridSelection[e]),[e]),(e=>{J.current=e}));useTransientUpdate(Ut,(({draggingState:e,draggingItemType:n})=>{K.current=n===Q&&e>=Ct.INIT}));const Q=En.gridSelection(e);const setGridSelectionByPosition=r=>{const l=c(r);isPresent(U)&&isPresent(l)&&w(e,n(U,l))};const[ee,te]=useClickPrevention({onClick:e=>{_&&onMouseUp(e,true)},onDblClick:e=>{h&&onMouseUp(e,true)},delay:250});const onMouseUpWithClick=e=>{const n=e.detail<=1;(_||h&&!n)&&(_?n?ee(e):te(e):onMouseUp(e,true))};const onMouseUp=(n,c)=>{var p;c&&setGridSelectionByPosition(n);if(isPresent(J.current)){const[c,h]=sortDates(...r(l,J.current));if(d&&isPresent(B)){const r={top:(n.clientY+B.y)/2,left:(n.clientX+B.x)/2};A({isCreationPopup:true,title:"",location:"",start:c,end:h,isAllday:"timeGrid"!==e,isPrivate:false,popupArrowPointPosition:r,close:P})}const _=`.${cls(Pn[e])}.${cls("grid-selection")}`;const w=Array.from(null!=(p=null==G?void 0:G.querySelectorAll(_))?p:[]);H.fire("selectDateTime",{start:c.toDate(),end:h.toDate(),isAllday:"timeGrid"!==e,nativeEvent:n,gridSelectionElements:w})}};const ne=T$1((()=>{W(null);X(null);w(e,null)}),[w,e]);const oe=useDrag(Q,{onInit:n=>{if(d){W({x:n.clientX,y:n.clientY});O()}const r=c(n);isPresent(r)&&X(r);d||$(e,J.current)},onDragStart:e=>{setGridSelectionByPosition(e)},onDrag:e=>{K.current&&setGridSelectionByPosition(e)},onMouseUp:(e,{draggingState:n})=>{e.stopPropagation();const r=n<=Ct.INIT;r?onMouseUpWithClick(e):onMouseUp(e,r)},onPressESCKey:ne});_$2((()=>ne),[ne]);return oe}const On="alldayTitle";function AlldayGridRow({events:e,weekDates:n,height:r=Be,options:l={},rowStyleInfo:c,gridColWidthMap:d}){const{isReadOnly:p}=Ft(Wt);const h=on(weekDayGridLeftSelector);const[_,w]=useDOMNode();const{narrowWeekend:$=false,startDayOfWeek:P=ft.SUN}=l;const O=F$2((()=>Math.max(0,...e.map((({top:e})=>e)))),[e]);const A=F$2((()=>createGridPositionFinder({container:_,rowsCount:1,columnsCount:n.length,narrowWeekend:$,startDayOfWeek:P})),[_,n.length,$,P]);const{clickedIndex:H,isClickedCount:G,onClickExceedCount:B,onClickCollapseButton:W}=useGridRowHeightController(O,"allday");const U=F$2((()=>e.filter(isWithinHeight(r,sn+Ge)).map((e=>h$3(HorizontalEvent,{key:`allday-DayEvent-${e.cid()}`,uiModel:e,eventHeight:sn,headerHeight:0})))),[e,r]);const X=useGridSelection({type:"dayGridWeek",gridPositionFinder:A,dateCollection:n,selectionSorter:pn.sortSelection,dateGetter:pn.getDateFromCollection});const onMouseDown=e=>{const n=e.target;!p&&n.classList.contains(cls("panel-grid"))&&X(e)};return h$3(p$3,null,h$3("div",{className:cls("panel-title"),style:h},h$3(Template,{template:On,param:"alldayTitle"})),h$3("div",{className:cls("allday-panel"),ref:w,onMouseDown:onMouseDown},h$3("div",{className:cls("panel-grid-wrapper")},h$3(Cn,{uiModels:e,weekDates:n,narrowWeekend:$,height:r,clickedIndex:H,isClickedCount:G,onClickExceedCount:B,onClickCollapseButton:W})),h$3("div",{className:cls("panel-allday-events")},U),h$3(ResizingEventShadow,{weekDates:n,gridPositionFinder:A,gridColWidthMap:d}),h$3(MovingEventShadow$2,{rowStyleInfo:c,gridPositionFinder:A}),h$3(AlldayGridSelection,{weekDates:n,narrowWeekend:$})))}function OtherGridRow({events:e,weekDates:n,category:r,height:l=Be,options:c={}}){const d=on(weekDayGridLeftSelector);const p=F$2((()=>Math.max(0,...e.map((({top:e})=>e)))),[e]);const{narrowWeekend:h=false}=c;const _=`${r}Title`;const{clickedIndex:w,isClickedCount:$,onClickExceedCount:P,onClickCollapseButton:O}=useGridRowHeightController(p,r);const A=F$2((()=>e.filter(isWithinHeight(l,sn+Ge)).map((e=>h$3(HorizontalEvent,{key:`${r}-DayEvent-${e.cid()}`,uiModel:e,eventHeight:sn,headerHeight:0})))),[r,e,l]);return h$3(p$3,null,h$3("div",{className:cls("panel-title"),style:d},h$3(Template,{template:_,param:r})),h$3("div",{className:cls("allday-panel")},h$3("div",{className:cls("panel-grid-wrapper")},h$3(Cn,{uiModels:e,weekDates:n,narrowWeekend:h,height:l,clickedIndex:w,isClickedCount:$,onClickExceedCount:P,onClickCollapseButton:O})),h$3("div",{className:cls(`panel-${r}-events`)},A)))}const Rn={detailItem:cls("detail-item"),detailItemIndent:cls("detail-item","detail-item-indent"),detailItemSeparate:cls("detail-item","detail-item-separate"),sectionDetail:cls("popup-section","section-detail"),content:cls("content"),locationIcon:cls("icon","ic-location-b"),repeatIcon:cls("icon","ic-repeat-b"),userIcon:cls("icon","ic-user-b"),stateIcon:cls("icon","ic-state-b"),calendarDotIcon:cls("icon","calendar-dot")};function EventDetailSectionDetail({event:e}){var n,r;const{location:l,recurrenceRule:c,attendees:d,state:p,calendarId:h,body:_}=e;const w=useCalendarById(h);return h$3("div",{className:Rn.sectionDetail},l&&h$3("div",{className:Rn.detailItem},h$3("span",{className:Rn.locationIcon}),h$3("span",{className:Rn.content},h$3(Template,{template:"popupDetailLocation",param:e,as:"span"}))),c&&h$3("div",{className:Rn.detailItem},h$3("span",{className:Rn.repeatIcon}),h$3("span",{className:Rn.content},h$3(Template,{template:"popupDetailRecurrenceRule",param:e,as:"span"}))),d&&h$3("div",{className:Rn.detailItemIndent},h$3("span",{className:Rn.userIcon}),h$3("span",{className:Rn.content},h$3(Template,{template:"popupDetailAttendees",param:e,as:"span"}))),p&&h$3("div",{className:Rn.detailItem},h$3("span",{className:Rn.stateIcon}),h$3("span",{className:Rn.content},h$3(Template,{template:"popupDetailState",param:e,as:"span"}))),w&&h$3("div",{className:Rn.detailItem},h$3("span",{className:Rn.calendarDotIcon,style:{backgroundColor:null!=(n=null==w?void 0:w.backgroundColor)?n:""}}),h$3("span",{className:Rn.content},null!=(r=null==w?void 0:w.name)?r:"")),_&&h$3("div",{className:Rn.detailItemSeparate},h$3("span",{className:Rn.content},h$3(Template,{template:"popupDetailBody",param:e,as:"span"}))))}const An={sectionHeader:cls("popup-section","section-header"),content:cls("content"),eventTitle:cls("event-title")};function EventDetailSectionHeader({event:e}){return h$3("div",{className:An.sectionHeader},h$3("div",{className:An.eventTitle},h$3(Template,{template:"popupDetailTitle",param:e,as:"span"})),h$3("div",{className:An.content},h$3(Template,{template:"popupDetailDate",param:e,as:"span"})))}const Fn=cls("see-more-popup-slot");const Ln=cls("event-form-popup-slot");const Hn=cls("event-detail-popup-slot");const zn=8;const Gn=["isPrivate","isAllday","isPending","isFocused","isVisible","isReadOnly"];var Bn=(e=>{e.right="right";e.left="left";return e})(Bn||{});var Wn=(e=>{e.top="top";e.bottom="bottom";return e})(Wn||{});const Un=B$1(null);function FloatingLayerProvider({children:e}){const[n,r]=useDOMNode();const[l,c]=useDOMNode();const[d,p]=useDOMNode();const[h,_]=useDOMNode();const w={container:n,seeMorePopupSlot:l,formPopupSlot:d,detailPopupSlot:h};return h$3(Un.Provider,{value:w},e,h$3("div",{ref:r,className:cls("floating-layer")},h$3("div",{ref:c,className:Fn}),h$3("div",{ref:p,className:Ln}),h$3("div",{ref:_,className:Hn})))}const useFloatingLayer=e=>{var n;const r=q$2(Un);if(Te(r))throw new Error("FloatingLayerProvider is not found");return null!=(n=null==r?void 0:r[e])?n:null};function isTopOutOfLayout(e,n,r){return e+r.height>n.top+n.height}function isLeftOutOfLayout(e,n,r){return e+r.width>n.left+n.width}const eventFormPopupParamSelector=e=>e.popup[Et.Form];const eventDetailPopupParamSelector=e=>e.popup[Et.Detail];const seeMorePopupParamSelector=e=>e.popup[Et.SeeMore];const jn={popupContainer:cls("popup-container"),detailContainer:cls("detail-container"),topLine:cls("popup-top-line"),border:cls("popup-arrow-border"),fill:cls("popup-arrow-fill"),sectionButton:cls("popup-section","section-button"),content:cls("content"),editIcon:cls("icon","ic-edit"),deleteIcon:cls("icon","ic-delete"),editButton:cls("edit-button"),deleteButton:cls("delete-button"),verticalLine:cls("vertical-line")};function calculatePopupPosition$1(e,n,r){let l=e.top+e.height/2-r.height/2;let c=e.left+e.width;isTopOutOfLayout(l,n,r)&&(l=n.top+n.height-r.height);isLeftOutOfLayout(c,n,r)&&(c=e.left-r.width);return[Math.max(l,n.top)+window.scrollY,Math.max(c,n.left)+window.scrollX]}function calculatePopupArrowPosition(e,n,r){const l=e.top+e.height/2+window.scrollY;const c=e.left+e.width;const d=c+r.width>n.left+n.width;const p=d?Bn.right:Bn.left;return{top:l,direction:p}}function EventDetailPopup(){const{useFormPopup:e}=Ft(Wt);const n=Ft(eventDetailPopupParamSelector);const{event:r,eventRect:l}=null!=n?n:{};const{showFormPopup:c,hideDetailPopup:d}=useDispatch("popup");const p=useCalendarColor(r);const h=useLayoutContainer();const _=useFloatingLayer("detailPopupSlot");const w=useEventBus();const $=s$2(null);const[P,O]=y$1({});const[A,H]=y$1(0);const[G,B]=y$1(Bn.left);const W=F$2((()=>{const e=G===Bn.right;const n=G===Bn.left;return cls("popup-arrow",{right:e,left:n})}),[G]);h$2((()=>{if($.current&&l&&h){const e=h.getBoundingClientRect();const n=$.current.getBoundingClientRect();const[r,c]=calculatePopupPosition$1(l,e,n);const{top:d,direction:p}=calculatePopupArrowPosition(l,e,n);O({top:r,left:c});H(d-r-zn);B(p)}}),[l,h]);if(isNil(r)||isNil(l)||isNil(_))return null;const{title:U="",isAllday:X=false,start:K=new TZDate,end:J=new TZDate,location:Q,state:ee,isReadOnly:te,isPrivate:ne}=r;const oe={top:l.top+l.height/2,left:l.left+l.width/2};const onClickEditButton=()=>{e?c({isCreationPopup:false,event:r,title:U,location:Q,start:K,end:J,isAllday:X,isPrivate:ne,eventState:ee,popupArrowPointPosition:oe}):w.fire("beforeUpdateEvent",{event:r.toEventObject(),changes:{}})};const onClickDeleteButton=()=>{w.fire("beforeDeleteEvent",r.toEventObject());d()};return V(h$3("div",{role:"dialog",className:jn.popupContainer,ref:$,style:P},h$3("div",{className:jn.detailContainer},h$3(EventDetailSectionHeader,{event:r}),h$3(EventDetailSectionDetail,{event:r}),!te&&h$3("div",{className:jn.sectionButton},h$3("button",{type:"button",className:jn.editButton,onClick:onClickEditButton},h$3("span",{className:jn.editIcon}),h$3("span",{className:jn.content},h$3(Template,{template:"popupEdit",as:"span"}))),h$3("div",{className:jn.verticalLine}),h$3("button",{type:"button",className:jn.deleteButton,onClick:onClickDeleteButton},h$3("span",{className:jn.deleteIcon}),h$3("span",{className:jn.content},h$3(Template,{template:"popupDelete",as:"span"}))))),h$3("div",{className:jn.topLine,style:{backgroundColor:p.backgroundColor}}),h$3("div",{className:W},h$3("div",{className:jn.border,style:{top:A}},h$3("div",{className:jn.fill})))),_)}const Vn={dropdownMenu:cls("dropdown-menu"),dropdownMenuItem:cls("dropdown-menu-item"),dotIcon:cls("icon","dot"),content:cls("content")};function DropdownMenuItem({index:e,name:n,backgroundColor:r,onClick:l}){return h$3("li",{className:Vn.dropdownMenuItem,onClick:n=>l(n,e)},h$3("span",{className:Vn.dotIcon,style:{backgroundColor:r}}),h$3("span",{className:Vn.content},n))}function CalendarDropdownMenu({calendars:e,setOpened:n,onChangeIndex:r}){const handleDropdownMenuItemClick=(e,l)=>{e.stopPropagation();n(false);r(l)};return h$3("ul",{className:Vn.dropdownMenu},e.map((({name:e,backgroundColor:n="000"},r)=>h$3(DropdownMenuItem,{key:`dropdown-${e}-${r}`,index:r,name:e,backgroundColor:n,onClick:handleDropdownMenuItemClick}))))}function PopupSection({children:e,classNames:n=[],onClick:r=noop}){return h$3("div",{className:cls("popup-section",...n),onClick:r},e)}function useDropdownState(){const[e,n]=y$1(false);const toggleDropdown=()=>n((e=>!e));return{isOpened:e,setOpened:n,toggleDropdown:toggleDropdown}}var Yn=(e=>{e.init="init";e.setCalendarId="setCalendarId";e.setTitle="setTitle";e.setLocation="setLocation";e.setPrivate="setPrivate";e.setAllday="setAllday";e.setState="setState";e.reset="reset";return e})(Yn||{});const Zn={title:"",location:"",isAllday:false,isPrivate:false,state:"Busy"};function formStateReducer(e,n){switch(n.type){case"init":return __spreadValues(__spreadValues({},Zn),n.event);case"setCalendarId":return __spreadProps(__spreadValues({},e),{calendarId:n.calendarId});case"setTitle":return __spreadProps(__spreadValues({},e),{title:n.title});case"setLocation":return __spreadProps(__spreadValues({},e),{location:n.location});case"setPrivate":return __spreadProps(__spreadValues({},e),{isPrivate:n.isPrivate});case"setAllday":return __spreadProps(__spreadValues({},e),{isAllday:n.isAllday});case"setState":return __spreadProps(__spreadValues({},e),{state:n.state});case"reset":return __spreadValues(__spreadValues({},e),Zn);default:return e}}function useFormState(e){return d$2(formStateReducer,__spreadValues({calendarId:e},Zn))}const qn={popupSection:["dropdown-section","calendar-section"],popupSectionItem:cls("popup-section-item","popup-button"),dotIcon:cls("icon","dot"),content:cls("content","event-calendar")};function CalendarSelector({calendars:e,selectedCalendarId:n,formStateDispatch:r}){const{isOpened:l,setOpened:c,toggleDropdown:d}=useDropdownState();const p=e.find((e=>e.id===n));const{backgroundColor:h="",name:_=""}=null!=p?p:{};const changeIndex=n=>r({type:Yn.setCalendarId,calendarId:e[n].id});return h$3(PopupSection,{onClick:d,classNames:qn.popupSection},h$3("button",{type:"button",className:qn.popupSectionItem},h$3("span",{className:qn.dotIcon,style:{backgroundColor:h}}),h$3("span",{className:qn.content},_),h$3("span",{className:cls("icon","ic-dropdown-arrow",{open:l})})),l&&h$3(CalendarDropdownMenu,{calendars:e,setOpened:c,onChangeIndex:changeIndex}))}const Xn={closeButton:cls("popup-button","popup-close"),closeIcon:cls("icon","ic-close")};function ClosePopupButton({type:e,close:n}){const{hideAllPopup:r}=useDispatch("popup");const onClickHandler=()=>{r();isFunction$2(n)&&n()};return h$3("button",{type:"button",className:Xn.closeButton,onClick:onClickHandler},"moreEvents"===e?h$3(Template,{template:"monthMoreClose"}):h$3("i",{className:Xn.closeIcon}))}const Kn={confirmButton:cls("popup-button","popup-confirm")};function ConfirmPopupButton({children:e}){return h$3("button",{type:"submit",className:Kn.confirmButton},h$3("span",null,e))}function useStringOnlyTemplate({template:e,model:n,defaultValue:r=""}){const l=Ft(Gt);const c=l[e];if(isNil(c))return r;let d=c(n);qe(d)||(d=r);return d}const Jn={datePickerContainer:cls("datepicker-container"),datePicker:cls("popup-section-item","popup-date-picker"),allday:cls("popup-section-item","popup-section-allday"),dateIcon:cls("icon","ic-date"),dateDash:cls("popup-date-dash"),content:cls("content")};const Qn=R((function DateSelector2({start:n,end:r,isAllday:l=false,formStateDispatch:c},d){const{usageStatistics:p}=Ft(Wt);const h=s$2(null);const _=s$2(null);const w=s$2(null);const $=s$2(null);const P=useStringOnlyTemplate({template:"startDatePlaceholder",defaultValue:"Start Date"});const O=useStringOnlyTemplate({template:"endDatePlaceholder",defaultValue:"End Date"});const toggleAllday=()=>c({type:Yn.setAllday,isAllday:!l});_$2((()=>{if(h.current&&_.current&&w.current&&$.current){const c=new TZDate(n);const P=new TZDate(r);if(l){c.setHours(12,0,0);P.setHours(13,0,0)}d.current=e.createRangePicker({startpicker:{date:c.toDate(),input:_.current,container:h.current},endpicker:{date:P.toDate(),input:$.current,container:w.current},format:l?"yyyy-MM-dd":"yyyy-MM-dd HH:mm",timePicker:!l&&{showMeridiem:false,usageStatistics:p},usageStatistics:p})}}),[n,r,l,p,d]);return h$3(PopupSection,null,h$3("div",{className:Jn.datePicker},h$3("span",{className:Jn.dateIcon}),h$3("input",{name:"start",className:Jn.content,placeholder:P,ref:_}),h$3("div",{className:Jn.datePickerContainer,ref:h})),h$3("span",{className:Jn.dateDash},"-"),h$3("div",{className:Jn.datePicker},h$3("span",{className:Jn.dateIcon}),h$3("input",{name:"end",className:Jn.content,placeholder:O,ref:$}),h$3("div",{className:Jn.datePickerContainer,ref:w})),h$3("div",{className:Jn.allday,onClick:toggleAllday},h$3("span",{className:cls("icon",{"ic-checkbox-normal":!l,"ic-checkbox-checked":l})}),h$3("span",{className:Jn.content},h$3(Template,{template:"popupIsAllday"})),h$3("input",{name:"isAllday",type:"checkbox",className:cls("hidden-input"),value:l?"true":"false",checked:l})))}));const eo=["Busy","Free"];const to={popupSectionItem:cls("popup-section-item","dropdown-menu-item"),dropdownMenu:cls("dropdown-menu"),icon:cls("icon"),content:cls("content")};function StateDropdownMenu({setOpened:e,setEventState:n}){const onClickDropdown=(r,l)=>{r.stopPropagation();e(false);n(l)};return h$3("ul",{className:to.dropdownMenu},eo.map((e=>h$3("li",{key:e,className:to.popupSectionItem,onClick:n=>onClickDropdown(n,e)},h$3("span",{className:to.icon}),h$3("span",{className:to.content},h$3(Template,"Busy"===e?{template:"popupStateBusy"}:{template:"popupStateFree"}))))))}const no={popupSection:["dropdown-section","state-section"],popupSectionItem:cls("popup-section-item","popup-button"),stateIcon:cls("icon","ic-state"),arrowIcon:cls("icon","ic-dropdown-arrow"),content:cls("content","event-state")};function EventStateSelector({eventState:e="Busy",formStateDispatch:n}){const{isOpened:r,setOpened:l,toggleDropdown:c}=useDropdownState();const handleChangeEventState=e=>n({type:Yn.setState,state:e});return h$3(PopupSection,{onClick:c,classNames:no.popupSection},h$3("button",{type:"button",className:no.popupSectionItem},h$3("span",{className:no.stateIcon}),h$3("span",{className:no.content},h$3(Template,"Busy"===e?{template:"popupStateBusy"}:{template:"popupStateFree"})),h$3("span",{className:no.arrowIcon})),r&&h$3(StateDropdownMenu,{setOpened:l,setEventState:handleChangeEventState}))}const oo={popupSectionItem:cls("popup-section-item","popup-section-location"),locationIcon:cls("icon","ic-location"),content:cls("content")};function LocationInputBox({location:e,formStateDispatch:n}){const r=useStringOnlyTemplate({template:"locationPlaceholder",defaultValue:"Location"});const handleLocationChange=e=>{n({type:Yn.setLocation,location:e.currentTarget.value})};return h$3(PopupSection,null,h$3("div",{className:oo.popupSectionItem},h$3("span",{className:oo.locationIcon}),h$3("input",{name:"location",className:oo.content,placeholder:r,value:e,onChange:handleLocationChange})))}const ro={popupSectionItem:cls("popup-section-item","popup-section-title"),privateButton:cls("popup-section-item","popup-section-private","popup-button"),titleIcon:cls("icon","ic-title"),content:cls("content")};function TitleInputBox({title:e,isPrivate:n=false,formStateDispatch:r}){const l=useStringOnlyTemplate({template:"titlePlaceholder",defaultValue:"Subject"});const togglePrivate=()=>r({type:Yn.setPrivate,isPrivate:!n});const handleInputChange=e=>{r({type:Yn.setTitle,title:e.currentTarget.value})};return h$3(PopupSection,null,h$3("div",{className:ro.popupSectionItem},h$3("span",{className:ro.titleIcon}),h$3("input",{name:"title",className:ro.content,placeholder:l,value:e,onChange:handleInputChange,required:true})),h$3("button",{type:"button",className:ro.privateButton,onClick:togglePrivate},h$3("span",{className:cls("icon",{"ic-private":n,"ic-public":!n})}),h$3("input",{name:"isPrivate",type:"checkbox",className:cls("hidden-input"),value:n?"true":"false",checked:n})))}const io={popupContainer:cls("popup-container"),formContainer:cls("form-container"),popupArrowBorder:cls("popup-arrow-border"),popupArrowFill:cls("popup-arrow-fill")};function calculatePopupPosition(e,n,r){let l=e.top-r.height-zn;let c=e.left-r.width/2;let d=Wn.bottom;if(l<n.top){d=Wn.top;l=e.top+zn}isTopOutOfLayout(l,n,r)&&(l=n.top+n.height-r.height);isLeftOutOfLayout(c,n,r)&&(c=n.left+n.width-r.width);return{top:l+window.scrollY,left:Math.max(c,n.left)+window.scrollX,direction:d}}function isBooleanKey(e){return-1!==Gn.indexOf(e)}function getChanges(e,n){return Object.entries(n).reduce(((n,[r,l])=>{const c=r;e[c]instanceof TZDate?0!==compare(e[c],l)&&(n[c]=l):e[c]!==l&&(n[c]=l);return n}),{})}function EventFormPopup(){var e;const{calendars:n}=Ft(Ht);const{hideAllPopup:r}=useDispatch("popup");const l=Ft(eventFormPopupParamSelector);const{start:c,end:d,popupArrowPointPosition:p,close:h,isCreationPopup:_,event:w}=null!=l?l:{};const $=useEventBus();const P=useFloatingLayer("formPopupSlot");const[O,A]=useFormState(null==(e=n[0])?void 0:e.id);const H=s$2(null);const G=s$2(null);const[B,W]=y$1({});const[U,X]=y$1(0);const[K,J]=y$1(Wn.bottom);const Q=useLayoutContainer();const ee=F$2((()=>{const e=K===Wn.top;const n=K===Wn.bottom;return cls("popup-arrow",{top:e,bottom:n})}),[K]);h$2((()=>{if(G.current&&p&&Q){const e=Q.getBoundingClientRect();const n=G.current.getBoundingClientRect();const{top:r,left:l,direction:c}=calculatePopupPosition(p,e,n);const d=p.left-l;W({left:l,top:r});X(d);J(c)}}),[Q,p]);_$2((()=>{isPresent(l)&&isPresent(w)&&A({type:Yn.init,event:{title:l.title,location:l.location,isAllday:l.isAllday,isPrivate:l.isPrivate,calendarId:w.calendarId,state:l.eventState}})}),[n,w,A,l]);_$2((()=>{isNil(l)&&A({type:Yn.reset})}),[A,l]);if(isNil(c)||isNil(d)||isNil(P))return null;const onSubmit=e=>{var n,l;e.preventDefault();const c=new FormData(e.target);const d=__spreadValues({},O);c.forEach(((e,n)=>{d[n]=isBooleanKey(n)?"true"===e:e}));d.start=new TZDate(null==(n=H.current)?void 0:n.getStartDate());d.end=new TZDate(null==(l=H.current)?void 0:l.getEndDate());if(_)$.fire("beforeCreateEvent",d);else if(w){const e=getChanges(w,d);$.fire("beforeUpdateEvent",{event:w.toEventObject(),changes:e})}r()};return V(h$3("div",{role:"dialog",className:io.popupContainer,ref:G,style:B},h$3("form",{onSubmit:onSubmit},h$3("div",{className:io.formContainer},(null==n?void 0:n.length)?h$3(CalendarSelector,{selectedCalendarId:O.calendarId,calendars:n,formStateDispatch:A}):h$3(PopupSection,null),h$3(TitleInputBox,{title:O.title,isPrivate:O.isPrivate,formStateDispatch:A}),h$3(LocationInputBox,{location:O.location,formStateDispatch:A}),h$3(Qn,{start:c,end:d,isAllday:O.isAllday,formStateDispatch:A,ref:H}),h$3(EventStateSelector,{eventState:O.state,formStateDispatch:A}),h$3(ClosePopupButton,{type:"form",close:h}),h$3(PopupSection,null,h$3(ConfirmPopupButton,null,h$3(Template,_?{template:"popupSave"}:{template:"popupUpdate"})))),h$3("div",{className:ee},h$3("div",{className:io.popupArrowBorder,style:{left:U}},h$3("div",{className:io.popupArrowFill}))))),P)}function shownPopupParamSelector(e){return Object.values(e.popup).find((e=>isPresent(e)))}function PopupOverlay(){const e=Ft(shownPopupParamSelector);const{hideAllPopup:n}=useDispatch("popup");const r=isPresent(e);const onClick=r=>{var l;r.stopPropagation();null==(l=null==e?void 0:e.close)?void 0:l.call(e);n()};return h$3("div",{className:cls("popup-overlay"),style:{display:r?"block":"none"},onClick:onClick})}const ao={container:cls("see-more-container"),seeMore:cls("see-more"),header:cls("see-more-header"),list:cls("month-more-list")};function SeeMoreEventsPopup(){const e=Ft(seeMorePopupParamSelector);const{date:n,events:r=[],popupPosition:l}=null!=e?e:{};const{moreView:c,moreViewTitle:d}=useMonthTheme();const p=useFloatingLayer("seeMorePopupSlot");const h=useEventBus();const _=s$2(null);const w=isNil(n)||isNil(l)||isNil(p);_$2((()=>{!w&&_.current&&h.fire("clickMoreEventsBtn",{date:n.toDate(),target:_.current})}),[n,h,w]);if(w)return null;const $={height:Re,marginBottom:Ae,padding:Le,backgroundColor:d.backgroundColor};const P={ymd:toFormat(n,"YYYY-MM-DD"),day:n.getDay(),date:n.getDate().toString().padStart(2,"0")};const O={height:`calc(100% - ${Re+Ae+Fe}px)`};return V(h$3("div",{role:"dialog",className:ao.container,style:l,ref:_},h$3("div",{className:ao.seeMore,style:c},h$3("div",{className:ao.header,style:$},h$3(Template,{template:"monthMoreTitleDate",param:P}),h$3(ClosePopupButton,{type:"moreEvents"})),h$3("div",{className:ao.list,style:O},r.map((e=>h$3(HorizontalEvent,{key:`see-more-event-item-${e.cid()}`,uiModel:e,eventHeight:Me,headerHeight:Re,flat:true})))))),p)}function getLayoutStylesFromInfo(e,n){const r={height:toPercent(100)};e&&(r.width=e);n&&(r.height=n);return r}function Layout({children:e,width:n,height:r,className:l="",autoAdjustPanels:c=false}){const{backgroundColor:d}=on(Xt);const[p,h]=useDOMNode();const{setLastPanelType:_,updateLayoutHeight:w}=useDispatch("weekViewLayout");const $=F$2((()=>`${cls("layout")} ${l}`),[l]);h$2((()=>{if(p){const onResizeWindow=()=>w(p.offsetHeight);onResizeWindow();window.addEventListener("resize",onResizeWindow);return()=>window.removeEventListener("resize",onResizeWindow)}return noop}),[p,w]);h$2((()=>{if(p&&c){const n=x$3(e);const r=n[n.length-1];qe(r)||Ye(r)||isNil(r)||_(r.props.name)}}),[e,_,c,p]);return h$3(bn,{value:p},h$3("div",{ref:h,className:$,style:__spreadProps(__spreadValues({},getLayoutStylesFromInfo(n,r)),{backgroundColor:d})},p?e:null),h$3(EventFormPopup,null),h$3(EventDetailPopup,null),h$3(SeeMoreEventsPopup,null),h$3(PopupOverlay,null))}function getDefaultStyle(e,n){return{height:e,width:"100%",cursor:"row-resize",borderTop:n,borderBottom:n}}function PanelResizer({name:e,height:n}){const r=on(T$1((e=>e.week.panelResizer.border),[]));const l=getDefaultStyle(n,r);const c=__spreadProps(__spreadValues({},l),{display:"none",border:"none",backgroundColor:"#999"});const[d,p]=y$1(c);const h=s$2(null);const{updateDayGridRowHeightByDiff:_}=useDispatch("weekViewLayout");const w=useDrag(kn.panelResizer,{onDragStart:e=>{h.current={left:e.pageX,top:e.pageY}},onDrag:e=>{if(h.current){const n=e.pageY-h.current.top;p((e=>__spreadProps(__spreadValues({},e),{top:n,display:null})))}},onMouseUp:n=>{if(h.current){const r=n.pageY-h.current.top;h.current=null;p(c);_({rowName:e,diff:r})}}});return h$3("div",{style:{position:"relative"}},h$3("div",{className:cls("panel-resizer"),style:l,onMouseDown:w}),h$3("div",{className:cls("panel-resizer-guide"),style:d}))}function getPanelSide(e,n){return n?Math.min(n,e):e}function getPanelStyle({initialHeight:e,initialWidth:n,overflowX:r,overflowY:l,maxExpandableWidth:c,maxExpandableHeight:d,minHeight:p,maxHeight:h,minWidth:_,maxWidth:w}){const $={};if(n){$.width=getPanelSide(n,c);$.height="100%"}if(e){$.width="100%";$.height=getPanelSide(e,d)}r&&($.overflowX="auto");l&&($.overflowY="auto");return __spreadProps(__spreadValues({},$),{minHeight:p,maxHeight:h,minWidth:_,maxWidth:w})}const so=R((function Panel2({name:e,initialWidth:n=Be,initialHeight:r=Be,overflowX:l,overflowY:c,maxExpandableWidth:d,maxExpandableHeight:p,minHeight:h,maxHeight:_,minWidth:w,maxWidth:$,resizerWidth:P=Tt,resizerHeight:O=Tt,resizable:A,children:H},G){const{updateDayGridRowHeight:B}=useDispatch("weekViewLayout");const{height:W}=Ft(T$1((n=>{var r;return null!=(r=n.weekViewLayout.dayGridRows[e])?r:{}}),[e]));const U=null!=W?W:r;h$2((()=>{B({rowName:e,height:r})}),[r,e,B]);const X=getPanelStyle({initialWidth:n,initialHeight:U,overflowX:l,overflowY:c,maxExpandableWidth:d,maxExpandableHeight:p,minHeight:h,maxHeight:_,minWidth:w,maxWidth:$});const K=F$2((()=>isNil(A)||Ve(A)?!!A:A.includes(e)),[A,e]);return h$3(p$3,null,h$3("div",{className:cls("panel",e),style:X,ref:G},H),K?h$3(PanelResizer,{name:e,width:P,height:O}):null)}));const lo="timegrid";const addTimeGridPrefix=e=>`${lo}-${e}`;const co={second:"HH:mm:ss",minute:"HH:mm",hour:"HH:mm",date:"HH:mm",month:"MM.DD",year:"YYYY.MM.DD"};const uo={time:cls("event-time"),content:cls("event-time-content"),travelTime:cls("travel-time"),resizeHandleX:cls("resize-handler-x"),moveEvent:cls("dragging--move-event"),resizeEvent:cls("dragging--resize-vertical-event")};function getMarginLeft(e){const{percent:n,px:r}=extractPercentPx(`${e}`);return e>0||n>0||r>0?Ue:0}function getContainerWidth(e,n){return qe(e)?e:e>=0?`calc(${toPercent(e)} - ${n}px)`:""}function getStyles({uiModel:e,isDraggingTarget:n,hasNextStartTime:r,calendarColor:l,minHeight:c}){const{top:d,left:p,height:h,width:_,duplicateLeft:w,duplicateWidth:$,goingDurationHeight:P,modelDurationHeight:O,comingDurationHeight:A,croppedStart:H,croppedEnd:G}=e;const B="white";const W=2;const U=2;const X=getMarginLeft(p);const{color:K,backgroundColor:J,borderColor:Q,dragBackgroundColor:ee}=getEventColors(e,l);const te={width:getContainerWidth($||_,X),height:`calc(${toPercent(Math.max(h,c))} - ${U}px)`,top:toPercent(d),left:w||toPercent(p),borderRadius:W,borderLeft:`3px solid ${Q}`,marginLeft:X,color:K,backgroundColor:n?ee:J,opacity:n?.5:1,zIndex:r?1:0};const ne={height:toPercent(P),borderBottom:`1px dashed ${B}`};const oe={height:toPercent(O)};const re={height:toPercent(A),borderTop:`1px dashed ${B}`};if(H){te.borderTopLeftRadius=0;te.borderTopRightRadius=0}if(G){te.borderBottomLeftRadius=0;te.borderBottomRightRadius=0}return{containerStyle:te,goingDurationStyle:ne,modelDurationStyle:oe,comingDurationStyle:re}}function isDraggableEvent({uiModel:e,isReadOnlyCalendar:n,isDraggingTarget:r,hasNextStartTime:l}){const{model:c}=e;return!n&&!c.isReadOnly&&!r&&!l}function TimeEvent({uiModel:e,nextStartTime:n,isResizingGuide:r=false,minHeight:l=0}){const{useDetailPopup:c,isReadOnly:d,week:p}=Ft(Wt);const h=useCalendarColor(e.model);const{collapseDuplicateEvents:_}=p;const w=useLayoutContainer();const{showDetailPopup:$}=useDispatch("popup");const{setDraggingEventUIModel:P}=useDispatch("dnd");const{setSelectedDuplicateEventCid:O}=useDispatch("weekViewLayout");const A=useEventBus();const H=s$2(null);const[G,B]=y$1(false);const{model:W,goingDurationHeight:U,modelDurationHeight:X,comingDurationHeight:K,croppedEnd:J}=e;const{id:Q,calendarId:ee,customStyle:te}=W;const ne=isPresent(n);const{containerStyle:oe,goingDurationStyle:re,modelDurationStyle:ie,comingDurationStyle:ae}=getStyles({uiModel:e,isDraggingTarget:G,hasNextStartTime:ne,calendarColor:h,minHeight:l});const se=ne||r;useTransientUpdate(Ut,(({draggingEventUIModel:n,draggingState:l})=>{l!==Ct.DRAGGING||(null==n?void 0:n.cid())!==e.cid()||ne||r?B(false):B(true)}));_$2((()=>{r||A.fire("afterRenderEvent",e.model.toEventObject())}),[]);const startDragEvent=n=>{P(e);null==w?void 0:w.classList.add(n)};const endDragEvent=e=>{B(false);null==w?void 0:w.classList.remove(e)};const le=useDrag(En.moveEvent("timeGrid",`${e.cid()}`),{onDragStart:()=>{ue&&startDragEvent(uo.moveEvent)},onMouseUp:(n,{draggingState:r})=>{endDragEvent(uo.moveEvent);const l=r<=Ct.INIT;if(l&&_){const n=e.duplicateEvents.length>0?e.cid():bt;O(n)}l&&c&&H.current&&$({event:e.model,eventRect:H.current.getBoundingClientRect()},false);l&&A.fire("clickEvent",{event:e.model.toEventObject(),nativeEvent:n})},onPressESCKey:()=>endDragEvent(uo.moveEvent)});const handleMoveStart=e=>{e.stopPropagation();le(e)};const ce=useDrag(En.resizeEvent("timeGrid",`${e.cid()}`),{onDragStart:()=>startDragEvent(uo.resizeEvent),onMouseUp:()=>endDragEvent(uo.resizeEvent),onPressESCKey:()=>endDragEvent(uo.resizeEvent)});const handleResizeStart=e=>{e.stopPropagation();ce(e)};const ue=isDraggableEvent({uiModel:e,isReadOnlyCalendar:d,isDraggingTarget:G,hasNextStartTime:ne});const de=ue&&!J;return h$3("div",{"data-testid":`${se?"guide-":""}time-event-${W.title}-${e.cid()}`,"data-calendar-id":ee,"data-event-id":Q,className:uo.time,style:__spreadValues(__spreadValues({},oe),te),onMouseDown:handleMoveStart,ref:H},U?h$3("div",{className:uo.travelTime,style:re},h$3(Template,{template:"goingDuration",param:W})):null,X?h$3("div",{className:uo.content,style:ie},h$3(Template,{template:"time",param:__spreadProps(__spreadValues({},W.toEventObject()),{start:ne?n:W.start})})):null,K?h$3("div",{className:uo.travelTime,style:ae},h$3(Template,{template:"comingDuration",param:W})):null,de?h$3("div",{className:uo.resizeHandleX,onMouseDown:handleResizeStart}):null)}function GridSelection({top:e,height:n,text:r}){const{backgroundColor:l,border:c}=on(T$1((e=>e.common.gridSelection),[]));const d=on(T$1((e=>e.week.gridSelection.color),[]));const p={top:toPercent(e),height:toPercent(n),backgroundColor:l,border:c};return h$3("div",{className:cls("time","grid-selection"),style:p,"data-testid":`time-grid-selection-${e}-${n}`},r.length>0?h$3("span",{className:cls("grid-selection-label"),style:{color:d}},r):null)}function GridSelectionByColumn({columnIndex:e,timeGridRows:n}){const r=Ft(T$1((r=>cn.calculateSelection(r.gridSelection.timeGrid,e,n.length-1)),[e,n]));const l=F$2((()=>{if(!r)return null;const{startRowIndex:e,endRowIndex:l,isStartingColumn:c,isSelectingMultipleColumns:d}=r;const{top:p,startTime:h}=n[e];const{top:_,height:w,endTime:$}=n[l];const P=_+w-p;let O=`${h} - ${$}`;d&&(O=c?h:"");return{top:p,height:P,text:O}}),[r,n]);return isNil(l)?null:h$3(GridSelection,__spreadValues({},l))}function useTimeGridEventResize({gridPositionFinder:e,totalUIModels:n,columnIndex:r,timeGridData:l}){const c=useEventBus();const{isDraggingEnd:d,isDraggingCanceled:p,draggingEvent:h,clearDraggingEvent:_}=useDraggingEvent("timeGrid","resize");const[w,$]=useCurrentPointerPositionInGrid(e);const[P,O]=y$1(null);const A=T$1((()=>{O(null);_();$()}),[$,_]);const H=F$2((()=>{if(isNil(h))return null;const{columns:e,rows:r}=l;const c=n.map((e=>e.filter((e=>e.cid()===h.cid()))));const findRowIndexOf=(n,r)=>c=>{const d=setTimeStrToDate(e[r].date,c.startTime);const p=setTimeStrToDate(l.columns[r].date,c.endTime);return d<=n&&n<p};const d=c.findIndex((e=>e.length>0));const p=c[d][0];const{goingDuration:_=0}=p.model;const w=addMinutes(p.getStarts(),-_);const $=Math.max(r.findIndex(findRowIndexOf(w,d)),0);const P=findLastIndex(c,(e=>e.length>0));const O=c[P][0];const{comingDuration:A=0}=O.model;const H=addMinutes(O.getStarts(),A);let G=r.findIndex(findRowIndexOf(H,P));G=G>=0?G:r.length-1;return{eventStartDateColumnIndex:d,eventStartDateRowIndex:$,eventEndDateColumnIndex:P,eventEndDateRowIndex:G,resizeTargetUIModelColumns:c}}),[h,l,n]);const G=isPresent(H)&&isPresent(h)&&isPresent(w);const B=F$2((()=>H?l.rows[0].height:0),[H,l.rows]);_$2((()=>{if(G){const{eventStartDateRowIndex:e,eventStartDateColumnIndex:n,eventEndDateColumnIndex:c}=H;if(r===c&&n===c){const n=h.clone();const{height:r,goingDurationHeight:c,comingDurationHeight:d}=n;const p=Math.max(B+c*r/100+d*r/100,l.rows[w.rowIndex].top-l.rows[e].top+B);const _=c*r/p;const $=d*r/p;n.setUIProps({height:p,goingDurationHeight:_,comingDurationHeight:$,modelDurationHeight:100-(_+$)});O(n)}}}),[H,G,r,w,h,l.rows,B]);_$2((()=>{if(G){const{resizeTargetUIModelColumns:e,eventStartDateColumnIndex:n,eventEndDateColumnIndex:c}=H;if((r===n||r===c)&&n!==c){let c;if(r===n)c=e[r][0].clone();else{c=h.clone();c.setUIProps({height:l.rows[w.rowIndex].top+B})}O(c)}}}),[H,G,r,w,h,l.rows,B]);useWhen((()=>{const e=!p&&isPresent(H)&&isPresent(w)&&isPresent(h)&&H.eventEndDateColumnIndex===r;if(e){const{comingDuration:e=0}=h.model;const n=addMinutes(setTimeStrToDate(l.columns[r].date,l.rows[w.rowIndex].endTime),-e);const d=addMinutes(h.getStarts(),30);c.fire("beforeUpdateEvent",{event:h.model.toEventObject(),changes:{end:max(d,n)}})}A()}),d);return P}function ResizingGuideByColumn({gridPositionFinder:e,totalUIModels:n,columnIndex:r,timeGridData:l}){const c=useTimeGridEventResize({gridPositionFinder:e,totalUIModels:n,columnIndex:r,timeGridData:l});return isNil(c)?null:h$3(TimeEvent,{uiModel:c,isResizingGuide:true})}const po={column:cls("column"),backgrounds:cls("background-events"),events:cls("events")};function VerticalEvents({eventUIModels:e,minEventHeight:n}){const r={marginRight:8};return h$3("div",{className:po.events,style:r},e.map((e=>h$3(TimeEvent,{key:`${e.valueOf()}-${e.cid()}`,uiModel:e,minHeight:n}))))}function backgroundColorSelector$1(e){return{defaultBackgroundColor:e.week.dayGrid.backgroundColor,todayBackgroundColor:e.week.today.backgroundColor,weekendBackgroundColor:e.week.weekend.backgroundColor}}function getBackgroundColor({today:e,columnDate:n,defaultBackgroundColor:r,todayBackgroundColor:l,weekendBackgroundColor:c}){const d=isSameDate(e,n);const p=isWeekend(n.getDay());return d?l:p?c:r}const fo=g$1((function Column2({columnDate:e,columnWidth:n,columnIndex:r,totalUIModels:l,gridPositionFinder:c,timeGridData:d,isLastColumn:p}){const{rows:h}=d;const _=on(T$1((e=>e.week.timeGrid.borderRight),[]));const w=on(backgroundColorSelector$1);const[,$]=usePrimaryTimezone();const P=$();const O=getBackgroundColor(__spreadValues({today:P,columnDate:e},w));const A={width:n,backgroundColor:O,borderRight:p?"none":_};const H=l[r];const G=h[0].height;return h$3("div",{className:po.column,style:A,"data-testid":`timegrid-column-${e.getDay()}`},h$3(VerticalEvents,{eventUIModels:H,minEventHeight:G}),h$3(ResizingGuideByColumn,{gridPositionFinder:c,totalUIModels:l,columnIndex:r,timeGridData:d}),h$3(GridSelectionByColumn,{columnIndex:r,timeGridRows:h}))}));function gridLineBorderSelector(e){return{halfHourLineBorder:e.week.timeGridHalfHourLine.borderBottom,hourLineBorder:e.week.timeGridHourLine.borderBottom}}const ho=g$1((function GridLines2({timeGridRows:e}){const{halfHourLineBorder:n,hourLineBorder:r}=on(gridLineBorderSelector);return h$3("div",{className:cls("gridlines")},e.map(((e,l)=>{const c=l%2===0;return h$3("div",{key:`gridline-${e.startTime}-${e.endTime}`,className:cls("gridline-half"),style:{top:toPercent(e.top),height:toPercent(e.height),borderBottom:c?n:r},"data-testid":`gridline-${e.startTime}-${e.endTime}`})})))}));const mo=30;function getCurrentIndexByTime(e,n){const r=e.getHours()-n;const l=e.getMinutes();return 2*r+Math.floor(l/mo)}function getMovingEventPosition({draggingEvent:e,columnDiff:n,rowDiff:r,timeGridDataRows:l,currentDate:c}){const d=l[0].height;const p=d*l.length;const h=r*$t+n*_t;const _=Number(l[0].startTime.split(":")[0]);const{goingDuration:w=0,comingDuration:$=0}=e.model;const P=addMinutes(e.getStarts(),-w);const O=addMinutes(e.getEnds(),$);const A=addMilliseconds(P,h);const H=addMilliseconds(O,h);const G=Math.max(getCurrentIndexByTime(A,_),0);const B=Math.min(getCurrentIndexByTime(H,_),l.length-1);const W=A.getFullYear()<c.getFullYear()||A.getMonth()<c.getMonth()||A.getDate()<c.getDate();const U=H.getFullYear()>c.getFullYear()||H.getMonth()>c.getMonth()||H.getDate()>c.getDate();const X=B-(W?0:G);const K=W?0:l[G].top;const J=U?p:Math.max(X,1)*d;return{top:K,height:J}}const initXSelector=e=>e.dnd.initX;const initYSelector=e=>e.dnd.initY;function useTimeGridEventMove({gridPositionFinder:e,timeGridData:n}){const r=Ft(initXSelector);const l=Ft(initYSelector);const c=useEventBus();const{isDraggingEnd:d,isDraggingCanceled:p,draggingEvent:h,clearDraggingEvent:_}=useDraggingEvent("timeGrid","move");const[w,$]=useCurrentPointerPositionInGrid(e);const P=s$2(null);_$2((()=>{isPresent(r)&&isPresent(l)&&(P.current=e({clientX:r,clientY:l}))}),[e,r,l]);const O=F$2((()=>isNil(P.current)||isNil(w)?null:{columnDiff:w.columnIndex-P.current.columnIndex,rowDiff:w.rowIndex-P.current.rowIndex}),[w]);const A=F$2((()=>isNil(h)?null:h.getStarts()),[h]);const H=T$1((()=>{$();_();P.current=null}),[$,_]);const G=F$2((()=>isNil(O)||isNil(A)?null:addMilliseconds(A,O.rowDiff*$t+O.columnDiff*_t)),[O,A]);const B=F$2((()=>{if(isNil(h)||isNil(w)||isNil(O))return null;const e=h.clone();const{top:r,height:l}=getMovingEventPosition({draggingEvent:e,columnDiff:O.columnDiff,rowDiff:O.rowDiff,timeGridDataRows:n.rows,currentDate:n.columns[w.columnIndex].date});e.setUIProps({left:n.columns[w.columnIndex].left,width:n.columns[w.columnIndex].width,top:r,height:l});return e}),[w,h,O,n.columns,n.rows]);useWhen((()=>{const e=!p&&isPresent(h)&&isPresent(w)&&isPresent(O)&&isPresent(G)&&(0!==O.rowDiff||0!==O.columnDiff);if(e){const e=h.duration();const n=addMilliseconds(G,e);c.fire("beforeUpdateEvent",{event:h.model.toEventObject(),changes:{start:G,end:n}})}H()}),d);return{movingEvent:B,nextStartTime:G}}function MovingEventShadow$1({gridPositionFinder:e,timeGridData:n}){const{movingEvent:r,nextStartTime:l}=useTimeGridEventMove({gridPositionFinder:e,timeGridData:n});return isNil(r)?null:h$3(TimeEvent,{uiModel:r,nextStartTime:l})}const go={NOW_INDICATOR:"timegrid-now-indicator",NOW_INDICATOR_LABEL:"timegrid-now-indicator-label"};const vo={line:cls(addTimeGridPrefix("now-indicator")),left:cls(addTimeGridPrefix("now-indicator-left")),marker:cls(addTimeGridPrefix("now-indicator-marker")),today:cls(addTimeGridPrefix("now-indicator-today")),right:cls(addTimeGridPrefix("now-indicator-right"))};function nowIndicatorTheme(e){return{pastBorder:e.week.nowIndicatorPast.border,todayBorder:e.week.nowIndicatorToday.border,futureBorder:e.week.nowIndicatorFuture.border,bulletBackgroundColor:e.week.nowIndicatorBullet.backgroundColor}}function NowIndicator({top:e,columnWidth:n,columnCount:r,columnIndex:l}){const{pastBorder:c,todayBorder:d,futureBorder:p,bulletBackgroundColor:h}=on(nowIndicatorTheme);const _=useLayoutContainer();const w=useEventBus();const $=s$2(null);const P={left:toPercent(n*l),width:toPercent(n*l)};const O={left:toPercent(n*(l+1)),width:toPercent(n*(r-l+1))};_$2((()=>{const scrollToNow=e=>{var n;const r=null!=(n=null==_?void 0:_.querySelector(`.${cls("panel")}.${cls("time")}`))?n:null;if(r&&$.current){const{offsetHeight:n}=r;const{offsetTop:l}=$.current;const c=l-n/2;r.scrollTo?r.scrollTo({top:c,behavior:e}):r.scrollTop=c}};w.on("scrollToNow",scrollToNow);return()=>w.off("scrollToNow",scrollToNow)}),[w,_]);_$2((()=>{w.fire("scrollToNow","smooth")}),[w]);return h$3("div",{ref:$,className:vo.line,style:{top:toPercent(e)},"data-testid":go.NOW_INDICATOR},h$3("div",{className:vo.left,style:{width:P.width,borderTop:c}}),h$3("div",{className:vo.marker,style:{left:P.left,backgroundColor:h}}),h$3("div",{className:vo.today,style:{left:P.left,width:toPercent(n),borderTop:d}}),h$3("div",{className:vo.right,style:{left:O.left,borderTop:p}}))}const yo={now:addTimeGridPrefix("current-time"),dayDifference:addTimeGridPrefix("day-difference")};function NowIndicatorLabel({unit:e,top:n,now:r,zonedNow:l}){const c=on(T$1((e=>e.week.nowIndicatorLabel.color),[]));const d=F$2((()=>getDateDifference(l,r)),[l,r]);const p={unit:e,time:l,format:co[e]};return h$3("div",{className:cls(yo.now),style:{top:toPercent(n),color:c},"data-testid":go.NOW_INDICATOR_LABEL},0!==d&&h$3("span",{className:cls(yo.dayDifference)},`[${d>0?"+":"-"}${Math.abs(d)}]`),h$3(Template,{template:"timegridNowIndicatorLabel",param:p,as:"span"}))}const monthVisibleEventCountSelector=e=>{var n;return null!=(n=e.options.month.visibleEventCount)?n:6};const showNowIndicatorOptionSelector=e=>e.options.week.showNowIndicator;const showTimezoneCollapseButtonOptionSelector=e=>{var n;return null!=(n=e.options.week.showTimezoneCollapseButton)&&n};const timezonesCollapsedOptionSelector=e=>{var n;return null!=(n=e.options.week.timezonesCollapsed)&&n};const _o={timeColumn:addTimeGridPrefix("time-column"),hourRows:addTimeGridPrefix("hour-rows"),time:addTimeGridPrefix("time"),timeLabel:addTimeGridPrefix("time-label"),first:addTimeGridPrefix("time-first"),last:addTimeGridPrefix("time-last"),hidden:addTimeGridPrefix("time-hidden")};function backgroundColorSelector(e){return{primaryTimezoneBackgroundColor:e.week.timeGridLeft.backgroundColor,subTimezoneBackgroundColor:e.week.timeGridLeftAdditionalTimezone.backgroundColor}}function timeColorSelector(e){return{pastTimeColor:e.week.pastTime.color,futureTimeColor:e.week.futureTime.color}}function HourRows({rowsInfo:e,isPrimary:n,borderRight:r,width:l,nowIndicatorState:c}){var d;const p=Ft(showNowIndicatorOptionSelector);const{primaryTimezoneBackgroundColor:h,subTimezoneBackgroundColor:_}=on(backgroundColorSelector);const{pastTimeColor:w,futureTimeColor:$}=on(timeColorSelector);const P=isPresent(c)?addMinutes(c.now,null!=(d=e[0].diffFromPrimaryTimezone)?d:0):null;const O=n?h:_;return h$3("div",{role:"rowgroup",className:cls(_o.hourRows),style:{width:toPercent(l),borderRight:r,backgroundColor:O}},e.map((({date:e,top:r,className:l})=>{const c=isPresent(P)&&e<P;const d=c?w:$;return h$3("div",{key:e.getTime(),className:l,style:{top:toPercent(r),color:d},role:"row"},h$3(Template,{template:`timegridDisplay${n?"Primary":""}Time`,param:{time:e},as:"span"}))})),p&&isPresent(c)&&isPresent(P)&&h$3(NowIndicatorLabel,{unit:"hour",top:c.top,now:c.now,zonedNow:P}))}const wo=g$1((function TimeColumn2({timeGridRows:e,nowIndicatorState:n}){const r=Ft(showNowIndicatorOptionSelector);const l=Ft(timezonesSelector);const c=Ft(timezonesCollapsedOptionSelector);const d=useTZConverter();const{width:p,borderRight:h}=on(weekTimeGridLeftSelector);const _=F$2((()=>e.filter(((n,r)=>r%2===0||r===e.length-1))),[e]);const w=T$1(((e,l,c)=>{const shouldHideRow=({top:e,height:l})=>{if(!r||isNil(n))return false;const c=n.top;return e-l<=c&&c<=e+l};const d=0===l;const p=l===_.length-1;const h=cls(_o.time,{[_o.first]:d,[_o.last]:p,[_o.hidden]:shouldHideRow(e)});let w=setTimeStrToDate(new TZDate,p?e.endTime:e.startTime);isPresent(c)&&(w=addMinutes(w,c));return{date:w,top:e.top,className:h,diffFromPrimaryTimezone:c}}),[_,n,r]);const[$,...P]=l;const O=P.length>0?100/(P.length+1):100;const A=_.map(((e,n)=>w(e,n)));const H=F$2((()=>0===P.length?[]:P.reverse().map((e=>{const{timezoneName:n}=e;const r=d($.timezoneName).getTimezoneOffset();const l=d(n).getTimezoneOffset();const c=l-r;return _.map(((e,n)=>w(e,n,c)))}))),[w,P,$,_,d]);return h$3("div",{className:cls(_o.timeColumn),style:{width:p},"data-testid":"timegrid-time-column"},!c&&H.map((e=>h$3(HourRows,{key:e[0].diffFromPrimaryTimezone,rowsInfo:e,isPrimary:false,borderRight:h,width:O,nowIndicatorState:n}))),h$3(HourRows,{rowsInfo:A,isPrimary:true,borderRight:h,width:c?100:O,nowIndicatorState:n}))}));function getTopPercentByTime(e,n,r){const l=n.getTime();const c=r.getTime();const d=limit(e.getTime(),[l],[c])-l;const p=c-l;const h=ratio(p,100,d);return limit(h,[0],[100])}function getTopHeightByTime(e,n,r,l){const c=getTopPercentByTime(e,r,l);const d=getTopPercentByTime(n,r,l);const p=d-c;return{top:c,height:p}}const Do=1;function isBetween(e,n){return r=>{const{goingDuration:l=0,comingDuration:c=0}=r.model;const d=addMinutes(r.getStarts(),-l);const p=addMinutes(r.getEnds(),c);return!(p<=e||d>=n)}}function setInnerHeights(e,n){const{renderStart:r,renderEnd:l,modelStart:c,modelEnd:d}=n;const{goingDuration:p=0,comingDuration:h=0}=e.model;let _=100;if(p>0){const{height:n}=getTopHeightByTime(r,c,r,l);e.goingDurationHeight=n;_-=n}if(h>0){const{height:n}=getTopHeightByTime(d,l,r,l);e.comingDurationHeight=n;_-=n}e.modelDurationHeight=_}function setCroppedEdges(e,n){const{goingStart:r,comingEnd:l,startColumnTime:c,endColumnTime:d}=n;r<c&&(e.croppedStart=true);l>d&&(e.croppedEnd=true)}function getDuplicateLeft(e,n){const{duplicateEvents:r,duplicateEventIndex:l}=e;const c=r[l-1];let d=n;if(c){const{percent:e,px:n}=extractPercentPx(`${c.duplicateLeft}`);const{percent:r,px:l}=extractPercentPx(`${c.duplicateWidth}`);const p=e+r;const h=n+l+Ue;d=0!==p?`calc(${toPercent(p)} ${h>0?"+":"-"} ${toPx(Math.abs(h))})`:toPx(h)}else d=toPercent(d);return d}function getDuplicateWidth(e,n){const{collapse:r}=e;return r?`${je}px`:`calc(${toPercent(n)} - ${toPx((je+Ue)*(e.duplicateEvents.length-1)+Ue)})`}function setDimension(e,n){const{startColumnTime:r,endColumnTime:l,baseWidth:c,columnIndex:d,renderStart:p,renderEnd:h}=n;const{duplicateEvents:_}=e;const{top:w,height:$}=getTopHeightByTime(p,h,r,l);const P={top:w,left:c*d,width:c,height:Math.max(Do,$),duplicateLeft:"",duplicateWidth:""};if(_.length>0){P.duplicateLeft=getDuplicateLeft(e,P.left);P.duplicateWidth=getDuplicateWidth(e,P.width)}e.setUIProps(P)}function getRenderInfoOptions(e,n,r,l,c){const{goingDuration:d=0,comingDuration:p=0}=e.model;const h=e.getStarts();const _=e.getEnds();const w=addMinutes(h,-d);const $=addMinutes(_,p);const P=max(w,l);const O=min($,c);return{baseWidth:r,columnIndex:n,modelStart:h,modelEnd:_,renderStart:P,renderEnd:O,goingStart:w,comingEnd:$,startColumnTime:l,endColumnTime:c,duplicateEvents:e.duplicateEvents}}function setRenderInfo({uiModel:e,columnIndex:n,baseWidth:r,startColumnTime:l,endColumnTime:c,isDuplicateEvent:d=false}){if(!d&&e.duplicateEvents.length>0){e.duplicateEvents.forEach((e=>{setRenderInfo({uiModel:e,columnIndex:n,baseWidth:r,startColumnTime:l,endColumnTime:c,isDuplicateEvent:true})}));return}const p=getRenderInfoOptions(e,n,r,l,c);setDimension(e,p);setInnerHeights(e,p);setCroppedEdges(e,p)}function setDuplicateEvents(e,n,r){const{getDuplicateEvents:l,getMainEvent:c}=n;const d=e.map((e=>e.model.toEventObject()));e.forEach((n=>{if(n.collapse||n.duplicateEvents.length>0)return;const p=l(n.model.toEventObject(),d);if(p.length<=1)return;const h=c(p);const _=p.map((n=>e.find((e=>e.cid()===n.__cid))));const w=!!(r>bt&&p.find((e=>e.__cid===r)));const $=p.reduce(((e,{start:n,goingDuration:r})=>{const l=addMinutes(n,-r);return min(e,l)}),p[0].start);const P=p.reduce(((e,{end:n,comingDuration:r})=>{const l=addMinutes(n,r);return max(e,l)}),p[0].end);_.forEach(((e,n)=>{const l=e.cid()===h.__cid;const c=!(w&&e.cid()===r||!w&&l);e.setUIProps({duplicateEvents:_,duplicateEventIndex:n,collapse:c,isMain:l,duplicateStarts:$,duplicateEnds:P})}))}));return e}function setRenderInfoOfUIModels(e,n,r,l,c){const d=e.filter(isTimeEvent).filter(isBetween(n,r)).sort(pt.compare.event.asc);c&&setDuplicateEvents(d,c,l);const p=d.filter((e=>!e.collapse));const h=createEventCollection(...p);const _=true;const w=getCollisionGroup(p,_);const $=getMatrices(h,w,_);$.forEach((e=>{const l=Math.max(...e.map((e=>e.length)));const c=Math.round(100/l);e.forEach((e=>{e.forEach(((e,l)=>{setRenderInfo({uiModel:e,columnIndex:l,baseWidth:c,startColumnTime:n,endColumnTime:r})}))}))}));return d}function useInterval(e,n){const r=s$2(e);_$2((()=>{r.current=e}),[e]);_$2((()=>{const tick=()=>r.current();const e=null!=n?n:-1;if(e>0){const n=setInterval(tick,e);return()=>clearInterval(n)}}),[n])}function useIsMounted(){const e=s$2(true);_$2((()=>()=>{e.current=false}),[]);return T$1((()=>e.current),[])}const $o={timegrid:cls(lo),scrollArea:cls(addTimeGridPrefix("scroll-area"))};function TimeGrid({timeGridData:e,events:n}){const{isReadOnly:r,week:{narrowWeekend:l,startDayOfWeek:c,collapseDuplicateEvents:d}}=Ft(Wt);const p=Ft(showNowIndicatorOptionSelector);const h=Ft((e=>e.weekViewLayout.selectedDuplicateEventCid));const[,_]=usePrimaryTimezone();const w=useIsMounted();const{width:$}=on(weekTimeGridLeftSelector);const[P,O]=y$1(null);const{columns:A,rows:H}=e;const G=A.length-1;const B=F$2((()=>A.map((({date:e})=>n.filter(isBetween(toStartOfDay(e),toEndOfDay(e))).map((e=>e.clone())))).map(((e,n)=>setRenderInfoOfUIModels(e,setTimeStrToDate(A[n].date,first(H).startTime),setTimeStrToDate(A[n].date,last(H).endTime),h,d)))),[A,H,n,h,d]);const W=F$2((()=>{const n=_();const r=A.findIndex((e=>isSameDate(e.date,n)));if(r<0)return null;const l=setTimeStrToDate(A[r].date,e.rows[0].startTime);const c=setTimeStrToDate(A[r].date,last(e.rows).endTime);return{startTime:l,endTime:c,currentDateIndex:r}}),[A,_,e.rows]);const[U,X]=useDOMNode();const K=F$2((()=>createGridPositionFinder({rowsCount:H.length,columnsCount:A.length,container:U,narrowWeekend:l,startDayOfWeek:c})),[A.length,U,l,H.length,c]);const J=useGridSelection({type:"timeGrid",gridPositionFinder:K,selectionSorter:cn.sortSelection,dateGetter:cn.getDateFromCollection,dateCollection:e});const Q=T$1((()=>{if(isPresent(W)){const{startTime:e,endTime:n}=W;const r=_();e<=r&&r<=n&&O({top:getTopPercentByTime(r,e,n),now:r})}}),[W,_]);h$2((()=>{var e;w()&&((null!=(e=null==W?void 0:W.currentDateIndex)?e:-1)>=0?Q():O(null))}),[W,w,Q]);useInterval(Q,isPresent(W)?wt:null);return h$3("div",{className:$o.timegrid},h$3("div",{className:$o.scrollArea},h$3(wo,{timeGridRows:H,nowIndicatorState:P}),h$3("div",{className:cls("columns"),style:{left:$},ref:X,onMouseDown:passConditionalProp(!r,J)},h$3(ho,{timeGridRows:H}),h$3(MovingEventShadow$1,{gridPositionFinder:K,timeGridData:e}),A.map(((n,r)=>h$3(fo,{key:n.date.toString(),timeGridData:e,columnDate:n.date,columnWidth:toPercent(n.width),columnIndex:r,totalUIModels:B,gridPositionFinder:K,isLastColumn:r===G}))),p&&isPresent(W)&&isPresent(P)?h$3(NowIndicator,{top:P.top,columnWidth:A[0].width,columnCount:A.length,columnIndex:W.currentDateIndex}):null)))}function TimezoneCollapseButton({isCollapsed:e}){const n=useEventBus();const r=cls("icon",{"ic-arrow-right":e,"ic-arrow-left":!e});return h$3("button",{className:cls(addTimeGridPrefix("timezone-collapse-button")),"aria-expanded":!e,onClick:()=>n.fire("clickTimezonesCollapseBtn",e)},h$3("span",{className:r,role:"img"}))}function TimezoneLabel({label:e,offset:n,tooltip:r,width:l=100,left:c}){return h$3("div",{title:r,className:cls(addTimeGridPrefix("timezone-label")),style:{width:toPercent(l),height:toPercent(100),left:toPercent(c)},role:"gridcell"},h$3(Template,{template:"timezoneDisplayLabel",param:{displayLabel:e,timezoneOffset:n},as:"span"}))}function useTimezoneCollapseOptions(){const e=Ft(showTimezoneCollapseButtonOptionSelector);const n=Ft(timezonesCollapsedOptionSelector);return F$2((()=>({showTimezoneCollapseButton:e,timezonesCollapsed:n})),[e,n])}function TimezoneLabels({top:e}){const n=Ft(timezonesSelector);const{width:r}=on(weekTimeGridLeftSelector);const l=useTZConverter();const{showTimezoneCollapseButton:c,timezonesCollapsed:d}=useTimezoneCollapseOptions();if(n.length<=1)return null;const p=n.map((({displayLabel:e,timezoneName:n,tooltip:r})=>Te(e)?{label:null,offset:l(n).getTimezoneOffset(),tooltip:null!=r?r:n}:{label:e,offset:null,tooltip:null!=r?r:n}));const[h,..._]=p;const w=_.reverse();const $=d?1:n.length;const P=100/$;return h$3("div",{style:{top:e,width:r},role:"columnheader",className:cls("timezone-labels-slot")},!d&&w.map(((e,n)=>{var r;return h$3(TimezoneLabel,__spreadValues({key:`subTimezone-${null!=(r=e.label)?r:e.offset}`,width:P,left:P*n},e))})),c&&h$3(TimezoneCollapseButton,{isCollapsed:d}),h$3(TimezoneLabel,__spreadValues({width:P,left:P*w.length},h)))}const So={MONTH:"month",WEEK:"week",DAY:"day"};const Co=["milestone","task"];const To=["allday","time"];function getActivePanels(e,n){const r=[];true===e?r.push(...Co):Array.isArray(e)&&r.push(...e);true===n?r.push(...To):Array.isArray(n)&&r.push(...n);return r}function useEventsWithTimezone(e){const n=Ft(primaryTimezoneSelector);const r=useTZConverter();return F$2((()=>{if("Local"===n)return e;const l=isUsingDST(new TZDate);const{timedEvents:c=createEventCollection(),totalEvents:d=createEventCollection()}=e.groupBy((e=>"time"===e.category?"timedEvents":"totalEvents"));c.each((e=>{const c=clone$1(e);let p=r(n,c.start);let h=r(n,c.end);if(l){isUsingDST(p)||(p=p.addHours(1));isUsingDST(h)||(h=h.addHours(1))}else{isUsingDST(p)&&(p=p.addHours(-1));isUsingDST(h)&&(h=h.addHours(-1))}c.start=p;c.end=h;d.add(c)}));return d}),[e,n,r])}function useCalendarData(e,...n){const r=F$2((()=>e.events.filter(Collection.and(...n))),[e.events,n]);const l=useEventsWithTimezone(r);return F$2((()=>__spreadProps(__spreadValues({},e),{events:l})),[e,l])}function isTimeGridDraggingType(e){return/^(event|gridSelection)\/timeGrid/.test(null!=e?e:"")}function useTimeGridScrollSync(e,n){useTransientUpdate(Ut,(({y:r,draggingItemType:l,draggingState:c})=>{if(isPresent(e)&&isTimeGridDraggingType(l)&&c===Ct.DRAGGING&&isPresent(r)){const{offsetTop:l,offsetHeight:c,scrollHeight:d}=e;const p=Math.floor(d/n);const h=l+c;if(r<l+p){const n=r-(l+p);e.scrollTop=Math.max(0,e.scrollTop+n)}else if(r>h-p){const n=r-(h-p);e.scrollTop=Math.min(c,e.scrollTop+n)}}}))}function timegridHeightSelector(e){var n,r,l;return null==(l=null==(r=null==(n=e.weekViewLayout)?void 0:n.dayGridRows)?void 0:r.time)?void 0:l.height}function useTimezoneLabelsTop(e){const n=Ft(timegridHeightSelector);const[r,l]=y$1(null);h$2((()=>{isPresent(n)&&e&&l(e.offsetTop)}),[n,e]);return r}function useDayViewState(){const e=Ft(Ht);const n=Ft(Wt);const{dayGridRows:r,lastPanelType:l}=Ft(zt);const{renderDate:c}=Ft(Bt);return F$2((()=>({calendar:e,options:n,gridRowLayout:r,lastPanelType:l,renderDate:c})),[e,n,r,l,c])}function Day$1(){var e,n;const{calendar:r,options:l,gridRowLayout:c,lastPanelType:d,renderDate:p}=useDayViewState();const h=Ft(primaryTimezoneSelector);const _=on(T$1((e=>e.week.dayGridLeft.width),[]));const[w,$]=useDOMNode();const P=l.week;const{narrowWeekend:O,startDayOfWeek:A,workweek:H,hourStart:G,hourEnd:B,eventView:W,taskView:U}=P;const X=F$2((()=>[p]),[p]);const K=getDayNames(X,null!=(n=null==(e=l.week)?void 0:e.dayNames)?n:[]);const{rowStyleInfo:J,cellWidthMap:Q}=getRowStyleInfo(X.length,O,A,H);const ee=useCalendarData(r,l.eventFilter);const te=F$2((()=>{const getFilterRange=()=>"Local"===h?[toStartOfDay(X[0]),toEndOfDay(X[0])]:[toStartOfDay(addDate(X[0],-1)),toEndOfDay(addDate(X[0],1))];const[e,n]=getFilterRange();return getWeekViewEvents(X,ee,{narrowWeekend:O,hourStart:G,hourEnd:B,weekStartDate:e,weekEndDate:n})}),[ee,X,B,G,O,h]);const ne=F$2((()=>createTimeGridData(X,{hourStart:G,hourEnd:B,narrowWeekend:O})),[X,B,G,O]);const oe=getActivePanels(U,W);const re=oe.map((e=>{var n,r;if("time"===e)return null;const l=e;return h$3(so,{key:l,name:l,resizable:l!==d},"allday"===l?h$3(AlldayGridRow,{events:te[l],rowStyleInfo:J,gridColWidthMap:Q,weekDates:X,height:null==(n=c[l])?void 0:n.height,options:P}):h$3(OtherGridRow,{category:l,events:te[l],weekDates:X,height:null==(r=c[l])?void 0:r.height,options:P,gridColWidthMap:Q}))}));useTimeGridScrollSync(w,ne.rows.length);const ie=useTimezoneLabelsTop(w);return h$3(Layout,{className:cls("day-view"),autoAdjustPanels:true},h$3(so,{name:"day-view-day-names",initialHeight:He+ze},h$3(GridHeader,{type:"week",dayNames:K,marginLeft:_,rowStyleInfo:J})),re,oe.includes("time")?h$3(so,{name:"time",autoSize:1,ref:$},h$3(TimeGrid,{events:te.time,timeGridData:ne}),h$3(TimezoneLabels,{top:ie})):null)}function AccumulatedGridSelection({rowIndex:e,weekDates:n,narrowWeekend:r}){const l=Ft(T$1((r=>r.gridSelection.accumulated.dayGridMonth.map((r=>dn.calculateSelection(r,e,n.length)))),[e,n]));return h$3("div",{className:cls("accumulated-grid-selection")},l.map((e=>e?h$3(GridSelection$1,{type:"accumulated",gridSelectionData:e,weekDates:n,narrowWeekend:r}):null)))}function MoreEventsButton({type:e,number:n,onClickButton:r,className:l}){const{reset:c}=useDispatch("dnd");const handleMouseDown=e=>{e.stopPropagation()};const handleClick=()=>{c();r()};const d=`monthGrid${e===an.header?"Header":"Footer"}Exceed`;return h$3("button",{type:"button",onMouseDown:handleMouseDown,onClick:handleClick,className:l},h$3(Template,{template:d,param:n}))}function getDateColor({date:e,theme:n,renderDate:r,isToday:l}){const c=e.getDay();const d=r.getMonth();const p=d===e.getMonth();const{common:{holiday:h,saturday:_,today:w,dayName:$},month:{dayExceptThisMonth:P,holidayExceptThisMonth:O}}=n;return l?w.color:isSunday(c)?p?h.color:O.color:isSaturday(c)?p?_.color:P.color:p?$.color:P.color}function useCellHeaderTheme(){const e=useCommonTheme();const n=useMonthTheme();return F$2((()=>({common:e,month:n})),[e,n])}function CellHeader({type:e=an.header,exceedCount:n=0,date:r,onClickExceedCount:l}){const{renderDate:c}=Ft(Bt);const[,d]=usePrimaryTimezone();const p=useCellHeaderTheme();const h=p.month.gridCell[`${e}Height`];const _=toFormat(r,"YYYYMMDD");const w=toFormat(d(),"YYYYMMDD");const $=_===w;const P={date:toFormat(r,"YYYY-MM-DD"),day:r.getDay(),hiddenEventCount:n,isOtherMonth:r.getMonth()!==c.getMonth(),isToday:_===w,month:r.getMonth(),ymd:_};const O={color:getDateColor({date:r,theme:p,isToday:$,renderDate:c})};const A=`monthGrid${capitalize(e)}`;return isNil(h)?null:h$3("div",{className:cls(`grid-cell-${e}`),style:{height:h}},h$3("span",{className:cls("grid-cell-date"),style:O},h$3(Template,{template:A,param:P})),n?h$3(MoreEventsButton,{type:e,number:n,onClickButton:l,className:cls("grid-cell-more-events")}):null)}function getSeeMorePopupSize({grid:e,offsetWidth:n,eventLength:r,layerSize:l}){const c=getSize(e).height+2*Pe;let d=n+2*Pe;const{width:p,height:h}=l;const _=10;d=Math.max(d,Oe);let w=Re+Ae+Pe;const $=Me+xe;w+=r<=_?$*r:$*_;p&&(d=p);h&&(w=h);(isNaN(w)||w<c)&&(w=c);return{width:d,height:w}}function getSeeMorePopupPosition(e,n,r){const{width:l,height:c,left:d,top:p}=n;const{width:h,height:_}=e;const w=d+l;const $=p+c;let P=r.left+r.width/2-h/2;let{top:O}=r;const A=P<d;const H=P+h>w;const G=O<p;const B=O+_>$;A&&(P=d);H&&(P=w-h);G&&(O=p);B&&(O=$-_);return{top:O+window.scrollY,left:P+window.scrollX}}function getSeeMorePopupRect({layoutContainer:e,cell:n,popupSize:r}){const l=e.getBoundingClientRect();const c=n.getBoundingClientRect();const d=getSeeMorePopupPosition(r,l,c);return __spreadValues(__spreadValues({},r),d)}function usePopupPosition(e,n,r){const{width:l,height:c}=on(monthMoreViewSelector);const[d,p]=useDOMNode();const[h,_]=y$1(null);_$2((()=>{if(r&&n&&d){const p=getSeeMorePopupSize({grid:n,offsetWidth:d.offsetWidth,eventLength:e,layerSize:{width:l,height:c}});const h=getSeeMorePopupRect({cell:d,layoutContainer:r,popupSize:p});_(h)}}),[r,d,e,n,l,c]);return{popupPosition:h,containerRefCallback:p}}function weekendBackgroundColorSelector(e){return e.month.weekend.backgroundColor}function GridCell({date:e,events:n=[],style:r,parentContainer:l,contentAreaHeight:c}){const d=useLayoutContainer();const{showSeeMorePopup:p}=useDispatch("popup");const h=on(weekendBackgroundColorSelector);const{popupPosition:_,containerRefCallback:w}=usePopupPosition(n.length,l,d);const $=T$1((()=>{_&&p({date:e,popupPosition:_,events:n})}),[e,n,_,p]);const P=getExceedCount(n,c,Me+xe);return h$3("div",{className:cls("daygrid-cell"),style:__spreadProps(__spreadValues({},r),{backgroundColor:isWeekend(e.getDay())?h:"inherit"}),ref:w},h$3(CellHeader,{type:an.header,exceedCount:P,date:e,onClickExceedCount:$}),h$3(CellHeader,{type:an.footer,exceedCount:P,date:e,onClickExceedCount:$}))}const bo=g$1((function GridRow2({week:e,rowInfo:n,gridDateEventModelMap:r={},contentAreaHeight:l}){const[c,d]=useDOMNode();const p=on(T$1((e=>e.common.border),[]));return h$3("div",{className:cls("weekday-grid"),style:{borderTop:p},ref:d},e.map(((e,d)=>{const p=e.getDay();const{width:h,left:_}=n[d];const w=toFormat(toStartOfDay(e),"YYYYMMDD");return h$3(GridCell,{key:`daygrid-cell-${p}`,date:e,style:{width:toPercent(h),left:toPercent(_)},parentContainer:c,events:r[w],contentAreaHeight:l})})))}));function GridSelectionByRow({weekDates:e,narrowWeekend:n,rowIndex:r}){const l=Ft(T$1((n=>dn.calculateSelection(n.gridSelection.dayGridMonth,r,e.length)),[r,e.length]));return isNil(l)?null:h$3(GridSelection$1,{type:"month",gridSelectionData:l,weekDates:e,narrowWeekend:n})}const ko=g$1((function MonthEvents2({contentAreaHeight:e,eventHeight:n=sn,events:r,name:l,className:c}){const{headerHeight:d}=on(monthGridCellSelector);const p=r.filter(isWithinHeight(e,n+xe)).map((e=>h$3(HorizontalEvent,{key:`${l}-DayEvent-${e.cid()}`,uiModel:e,eventHeight:n,headerHeight:null!=d?d:Ne})));return h$3("div",{className:c},p)}));function useDayGridMonthEventMove({dateMatrix:e,rowInfo:n,gridPositionFinder:r,rowIndex:l}){const c=useEventBus();const{isDraggingEnd:d,isDraggingCanceled:p,draggingEvent:h,clearDraggingEvent:_}=useDraggingEvent("dayGrid","move");const[w,$]=useCurrentPointerPositionInGrid(r);const P=F$2((()=>{var e,r;let c=null;if(h&&(null==w?void 0:w.rowIndex)===l){c=h;c.left=n[null!=(e=null==w?void 0:w.columnIndex)?e:0].left;c.width=n[null!=(r=null==w?void 0:w.columnIndex)?r:0].width}return c}),[h,null==w?void 0:w.rowIndex,null==w?void 0:w.columnIndex,l,n]);useWhen((()=>{const n=!p&&isPresent(P)&&isPresent(w);if(n){const n=P.model.getStarts();const r=P.duration();const l=e[w.rowIndex][w.columnIndex];const d=getDateDifference(l,n)*_t;const p=new TZDate(n.getTime()+d);const h=new TZDate(p.getTime()+r);c.fire("beforeUpdateEvent",{event:P.model.toEventObject(),changes:{start:p,end:h}})}_();$()}),d);return P}function MovingEventShadow({dateMatrix:e,gridPositionFinder:n,rowInfo:r,rowIndex:l}){const c=useDayGridMonthEventMove({dateMatrix:e,rowInfo:r,gridPositionFinder:n,rowIndex:l});return isNil(c)?null:h$3(HorizontalEvent,{uiModel:c,movingLeft:c.left,eventHeight:sn,headerHeight:Ie+Ne})}function getRowPosOfUIModel(e,n){const r=Math.max(getGridDateIndex(e.getStarts(),n),0);const l=getGridDateIndex(e.getEnds(),n);return{startColumnIndex:r,endColumnIndex:l}}function useDayGridMonthEventResize({dateMatrix:e,gridPositionFinder:n,renderedUIModels:r,cellWidthMap:l,rowIndex:c}){const d=useEventBus();const{isDraggingEnd:p,isDraggingCanceled:h,draggingEvent:_,clearDraggingEvent:w}=useDraggingEvent("dayGrid","resize");const[$,P]=useCurrentPointerPositionInGrid(n);const[O,A]=y$1(null);const H=T$1((()=>{A(null);P();w()}),[P,w]);const G=F$2((()=>{if(isNil(_))return null;const n=r.map((({uiModels:e})=>e.filter((e=>e.cid()===_.cid()))));const l=n.findIndex((e=>e.length>0));const c=findLastIndex(n,(e=>e.length>0));const d=getRowPosOfUIModel(n[l][0],e[l]);const p=getRowPosOfUIModel(n[c][0],e[c]);return{eventStartDateColumnIndex:d.startColumnIndex,eventStartDateRowIndex:l,eventEndDateColumnIndex:p.endColumnIndex,eventEndDateRowIndex:c,resizeTargetUIModelRows:n}}),[e,r,_]);const B=isPresent(G)&&isPresent(_)&&isPresent($);_$2((()=>{if(B&&c===G.eventStartDateRowIndex){const{eventStartDateRowIndex:n,eventStartDateColumnIndex:r}=G;const d=G.resizeTargetUIModelRows[n][0].clone();let p;if(n===$.rowIndex)p=l[r][Math.max(r,$.columnIndex)];else if(n>$.rowIndex)p=l[r][r];else{p=l[r][e[c].length-1];d.setUIProps({exceedRight:true})}A([d,p])}}),[G,B,l,$,e,c]);_$2((()=>{if(B&&G.eventStartDateRowIndex<c&&c<$.rowIndex){const e=_.clone();e.setUIProps({left:0,exceedLeft:true,exceedRight:true});A([e,"100%"])}}),[G,B,$,_,c]);_$2((()=>{if(B&&G.eventStartDateRowIndex<$.rowIndex&&c===$.rowIndex){const e=_.clone();e.setUIProps({left:0,exceedLeft:true});A([e,l[0][$.columnIndex]])}}),[G,B,l,$,_,c]);_$2((()=>{B&&c>G.eventStartDateRowIndex&&c>$.rowIndex&&A(null)}),[B,$,G,c]);useWhen((()=>{if(B){const{eventStartDateColumnIndex:n,eventStartDateRowIndex:r}=G;const l=!h&&($.rowIndex===r&&$.columnIndex>=n||$.rowIndex>r);if(l){const n=e[$.rowIndex][$.columnIndex];d.fire("beforeUpdateEvent",{event:_.model.toEventObject(),changes:{end:n}})}}H()}),p);return O}function ResizingGuideByRow({dateMatrix:e,cellWidthMap:n,gridPositionFinder:r,renderedUIModels:l,rowIndex:c}){const d=useDayGridMonthEventResize({dateMatrix:e,gridPositionFinder:r,cellWidthMap:n,renderedUIModels:l,rowIndex:c});if(isNil(d))return null;const[p,h]=d;return h$3("div",{className:cls("weekday-events")},h$3(HorizontalEvent,{key:`resizing-event-${p.cid()}`,uiModel:p,eventHeight:Me,headerHeight:Ie+Ne,resizingWidth:h}))}const Eo=100;function useCellContentAreaHeight(e){const n=Ft(monthVisibleEventCountSelector);const{headerHeight:r,footerHeight:l}=on(monthGridCellSelector);const c=s$2(null);const[d,p]=y$1(0);_$2((()=>{if(c.current){const d=getSize(c.current).height;const h=Ie+(null!=r?r:Ne);const _=null!=l?l:0;const w=d-h-_;const $=n*(e+xe);p(Math.min(w,$))}}),[l,r,e,n]);return{ref:c,cellContentAreaHeight:d}}function DayGridMonth({dateMatrix:e=[],rowInfo:n=[],cellWidthMap:r=[]}){const[l,c]=useDOMNode();const d=Ft(Ht);const{ref:p,cellContentAreaHeight:h}=useCellContentAreaHeight(Me);const{eventFilter:_,month:w,isReadOnly:$}=Ft(Wt);const{narrowWeekend:P,startDayOfWeek:O}=w;const A=Eo/e.length;const H=F$2((()=>createGridPositionFinder({container:l,rowsCount:e.length,columnsCount:e[0].length,narrowWeekend:P,startDayOfWeek:O})),[e,l,P,O]);const G=useCalendarData(d,_);const B=F$2((()=>e.map((e=>getRenderedEventUIModels(e,G,P)))),[G,e,P]);const W=useGridSelection({type:"dayGridMonth",gridPositionFinder:H,dateCollection:e,dateGetter:dn.getDateFromCollection,selectionSorter:dn.sortSelection});return h$3("div",{ref:c,onMouseDown:passConditionalProp(!$,W),className:cls("month-daygrid")},e.map(((l,c)=>{const{uiModels:d,gridDateEventModelMap:_}=B[c];return h$3("div",{key:`dayGrid-events-${c}`,className:cls("month-week-item"),style:{height:toPercent(A)},ref:p},h$3("div",{className:cls("weekday")},h$3(bo,{gridDateEventModelMap:_,week:l,rowInfo:n,contentAreaHeight:h}),h$3(ko,{name:"month",events:d,contentAreaHeight:h,eventHeight:Me,className:cls("weekday-events")}),h$3(GridSelectionByRow,{weekDates:l,narrowWeekend:P,rowIndex:c}),h$3(AccumulatedGridSelection,{rowIndex:c,weekDates:l,narrowWeekend:P})),h$3(ResizingGuideByRow,{dateMatrix:e,gridPositionFinder:H,rowIndex:c,cellWidthMap:r,renderedUIModels:B}),h$3(MovingEventShadow,{dateMatrix:e,gridPositionFinder:H,rowIndex:c,rowInfo:n}))})))}function getMonthDayNames(e){const{dayNames:n,startDayOfWeek:r,workweek:l}=e.month;const c=[...Array(7)].map(((e,n)=>(r+n)%7));const d=c.map((e=>({day:e,label:capitalize(n[e])})));return d.filter((e=>!l||!isWeekend(e.day)))}function Month$1(){const e=Ft(Wt);const{renderDate:n}=Ft(Bt);const r=getMonthDayNames(e);const l=e.month;const{narrowWeekend:c,startDayOfWeek:d,workweek:p}=l;const h=F$2((()=>createDateMatrixOfMonth(n,l)),[l,n]);const{rowStyleInfo:_,cellWidthMap:w}=F$2((()=>getRowStyleInfo(r.length,c,d,p)),[r.length,c,d,p]);const $=_.map(((e,n)=>__spreadProps(__spreadValues({},e),{date:h[0][n]})));return h$3(Layout,{className:cls("month")},h$3(GridHeader,{type:"month",dayNames:r,options:l,rowStyleInfo:_}),h$3(DayGridMonth,{dateMatrix:h,rowInfo:$,cellWidthMap:w}))}function useWeekViewState(){const e=Ft(Wt);const n=Ft(Ht);const{dayGridRows:r,lastPanelType:l}=Ft(zt);const{renderDate:c}=Ft(Bt);return F$2((()=>({options:e,calendar:n,gridRowLayout:r,lastPanelType:l,renderDate:c})),[n,r,l,e,c])}function Week$1(){var e,n;const{options:r,calendar:l,gridRowLayout:c,lastPanelType:d,renderDate:p}=useWeekViewState();const h=on(T$1((e=>e.week.dayGridLeft.width),[]));const _=Ft(primaryTimezoneSelector);const[w,$]=useDOMNode();const P=r.week;const{narrowWeekend:O,startDayOfWeek:A,workweek:H,hourStart:G,hourEnd:B,eventView:W,taskView:U}=P;const X=F$2((()=>getWeekDates(p,P)),[p,P]);const K=getDayNames(X,null!=(n=null==(e=r.week)?void 0:e.dayNames)?n:[]);const{rowStyleInfo:J,cellWidthMap:Q}=getRowStyleInfo(X.length,O,A,H);const ee=useCalendarData(l,r.eventFilter);const te=F$2((()=>{const getFilterRange=()=>"Local"===_?[toStartOfDay(first(X)),toEndOfDay(last(X))]:[toStartOfDay(addDate(first(X),-1)),toEndOfDay(addDate(last(X),1))];const[e,n]=getFilterRange();return getWeekViewEvents(X,ee,{narrowWeekend:O,hourStart:G,hourEnd:B,weekStartDate:e,weekEndDate:n})}),[ee,B,G,O,_,X]);const ne=F$2((()=>createTimeGridData(X,{hourStart:G,hourEnd:B,narrowWeekend:O})),[B,G,O,X]);const oe=getActivePanels(U,W);const re=oe.map((e=>{var n,r;if("time"===e)return null;const l=e;return h$3(so,{name:l,key:l,resizable:l!==d},"allday"===l?h$3(AlldayGridRow,{events:te[l],rowStyleInfo:J,gridColWidthMap:Q,weekDates:X,height:null==(n=c[l])?void 0:n.height,options:P}):h$3(OtherGridRow,{category:l,events:te[l],weekDates:X,height:null==(r=c[l])?void 0:r.height,options:P,gridColWidthMap:Q}))}));const ie=F$2((()=>oe.includes("time")),[oe]);useTimeGridScrollSync(w,ne.rows.length);const ae=useTimezoneLabelsTop(w);return h$3(Layout,{className:cls("week-view"),autoAdjustPanels:true},h$3(so,{name:"week-view-day-names",initialHeight:He+2*ze},h$3(GridHeader,{type:"week",dayNames:K,marginLeft:h,options:P,rowStyleInfo:J})),re,ie?h$3(so,{name:"time",autoSize:1,ref:$},h$3(TimeGrid,{events:te.time,timeGridData:ne}),h$3(TimezoneLabels,{top:ae})):null)}const Mo={month:Month$1,week:Week$1,day:Day$1};function Main(){const{currentView:e}=Ft(Bt);const n=F$2((()=>Mo[e]||(()=>null)),[e]);return h$3(n,null)}var xo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,Io=/[&<>"]/;function o(e){var n=String(e);return Io.test(n)?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):n}var a=function(e,n){return String(e).replace(/(\n+)/g,"$1"+(n||"\t"))},i=function(e,n,r){return String(e).length>(n||40)||!r&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},No={};function s(e){var n="";for(var r in e){var l=e[r];null!=l&&""!==l&&(n&&(n+=" "),n+="-"==r[0]?r:No[r]||(No[r]=r.replace(/([A-Z])/g,"-$1").toLowerCase()),n+=": ",n+=l,"number"==typeof l&&false===xo.test(r)&&(n+="px"),n+=";")}return n||void 0}function f(e,n){for(var r in n)e[r]=n[r];return e}function u(e,n){return Array.isArray(n)?n.reduce(u,e):null!=n&&false!==n&&e.push(n),e}var Po={shallow:true},Oo=[],Ro=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,Ao=/[\s\n\\/='"\0<>]/;function v(){this.__d=true}m.render=m;var g=function(e,n){return m(e,n,Po)},Fo=[];function m(e,n,r){n=n||{},r=r||{};var l=_.__s;_.__s=true;var c=x(e,n,r);return _.__c&&_.__c(e,Fo),Fo.length=0,_.__s=l,c}function x(e,n,r,l,c,d){if(null==e||"boolean"==typeof e)return"";if("object"!=typeof e)return o(e);var p=r.pretty,h=p&&"string"==typeof p?p:"\t";if(Array.isArray(e)){for(var w="",$=0;$<e.length;$++)p&&$>0&&(w+="\n"),w+=x(e[$],n,r,l,c,d);return w}var P,O=e.type,A=e.props,H=false;if("function"==typeof O){if(H=true,!r.shallow||!l&&false!==r.renderRootComponent){if(O===p$3){var G=[];return u(G,e.props.children),x(G,n,r,false!==r.shallowHighOrder,c,d)}var B,W=e.__c={__v:e,context:n,props:e.props,setState:v,forceUpdate:v,__d:true,__h:[]};_.__b&&_.__b(e);var U=_.__r;if(O.prototype&&"function"==typeof O.prototype.render){var X=O.contextType,K=X&&n[X.__c],J=null!=X?K?K.props.value:X.__:n;(W=e.__c=new O(A,J)).__v=e,W._dirty=W.__d=true,W.props=A,null==W.state&&(W.state={}),null==W._nextState&&null==W.__s&&(W._nextState=W.__s=W.state),W.context=J,O.getDerivedStateFromProps?W.state=f(f({},W.state),O.getDerivedStateFromProps(W.props,W.state)):W.componentWillMount&&(W.componentWillMount(),W.state=W._nextState!==W.state?W._nextState:W.__s!==W.state?W.__s:W.state),U&&U(e),B=W.render(W.props,W.state,W.context)}else for(var Q=O.contextType,ee=Q&&n[Q.__c],te=null!=Q?ee?ee.props.value:Q.__:n,ne=0;W.__d&&ne++<25;)W.__d=false,U&&U(e),B=O.call(e.__c,A,te);return W.getChildContext&&(n=f(f({},n),W.getChildContext())),_.diffed&&_.diffed(e),x(B,n,r,false!==r.shallowHighOrder,c,d)}O=(P=O).displayName||P!==Function&&P.name||function(e){var n=(Function.prototype.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!n){for(var r=-1,l=Oo.length;l--;)if(Oo[l]===e){r=l;break}r<0&&(r=Oo.push(e)-1),n="UnnamedComponent"+r}return n}(P)}var oe,re,ie="<"+O;if(A){var ae=Object.keys(A);r&&true===r.sortAttributes&&ae.sort();for(var se=0;se<ae.length;se++){var le=ae[se],ce=A[le];if("children"!==le){if(!Ao.test(le)&&(r&&r.allAttributes||"key"!==le&&"ref"!==le&&"__self"!==le&&"__source"!==le)){if("defaultValue"===le)le="value";else if("defaultChecked"===le)le="checked";else if("defaultSelected"===le)le="selected";else if("className"===le){if(void 0!==A.class)continue;le="class"}else c&&/^xlink:?./.test(le)&&(le=le.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===le){if(A.for)continue;le="for"}"style"===le&&ce&&"object"==typeof ce&&(ce=s(ce)),"a"===le[0]&&"r"===le[1]&&"boolean"==typeof ce&&(ce=String(ce));var ue=r.attributeHook&&r.attributeHook(le,ce,n,r,H);if(ue||""===ue)ie+=ue;else if("dangerouslySetInnerHTML"===le)re=ce&&ce.__html;else if("textarea"===O&&"value"===le)oe=ce;else if((ce||0===ce||""===ce)&&"function"!=typeof ce){if(!(true!==ce&&""!==ce||(ce=le,r&&r.xml))){ie=ie+" "+le;continue}if("value"===le){if("select"===O){d=ce;continue}"option"===O&&d==ce&&void 0===A.selected&&(ie+=" selected")}ie=ie+" "+le+'="'+o(ce)+'"'}}}else oe=ce}}if(p){var de=ie.replace(/\n\s*/," ");de===ie||~de.indexOf("\n")?p&&~ie.indexOf("\n")&&(ie+="\n"):ie=de}if(ie+=">",Ao.test(O))throw new Error(O+" is not a valid HTML tag name in "+ie);var pe,fe=Ro.test(O)||r.voidElements&&r.voidElements.test(O),he=[];if(re)p&&i(re)&&(re="\n"+h+a(re,h)),ie+=re;else if(null!=oe&&u(pe=[],oe).length){for(var me=p&&~ie.indexOf("\n"),ge=false,ve=0;ve<pe.length;ve++){var ye=pe[ve];if(null!=ye&&false!==ye){var _e=x(ye,n,r,true,"svg"===O||"foreignObject"!==O&&c,d);if(p&&!me&&i(_e)&&(me=true),_e)if(p){var we=_e.length>0&&"<"!=_e[0];ge&&we?he[he.length-1]+=_e:he.push(_e),ge=we}else he.push(_e)}}if(p&&me)for(var De=he.length;De--;)he[De]="\n"+h+a(he[De],h)}if(he.length||re)ie+=he.join("");else if(r&&r.xml)return ie.substring(0,ie.length-1)+" />";return!fe||pe||re?(p&&~ie.indexOf("\n")&&(ie+="\n"),ie=ie+"</"+O+">"):ie=ie.replace(/>$/," />"),ie}m.shallowRender=g;function forEachOwnProperties$2(e,n,r){var l;r=r||null;for(l in e)if(e.hasOwnProperty(l)&&false===n.call(r,e[l],l,e))break}var Lo=forEachOwnProperties$2;var Ho=Lo;function imagePing$1(e,n){var r=document.createElement("img");var l="";Ho(n,(function(e,n){l+="&"+n+"="+e}));l=l.substring(1);r.src=e+"?"+l;r.style.display="none";document.body.appendChild(r);document.body.removeChild(r);return r}var zo=imagePing$1;var Go=Te;var Bo=zo;var Wo=6048e5;function isExpired(e){var n=(new Date).getTime();return n-e>Wo}function sendHostname(e,n){var r="https://www.google-analytics.com/collect";var l=location.hostname;var c="event";var d="use";var p="TOAST UI "+e+" for "+l+": Statistics";var h=window.localStorage.getItem(p);if((Go(window.tui)||false!==window.tui.usageStatistics)&&(!h||isExpired(h))){window.localStorage.setItem(p,(new Date).getTime());setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||Bo(r,{v:1,t:c,tid:n,cid:l,dp:l,dh:e,el:e,ec:d})}),1e3)}}var Uo=sendHostname;function CalendarContainer({theme:e,store:n,eventBus:r,children:l}){return h$3(qt,{value:r},h$3(tn,{store:e},h$3(At,{store:n},h$3(FloatingLayerProvider,null,l))))}const jo="UA-129951699-1";function extend$1(e,n){var r=Object.prototype.hasOwnProperty;var l,c,d,p;for(d=1,p=arguments.length;d<p;d+=1){l=arguments[d];for(c in l)r.call(l,c)&&(e[c]=l[c])}return e}var Vo=extend$1;function isNull$1(e){return null===e}var Yo=isNull$1;var Zo=Te;var qo=Yo;function isExisty$1(e){return!Zo(e)&&!qo(e)}var Xo=isExisty$1;function isArray$2(e){return e instanceof Array}var Ko=isArray$2;function isFunction$1(e){return e instanceof Function}var Jo=isFunction$1;function forEachArray$1(e,n,r){var l=0;var c=e.length;r=r||null;for(;l<c;l+=1)if(false===n.call(r,e[l],l,e))break}var Qo=forEachArray$1;var er=Ko;var tr=Qo;var nr=Lo;function forEach$1(e,n,r){er(e)?tr(e,n,r):nr(e,n,r)}var or=forEach$1;var rr=Vo;var ir=Xo;var ar=qe;var sr=Ze;var lr=Ko;var cr=Jo;var ur=or;var dr=/\s+/g;function CustomEvents(){this.events=null;this.contexts=null}CustomEvents.mixin=function(e){rr(e.prototype,CustomEvents.prototype)};CustomEvents.prototype._getHandlerItem=function(e,n){var r={handler:e};n&&(r.context=n);return r};CustomEvents.prototype._safeEvent=function(e){var n=this.events;var r;n||(n=this.events={});if(e){r=n[e];if(!r){r=[];n[e]=r}n=r}return n};CustomEvents.prototype._safeContext=function(){var e=this.contexts;e||(e=this.contexts=[]);return e};CustomEvents.prototype._indexOfContext=function(e){var n=this._safeContext();var r=0;while(n[r]){if(e===n[r][0])return r;r+=1}return-1};CustomEvents.prototype._memorizeContext=function(e){var n,r;if(ir(e)){n=this._safeContext();r=this._indexOfContext(e);r>-1?n[r][1]+=1:n.push([e,1])}};CustomEvents.prototype._forgetContext=function(e){var n,r;if(ir(e)){n=this._safeContext();r=this._indexOfContext(e);if(r>-1){n[r][1]-=1;n[r][1]<=0&&n.splice(r,1)}}};CustomEvents.prototype._bindEvent=function(e,n,r){var l=this._safeEvent(e);this._memorizeContext(r);l.push(this._getHandlerItem(n,r))};CustomEvents.prototype.on=function(e,n,r){var l=this;if(ar(e)){e=e.split(dr);ur(e,(function(e){l._bindEvent(e,n,r)}))}else if(sr(e)){r=n;ur(e,(function(e,n){l.on(n,e,r)}))}};CustomEvents.prototype.once=function(e,n,r){var l=this;if(sr(e)){r=n;ur(e,(function(e,n){l.once(n,e,r)}))}else this.on(e,onceHandler,r);function onceHandler(){n.apply(r,arguments);l.off(e,onceHandler,r)}};CustomEvents.prototype._spliceMatches=function(e,n){var r=0;var l;if(lr(e))for(l=e.length;r<l;r+=1)if(true===n(e[r])){e.splice(r,1);l-=1;r-=1}};CustomEvents.prototype._matchHandler=function(e){var n=this;return function(r){var l=e===r.handler;l&&n._forgetContext(r.context);return l}};CustomEvents.prototype._matchContext=function(e){var n=this;return function(r){var l=e===r.context;l&&n._forgetContext(r.context);return l}};CustomEvents.prototype._matchHandlerAndContext=function(e,n){var r=this;return function(l){var c=e===l.handler;var d=n===l.context;var p=c&&d;p&&r._forgetContext(l.context);return p}};CustomEvents.prototype._offByEventName=function(e,n){var r=this;var l=cr(n);var c=r._matchHandler(n);e=e.split(dr);ur(e,(function(e){var n=r._safeEvent(e);if(l)r._spliceMatches(n,c);else{ur(n,(function(e){r._forgetContext(e.context)}));r.events[e]=[]}}))};CustomEvents.prototype._offByHandler=function(e){var n=this;var r=this._matchHandler(e);ur(this._safeEvent(),(function(e){n._spliceMatches(e,r)}))};CustomEvents.prototype._offByObject=function(e,n){var r=this;var l;if(this._indexOfContext(e)<0)ur(e,(function(e,n){r.off(n,e)}));else if(ar(n)){l=this._matchContext(e);r._spliceMatches(this._safeEvent(n),l)}else if(cr(n)){l=this._matchHandlerAndContext(n,e);ur(this._safeEvent(),(function(e){r._spliceMatches(e,l)}))}else{l=this._matchContext(e);ur(this._safeEvent(),(function(e){r._spliceMatches(e,l)}))}};CustomEvents.prototype.off=function(e,n){if(ar(e))this._offByEventName(e,n);else if(arguments.length)cr(e)?this._offByHandler(e):sr(e)&&this._offByObject(e,n);else{this.events={};this.contexts=[]}};CustomEvents.prototype.fire=function(e){this.invoke.apply(this,arguments)};CustomEvents.prototype.invoke=function(e){var n,r,l,c;if(!this.hasListener(e))return true;n=this._safeEvent(e);r=Array.prototype.slice.call(arguments,1);l=0;while(n[l]){c=n[l];if(false===c.handler.apply(c.context,r))return false;l+=1}return true};CustomEvents.prototype.hasListener=function(e){return this.getListenerLength(e)>0};CustomEvents.prototype.getListenerLength=function(e){var n=this._safeEvent(e);return n.length};var pr=CustomEvents;class EventBusImpl extends pr{on(e,n){super.on(e,n);return this}off(e,n){super.off(e,n);return this}fire(e,...n){super.fire(e,...n);return this}once(e,n){super.once(e,n);return this}}class CalendarCore{constructor(e,n={}){var r;this.container=qe(e)?null!=(r=null==document?void 0:document.querySelector(e))?r:null:e;this.theme=initThemeStore(n.theme);this.eventBus=new EventBusImpl;this.store=initCalendarStore(n);this.renderRange=this.calculateRenderRange(toStartOfDay());addAttributeHooks();true===this.getStoreState().options.usageStatistics&&Uo("calendar",jo)}getStoreState(e){const n=this.store.getState();return e?n[e]:n}getStoreDispatchers(e){const n=this.store.getState().dispatch;return e?n[e]:n}destroy(){this.container&&un(this.container);this.store.clearListeners();this.theme.clearListeners();this.eventBus.off();removeAttributeHooks();for(const e in this)this.hasOwnProperty(e)&&delete this[e]}calculateMonthRenderDate({renderDate:e,offset:n,monthOptions:r}){let l=new TZDate(e);const{visibleWeeksCount:c}=r;l=c>0?addDate(l,7*n*c):addMonths(l,n);const d=createDateMatrixOfMonth(l,r);const[[p]]=d;const h=last(last(d));return{renderDate:l,renderRange:{start:p,end:h}}}calculateWeekRenderDate({renderDate:e,offset:n,weekOptions:r}){const l=new TZDate(e);l.addDate(7*n);const c=getWeekDates(l,r);const[d]=c;const p=last(c);return{renderDate:l,renderRange:{start:d,end:p}}}calculateDayRenderDate({renderDate:e,offset:n}){const r=new TZDate(e);r.addDate(n);const l=toStartOfDay(r);const c=toEndOfDay(r);return{renderDate:r,renderRange:{start:l,end:c}}}move(e){if(isNil(e))return;const{currentView:n,renderDate:r}=this.getStoreState().view;const{options:l}=this.getStoreState();const{setRenderDate:c}=this.getStoreDispatchers().view;const d=new TZDate(r);let p={renderDate:d,renderRange:{start:new TZDate(d),end:new TZDate(d)}};"month"===n?p=this.calculateMonthRenderDate({renderDate:r,offset:e,monthOptions:l.month}):"week"===n?p=this.calculateWeekRenderDate({renderDate:r,offset:e,weekOptions:l.week}):"day"===n&&(p=this.calculateDayRenderDate({renderDate:r,offset:e}));c(p.renderDate);this.renderRange=p.renderRange}createEvents(e){const{createEvents:n}=this.getStoreDispatchers("calendar");n(e)}getEventModel(e,n){const{events:r}=this.getStoreState("calendar");return r.find((({id:r,calendarId:l})=>r===e&&l===n))}getEvent(e,n){var r,l;return null!=(l=null==(r=this.getEventModel(e,n))?void 0:r.toEventObject())?l:null}updateEvent(e,n,r){const{updateEvent:l}=this.getStoreDispatchers("calendar");const c=this.getEventModel(e,n);c&&l({event:c,eventData:r})}deleteEvent(e,n){const{deleteEvent:r}=this.getStoreDispatchers("calendar");const l=this.getEventModel(e,n);l&&r(l)}setCalendarVisibility(e,n){const{setCalendarVisibility:r}=this.getStoreDispatchers("calendar");const l=Array.isArray(e)?e:[e];r(l,n)}render(){isPresent(this.container)&&P$2(h$3(CalendarContainer,{theme:this.theme,store:this.store,eventBus:this.eventBus},this.getComponent()),this.container);return this}renderToString(){return m(h$3(CalendarContainer,{theme:this.theme,store:this.store,eventBus:this.eventBus},this.getComponent()))}clear(){const{clearEvents:e}=this.getStoreDispatchers("calendar");e()}scrollToNow(e="auto"){this.eventBus.fire("scrollToNow",e)}calculateRenderRange(e){const{currentView:n}=this.getStoreState().view;const{options:r}=this.getStoreState();const l=new TZDate(e);let c={start:new TZDate(l),end:new TZDate(l)};"month"===n?c=this.calculateMonthRenderDate({renderDate:e,offset:0,monthOptions:r.month}).renderRange:"week"===n?c=this.calculateWeekRenderDate({renderDate:e,offset:0,weekOptions:r.week}).renderRange:"day"===n&&(c=this.calculateDayRenderDate({renderDate:e,offset:0}).renderRange);return c}today(){const{setRenderDate:e}=this.getStoreDispatchers().view;const n=new TZDate;e(n);this.renderRange=this.calculateRenderRange(n)}setDate(e){const{setRenderDate:n}=this.getStoreDispatchers("view");const r=new TZDate(e);n(r);this.renderRange=this.calculateRenderRange(r)}next(){this.move(1)}prev(){this.move(-1)}setCalendarColor(e,n){const{setCalendarColor:r}=this.getStoreDispatchers().calendar;r(e,n)}changeView(e){const{changeView:n}=this.getStoreDispatchers("view");n(e);this.renderRange=this.calculateRenderRange(this.getDate())}getElement(e,n){const r=this.getEvent(e,n);return r&&this.container?this.container.querySelector(`[data-event-id="${e}"][data-calendar-id="${n}"]`):null}setTheme(e){const{setTheme:n}=this.theme.getState().dispatch;n(e)}getOptions(){const{options:e,template:n}=this.getStoreState();const r=this.theme.getState(),{dispatch:l}=r,c=__objRest(r,["dispatch"]);return __spreadProps(__spreadValues({},e),{template:n,theme:c})}setOptions(e){const n=e,{theme:r,template:l}=n,c=__objRest(n,["theme","template"]);const{setTheme:d}=this.theme.getState().dispatch;const{options:{setOptions:p},template:{setTemplate:h}}=this.getStoreDispatchers();isPresent(r)&&d(r);isPresent(l)&&h(l);p(c)}getDate(){const{renderDate:e}=this.getStoreState().view;return e}getDateRangeStart(){return this.renderRange.start}getDateRangeEnd(){return this.renderRange.end}getViewName(){const{currentView:e}=this.getStoreState("view");return e}setCalendars(e){const{setCalendars:n}=this.getStoreDispatchers().calendar;n(e)}openFormPopup(e){const{showFormPopup:n}=this.getStoreDispatchers().popup;const r=new EventModel(e);const{title:l,location:c,start:d,end:p,isAllday:h,isPrivate:_,state:w}=r;n({isCreationPopup:true,event:r,title:l,location:c,start:d,end:p,isAllday:h,isPrivate:_,eventState:w})}clearGridSelections(){const{clearAll:e}=this.getStoreDispatchers().gridSelection;e()}fire(e,...n){this.eventBus.fire(e,...n);return this}off(e,n){this.eventBus.off(e,n);return this}on(e,n){this.eventBus.on(e,n);return this}once(e,n){this.eventBus.once(e,n);return this}}function isValidViewType(e){return!!Object.values(So).find((n=>n===e))}class Calendar extends CalendarCore{constructor(e,n={}){super(e,n);const{defaultView:r="week"}=n;if(!isValidViewType(r))throw new InvalidViewTypeError(r);this.render()}getComponent(){return h$3(Main,null)}}class Day extends CalendarCore{constructor(e,n={}){super(e,n);this.render()}getComponent(){return h$3(Day$1,null)}}class Month extends CalendarCore{constructor(e,n={}){super(e,n);this.render()}getComponent(){return h$3(Month$1,null)}hideMoreView(){const{hideSeeMorePopup:e}=this.getStoreDispatchers().popup;e()}}class Week extends CalendarCore{constructor(e,n={}){super(e,n);this.render()}getComponent(){return h$3(Week$1,null)}}export{Day,Month,TZDate,Week,Calendar as default};

