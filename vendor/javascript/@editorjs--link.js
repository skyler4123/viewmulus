(function(){try{if(typeof document<"u"){var f=document.createElement("style");f.appendChild(document.createTextNode(".link-tool{position:relative}.link-tool__input{padding-left:38px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.link-tool__input-holder{position:relative}.link-tool__input-holder--error .link-tool__input{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E\");background-color:#fff3f6;border-color:#f3e0e0;color:#a95a5a;box-shadow:inset 0 1px 3px #923e3e0d}.link-tool__input[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.link-tool__input[contentEditable=true][data-placeholder]:empty:before{opacity:1}.link-tool__input[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.link-tool__progress{position:absolute;box-shadow:inset 0 1px 3px #66556b0a;height:100%;width:0;background-color:#f4f5f7;z-index:-1}.link-tool__progress--loading{-webkit-animation:progress .5s ease-in;-webkit-animation-fill-mode:forwards}.link-tool__progress--loaded{width:100%}.link-tool__content{display:block;padding:25px;border-radius:2px;box-shadow:0 0 0 2px #fff;color:initial!important;text-decoration:none!important}.link-tool__content:after{content:\"\";clear:both;display:table}.link-tool__content--rendered{background:#fff;border:1px solid rgba(201,201,204,.48);box-shadow:0 1px 3px #0000001a;border-radius:6px;will-change:filter;animation:link-in .45s 1 cubic-bezier(.215,.61,.355,1)}.link-tool__content--rendered:hover{box-shadow:0 0 3px #00000029}.link-tool__image{background-position:center center;background-repeat:no-repeat;background-size:cover;margin:0 0 0 30px;width:65px;height:65px;border-radius:3px;float:right}.link-tool__title{font-size:17px;font-weight:600;line-height:1.5em;margin:0 0 10px}.link-tool__title+.link-tool__anchor{margin-top:25px}.link-tool__description{margin:0 0 20px;font-size:15px;line-height:1.55em;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.link-tool__anchor{display:block;font-size:15px;line-height:1em;color:#888!important;border:0!important;padding:0!important}@keyframes link-in{0%{filter:blur(5px)}to{filter:none}}.codex-editor--narrow .link-tool__image{display:none}@-webkit-keyframes progress{0%{width:0}to{width:85%}}")),document.head.appendChild(f)}}catch(f){console.error("vite-plugin-css-injected-by-js",f)}})();var f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}(function(f){var w=function(){try{return!!Symbol.iterator}catch{return!1}},k=w(),v=function(f){var _={next:function(){var k=f.shift();return{done:k===void 0,value:k}}};return k&&(_[Symbol.iterator]=function(){return _}),_},c=function(f){return encodeURIComponent(f).replace(/%20/g,"+")},i=function(f){return decodeURIComponent(String(f).replace(/\+/g," "))},a=function(){var n=function(f){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var k=typeof f;if(k!=="undefined")if(k==="string")f!==""&&this._fromString(f);else if(f instanceof n){var _=this;f.forEach((function(f,k){_.append(k,f)}))}else{if(f===null||k!=="object")throw new TypeError("Unsupported input's type for URLSearchParams");if(Object.prototype.toString.call(f)==="[object Array]")for(var E=0;E<f.length;E++){var S=f[E];if(Object.prototype.toString.call(S)!=="[object Array]"&&S.length===2)throw new TypeError("Expected [string, any] as entry at index "+E+" of URLSearchParams's input");this.append(S[0],S[1])}else for(var C in f)f.hasOwnProperty(C)&&this.append(C,f[C])}},_=n.prototype;_.append=function(f,k){f in this._entries?this._entries[f].push(String(k)):this._entries[f]=[String(k)]},_.delete=function(f){delete this._entries[f]},_.get=function(f){return f in this._entries?this._entries[f][0]:null},_.getAll=function(f){return f in this._entries?this._entries[f].slice(0):[]},_.has=function(f){return f in this._entries},_.set=function(f,k){this._entries[f]=[String(k)]},_.forEach=function(f,k){var _;for(var E in this._entries)if(this._entries.hasOwnProperty(E)){_=this._entries[E];for(var S=0;S<_.length;S++)f.call(k,_[S],E,this)}},_.keys=function(){var f=[];return this.forEach((function(k,_){f.push(_)})),v(f)},_.values=function(){var f=[];return this.forEach((function(k){f.push(k)})),v(f)},_.entries=function(){var f=[];return this.forEach((function(k,_){f.push([_,k])})),v(f)},k&&(_[Symbol.iterator]=_.entries),_.toString=function(){var f=[];return this.forEach((function(k,_){f.push(c(_)+"="+c(k))})),f.join("&")},f.URLSearchParams=n},p=function(){try{var k=f.URLSearchParams;return new k("?a=1").toString()==="a=1"&&typeof k.prototype.set=="function"}catch{return!1}};p()||a();var _=f.URLSearchParams.prototype;typeof _.sort!="function"&&(_.sort=function(){var f=this,k=[];this.forEach((function(_,E){k.push([E,_]),f._entries||f.delete(E)})),k.sort((function(f,k){return f[0]<k[0]?-1:f[0]>k[0]?1:0})),f._entries&&(f._entries={});for(var _=0;_<k.length;_++)this.append(k[_][0],k[_][1])}),typeof _._fromString!="function"&&Object.defineProperty(_,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(f){if(this._entries)this._entries={};else{var k=[];this.forEach((function(f,_){k.push(_)}));for(var _=0;_<k.length;_++)this.delete(k[_])}f=f.replace(/^\?/,"");var E,S=f.split("&");for(_=0;_<S.length;_++)E=S[_].split("="),this.append(i(E[0]),E.length>1?i(E[1]):"")}})})(typeof f<"u"?f:typeof window<"u"?window:typeof self<"u"?self:f);(function(f){var w=function(){try{var k=new f.URL("b","http://a");return k.pathname="c d",k.href==="http://a/c%20d"&&k.searchParams}catch{return!1}},d=function(){var k=f.URL,i=function(k,_){typeof k!="string"&&(k=String(k));var E,S=document;if(_&&(f.location===void 0||_!==f.location.href)){S=document.implementation.createHTMLDocument(""),E=S.createElement("base"),E.href=_,S.head.appendChild(E);try{if(E.href.indexOf(_)!==0)throw new Error(E.href)}catch(f){throw new Error("URL unable to set base "+_+" due to "+f)}}var C=S.createElement("a");C.href=k,E&&(S.body.appendChild(C),C.href=C.href);var T=S.createElement("input");if(T.type="url",T.value=k,C.protocol===":"||!/:/.test(C.href)||!T.checkValidity()&&!_)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:C});var x=new f.URLSearchParams(this.search),L=!0,j=!0,P=this;["append","delete","set"].forEach((function(f){var k=x[f];x[f]=function(){k.apply(x,arguments),L&&(j=!1,P.search=x.toString(),j=!0)}})),Object.defineProperty(this,"searchParams",{value:x,enumerable:!0});var R=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==R&&(R=this.search,j&&(L=!1,this.searchParams._fromString(this.search),L=!0))}})},_=i.prototype,p=function(f){Object.defineProperty(_,f,{get:function(){return this._anchorElement[f]},set:function(k){this._anchorElement[f]=k},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach((function(f){p(f)})),Object.defineProperty(_,"search",{get:function(){return this._anchorElement.search},set:function(f){this._anchorElement.search=f,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(_,{toString:{get:function(){var f=this;return function(){return f.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(f){this._anchorElement.href=f,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(f){this._anchorElement.pathname=f},enumerable:!0},origin:{get:function(){var f={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],k=this._anchorElement.port!=f&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(k?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(f){},enumerable:!0},username:{get:function(){return""},set:function(f){},enumerable:!0}}),i.createObjectURL=function(f){return k.createObjectURL.apply(k,arguments)},i.revokeObjectURL=function(f){return k.revokeObjectURL.apply(k,arguments)},f.URL=i};if(w()||d(),f.location!==void 0&&!("origin"in f.location)){var v=function(){return f.location.protocol+"//"+f.location.hostname+(f.location.port?":"+f.location.port:"")};try{Object.defineProperty(f.location,"origin",{get:v,enumerable:!0})}catch{setInterval((function(){f.location.origin=v()}),100)}}})(typeof f<"u"?f:typeof window<"u"?window:typeof self<"u"?self:f);var k={exports:{}};(function(f,k){(function(k,_){f.exports=_()})(window,(function(){return function(f){var k={};function c(_){if(k[_])return k[_].exports;var E=k[_]={i:_,l:!1,exports:{}};return f[_].call(E.exports,E,E.exports,c),E.l=!0,E.exports}return c.m=f,c.c=k,c.d=function(f,k,_){c.o(f,k)||Object.defineProperty(f,k,{enumerable:!0,get:_})},c.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},c.t=function(f,k){if(1&k&&(f=c(f)),8&k||4&k&&typeof f=="object"&&f&&f.__esModule)return f;var _=Object.create(null);if(c.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:f}),2&k&&typeof f!="string")for(var E in f)c.d(_,E,function(k){return f[k]}.bind(null,E));return _},c.n=function(f){var k=f&&f.__esModule?function(){return f.default}:function(){return f};return c.d(k,"a",k),k},c.o=function(f,k){return Object.prototype.hasOwnProperty.call(f,k)},c.p="",c(c.s=3)}([function(f,k){var _;_=function(){return this}();try{_=_||new Function("return this")()}catch{typeof window=="object"&&(_=window)}f.exports=_},function(f,k,_){(function(f){var E=_(2),S=setTimeout;function l(){}function n(f){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(f,this)}function o(f,k){for(;f._state===3;)f=f._value;f._state!==0?(f._handled=!0,n._immediateFn((function(){var _=f._state===1?k.onFulfilled:k.onRejected;if(_!==null){var E;try{E=_(f._value)}catch(f){return void s(k.promise,f)}e(k.promise,E)}else(f._state===1?e:s)(k.promise,f._value)}))):f._deferreds.push(k)}function e(f,k){try{if(k===f)throw new TypeError("A promise cannot be resolved with itself.");if(k&&(typeof k=="object"||typeof k=="function")){var _=k.then;if(k instanceof n)return f._state=3,f._value=k,void h(f);if(typeof _=="function")return void y((E=_,S=k,function(){E.apply(S,arguments)}),f)}f._state=1,f._value=k,h(f)}catch(k){s(f,k)}var E,S}function s(f,k){f._state=2,f._value=k,h(f)}function h(f){f._state===2&&f._deferreds.length===0&&n._immediateFn((function(){f._handled||n._unhandledRejectionFn(f._value)}));for(var k=0,_=f._deferreds.length;k<_;k++)o(f,f._deferreds[k]);f._deferreds=null}function t(f,k,_){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof k=="function"?k:null,this.promise=_}function y(f,k){var _=!1;try{f((function(f){_||(_=!0,e(k,f))}),(function(f){_||(_=!0,s(k,f))}))}catch(f){if(_)return;_=!0,s(k,f)}}n.prototype.catch=function(f){return this.then(null,f)},n.prototype.then=function(f,k){var _=new this.constructor(l);return o(this,new t(f,k,_)),_},n.prototype.finally=E.a,n.all=function(f){return new n((function(k,_){if(!f||f.length===void 0)throw new TypeError("Promise.all accepts an array");var E=Array.prototype.slice.call(f);if(E.length===0)return k([]);var S=E.length;function g(f,C){try{if(C&&(typeof C=="object"||typeof C=="function")){var T=C.then;if(typeof T=="function")return void T.call(C,(function(k){g(f,k)}),_)}E[f]=C,--S==0&&k(E)}catch(f){_(f)}}for(var C=0;C<E.length;C++)g(C,E[C])}))},n.resolve=function(f){return f&&typeof f=="object"&&f.constructor===n?f:new n((function(k){k(f)}))},n.reject=function(f){return new n((function(k,_){_(f)}))},n.race=function(f){return new n((function(k,_){for(var E=0,S=f.length;E<S;E++)f[E].then(k,_)}))},n._immediateFn=typeof f=="function"&&function(k){f(k)}||function(f){S(f,0)},n._unhandledRejectionFn=function(f){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",f)},k.a=n}).call(this,_(5).setImmediate)},function(f,k,_){k.a=function(f){var k=this.constructor;return this.then((function(_){return k.resolve(f()).then((function(){return _}))}),(function(_){return k.resolve(f()).then((function(){return k.reject(_)}))}))}},function(f,k,_){function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(f)}_(4);var E,S,C,T,x,L,j=_(8),P=(S=function(f){return new Promise((function(k,_){f=T(f),f=x(f);var E=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");E.open(f.method,f.url),E.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(f.headers).forEach((function(k){var _=f.headers[k];E.setRequestHeader(k,_)}));var S=f.ratio;E.upload.addEventListener("progress",(function(k){var _=Math.round(k.loaded/k.total*100),E=Math.ceil(_*S/100);f.progress(E)}),!1),E.addEventListener("progress",(function(k){var _=Math.round(k.loaded/k.total*100),E=Math.ceil(_*(100-S)/100)+S;f.progress(E)}),!1),E.onreadystatechange=function(){if(E.readyState===4){var f=E.response;try{f=JSON.parse(f)}catch{}var S=j.parseHeaders(E.getAllResponseHeaders()),C={body:f,code:E.status,headers:S};E.status===200?k(C):_(C)}},E.send(f.data)}))},C=function(f){return f.method="POST",S(f)},T=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(f.url&&typeof f.url!="string")throw new Error("Url must be a string");if(f.url=f.url||"",f.method&&typeof f.method!="string")throw new Error("`method` must be a string or null");if(f.method=f.method?f.method.toUpperCase():"GET",f.headers&&i(f.headers)!=="object")throw new Error("`headers` must be an object or null");if(f.headers=f.headers||{},f.type&&(typeof f.type!="string"||!Object.values(E).includes(f.type)))throw new Error("`type` must be taken from module's «contentType» library");if(f.progress&&typeof f.progress!="function")throw new Error("`progress` must be a function or null");if(f.progress=f.progress||function(f){},f.beforeSend=f.beforeSend||function(f){},f.ratio&&typeof f.ratio!="number")throw new Error("`ratio` must be a number");if(f.ratio<0||f.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(f.ratio=f.ratio||90,f.accept&&typeof f.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(f.accept=f.accept||"*/*",f.multiple&&typeof f.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(f.multiple=f.multiple||!1,f.fieldName&&typeof f.fieldName!="string")throw new Error("`fieldName` must be a string");return f.fieldName=f.fieldName||"files",f},x=function(f){switch(f.method){case"GET":var k=L(f.data,E.URLENCODED);delete f.data,f.url=/\?/.test(f.url)?f.url+"&"+k:f.url+"?"+k;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var _=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||E.JSON}(f);(j.isFormData(f.data)||j.isFormElement(f.data))&&(_=E.FORM),f.data=L(f.data,_),_!==P.contentType.FORM&&(f.headers["content-type"]=_)}return f},L=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case E.URLENCODED:return j.urlEncode(f);case E.JSON:return j.jsonEncode(f);case E.FORM:return j.formEncode(f);default:return f}},{contentType:E={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:S,get:function(f){return f.method="GET",S(f)},post:C,transport:function(f){return f=T(f),j.selectFiles(f).then((function(k){for(var _=new FormData,E=0;E<k.length;E++)_.append(f.fieldName,k[E],k[E].name);return j.isObject(f.data)&&Object.keys(f.data).forEach((function(k){var E=f.data[k];_.append(k,E)})),f.beforeSend&&f.beforeSend(k),f.data=_,C(f)}))},selectFiles:function(f){return delete(f=T(f)).beforeSend,j.selectFiles(f)}});f.exports=P},function(f,k,_){_.r(k);var E=_(1);window.Promise=window.Promise||E.a},function(f,k,_){(function(f){var E=f!==void 0&&f||typeof self<"u"&&self||window,S=Function.prototype.apply;function l(f,k){this._id=f,this._clearFn=k}k.setTimeout=function(){return new l(S.call(setTimeout,E,arguments),clearTimeout)},k.setInterval=function(){return new l(S.call(setInterval,E,arguments),clearInterval)},k.clearTimeout=k.clearInterval=function(f){f&&f.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(E,this._id)},k.enroll=function(f,k){clearTimeout(f._idleTimeoutId),f._idleTimeout=k},k.unenroll=function(f){clearTimeout(f._idleTimeoutId),f._idleTimeout=-1},k._unrefActive=k.active=function(f){clearTimeout(f._idleTimeoutId);var k=f._idleTimeout;k>=0&&(f._idleTimeoutId=setTimeout((function(){f._onTimeout&&f._onTimeout()}),k))},_(6),k.setImmediate=typeof self<"u"&&self.setImmediate||f!==void 0&&f.setImmediate||this&&this.setImmediate,k.clearImmediate=typeof self<"u"&&self.clearImmediate||f!==void 0&&f.clearImmediate||this&&this.clearImmediate}).call(this,_(0))},function(f,k,_){(function(f,k){(function(f,_){if(!f.setImmediate){var E,S,C,T,x,L=1,j={},P=!1,R=f.document,F=Object.getPrototypeOf&&Object.getPrototypeOf(f);F=F&&F.setTimeout?F:f,{}.toString.call(f.process)==="[object process]"?E=function(f){k.nextTick((function(){b(f)}))}:function(){if(f.postMessage&&!f.importScripts){var k=!0,_=f.onmessage;return f.onmessage=function(){k=!1},f.postMessage("","*"),f.onmessage=_,k}}()?(T="setImmediate$"+Math.random()+"$",x=function(k){k.source===f&&typeof k.data=="string"&&k.data.indexOf(T)===0&&b(+k.data.slice(T.length))},f.addEventListener?f.addEventListener("message",x,!1):f.attachEvent("onmessage",x),E=function(k){f.postMessage(T+k,"*")}):f.MessageChannel?((C=new MessageChannel).port1.onmessage=function(f){b(f.data)},E=function(f){C.port2.postMessage(f)}):R&&"onreadystatechange"in R.createElement("script")?(S=R.documentElement,E=function(f){var k=R.createElement("script");k.onreadystatechange=function(){b(f),k.onreadystatechange=null,S.removeChild(k),k=null},S.appendChild(k)}):E=function(f){setTimeout(b,0,f)},F.setImmediate=function(f){typeof f!="function"&&(f=new Function(""+f));for(var k=new Array(arguments.length-1),_=0;_<k.length;_++)k[_]=arguments[_+1];var S={callback:f,args:k};return j[L]=S,E(L),L++},F.clearImmediate=m}function m(f){delete j[f]}function b(f){if(P)setTimeout(b,0,f);else{var k=j[f];if(k){P=!0;try{(function(f){var k=f.callback,E=f.args;switch(E.length){case 0:k();break;case 1:k(E[0]);break;case 2:k(E[0],E[1]);break;case 3:k(E[0],E[1],E[2]);break;default:k.apply(_,E)}})(k)}finally{m(f),P=!1}}}}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,_(0),_(7))},function(f,k){var _,E,S=f.exports={};function p(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function n(f){if(_===setTimeout)return setTimeout(f,0);if((_===p||!_)&&setTimeout)return _=setTimeout,setTimeout(f,0);try{return _(f,0)}catch{try{return _.call(null,f,0)}catch{return _.call(this,f,0)}}}(function(){try{_=typeof setTimeout=="function"?setTimeout:p}catch{_=p}try{E=typeof clearTimeout=="function"?clearTimeout:l}catch{E=l}})();var C,T=[],x=!1,L=-1;function t(){x&&C&&(x=!1,C.length?T=C.concat(T):L=-1,T.length&&y())}function y(){if(!x){var f=n(t);x=!0;for(var k=T.length;k;){for(C=T,T=[];++L<k;)C&&C[L].run();L=-1,k=T.length}C=null,x=!1,function(f){if(E===clearTimeout)return clearTimeout(f);if((E===l||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(f);try{E(f)}catch{try{return E.call(null,f)}catch{return E.call(this,f)}}}(f)}}function r(f,k){this.fun=f,this.array=k}function u(){}S.nextTick=function(f){var k=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)k[_-1]=arguments[_];T.push(new r(f,k)),T.length!==1||x||n(y)},r.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=u,S.addListener=u,S.once=u,S.off=u,S.removeListener=u,S.removeAllListeners=u,S.emit=u,S.prependListener=u,S.prependOnceListener=u,S.listeners=function(f){return[]},S.binding=function(f){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(f){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},function(f,k,_){function i(f,k){for(var _=0;_<k.length;_++){var E=k[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(f,E.key,E)}}var E=_(9);f.exports=function(){function p(){(function(f,k){if(!(f instanceof k))throw new TypeError("Cannot call a class as a function")})(this,p)}var f,k,_;return f=p,_=[{key:"urlEncode",value:function(f){return E(f)}},{key:"jsonEncode",value:function(f){return JSON.stringify(f)}},{key:"formEncode",value:function(f){if(this.isFormData(f))return f;if(this.isFormElement(f))return new FormData(f);if(this.isObject(f)){var k=new FormData;return Object.keys(f).forEach((function(_){var E=f[_];k.append(_,E)})),k}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(f){return Object.prototype.toString.call(f)==="[object Object]"}},{key:"isFormData",value:function(f){return f instanceof FormData}},{key:"isFormElement",value:function(f){return f instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise((function(k,_){var E=document.createElement("INPUT");E.type="file",f.multiple&&E.setAttribute("multiple","multiple"),f.accept&&E.setAttribute("accept",f.accept),E.style.display="none",document.body.appendChild(E),E.addEventListener("change",(function(f){var _=f.target.files;k(_),document.body.removeChild(E)}),!1),E.click()}))}},{key:"parseHeaders",value:function(f){var k=f.trim().split(/[\r\n]+/),_={};return k.forEach((function(f){var k=f.split(": "),E=k.shift(),S=k.join(": ");E&&(_[E]=S)})),_}}],(k=null)&&i(f.prototype,k),_&&i(f,_),p}()},function(f,k){var c=function(f){return encodeURIComponent(f).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},i=function(f,k,_,E){return k=k||null,_=_||"&",E=E||null,f?function(f){for(var k=new Array,_=0;_<f.length;_++)f[_]&&k.push(f[_]);return k}(Object.keys(f).map((function(S){var C,T,x=S;if(E&&(x=E+"["+x+"]"),typeof f[S]=="object"&&f[S]!==null)C=i(f[S],null,_,x);else{k&&(T=x,x=!isNaN(parseFloat(T))&&isFinite(T)?k+Number(x):x);var L=f[S];L=(L=(L=(L=L===!0?"1":L)===!1?"0":L)===0?"0":L)||"",C=c(x)+"="+c(L)}return C}))).join(_).replace(/[!'()*]/g,""):""};f.exports=i}])}))})(k);var _=k.exports;const E=O(_),S='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.569 6.39509 13.9269 6.25143 12.8271 7.17675L11.39 8.38588C10.0935 9.47674 9.95704 11.4241 11.0887 12.6852L11.12 12.72"/></svg>';class I{
/**
   * Notify core that read-only mode supported
   *
   * @returns {boolean}
   */
static get isReadOnlySupported(){return!0}
/**
   * Get Tool toolbox settings
   * icon - Tool icon's SVG
   * title - title to show in toolbox
   *
   * @returns {{icon: string, title: string}}
   */static get toolbox(){return{icon:S,title:"Link"}}
/**
   * Allow to press Enter inside the LinkTool input
   *
   * @returns {boolean}
   * @public
   */static get enableLineBreaks(){return!0}
/**
   * @param {object} options - Tool constructor options fot from Editor.js
   * @param {LinkToolData} options.data - previously saved data
   * @param {LinkToolConfig} options.config - user config for Tool
   * @param {object} options.api - Editor.js API
   * @param {boolean} options.readOnly - read-only mode flag
   */constructor({data:f,config:k,api:_,readOnly:E}){this.api=_,this.readOnly=E,this.config={endpoint:k.endpoint||"",headers:k.headers||{}},this.nodes={wrapper:null,container:null,progress:null,input:null,inputHolder:null,linkContent:null,linkImage:null,linkTitle:null,linkDescription:null,linkText:null},this._data={link:"",meta:{}},this.data=f
/**
   * Renders Block content
   *
   * @public
   *
   * @returns {HTMLDivElement}
   */}render(){return this.nodes.wrapper=this.make("div",this.CSS.baseClass),this.nodes.container=this.make("div",this.CSS.container),this.nodes.inputHolder=this.makeInputHolder(),this.nodes.linkContent=this.prepareLinkPreview(),Object.keys(this.data.meta).length?(this.nodes.container.appendChild(this.nodes.linkContent),this.showLinkPreview(this.data.meta)):this.nodes.container.appendChild(this.nodes.inputHolder),this.nodes.wrapper.appendChild(this.nodes.container),this.nodes.wrapper
/**
   * Return Block data
   *
   * @public
   *
   * @returns {LinkToolData}
   */}save(){return this.data}
/**
   * Validate Block data
   * - check if given link is an empty string or not.
   *
   * @public
   *
   * @returns {boolean} false if saved data is incorrect, otherwise true
   */validate(){return this.data.link.trim()!==""}
/**
   * Stores all Tool's data
   *
   * @param {LinkToolData} data - data to store
   */set data(f){this._data=Object.assign({},{link:f.link||this._data.link,meta:f.meta||this._data.meta})}
/**
   * Return Tool data
   *
   * @returns {LinkToolData}
   */get data(){return this._data}
/**
   * @returns {object} - Link Tool styles
   */get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"link-tool",inputEl:"link-tool__input",inputHolder:"link-tool__input-holder",inputError:"link-tool__input-holder--error",linkContent:"link-tool__content",linkContentRendered:"link-tool__content--rendered",linkImage:"link-tool__image",linkTitle:"link-tool__title",linkDescription:"link-tool__description",linkText:"link-tool__anchor",progress:"link-tool__progress",progressLoading:"link-tool__progress--loading",progressLoaded:"link-tool__progress--loaded"}}
/**
   * Prepare input holder
   *
   * @returns {HTMLElement}
   */makeInputHolder(){const f=this.make("div",this.CSS.inputHolder);return this.nodes.progress=this.make("label",this.CSS.progress),this.nodes.input=this.make("div",[this.CSS.input,this.CSS.inputEl],{contentEditable:!this.readOnly}),this.nodes.input.dataset.placeholder=this.api.i18n.t("Link"),this.readOnly||(this.nodes.input.addEventListener("paste",(f=>{this.startFetching(f)})),this.nodes.input.addEventListener("keydown",(f=>{const[k,_]=[13,65],E=f.ctrlKey||f.metaKey;switch(f.keyCode){case k:f.preventDefault(),f.stopPropagation(),this.startFetching(f);break;case _:E&&this.selectLinkUrl(f);break}}))),f.appendChild(this.nodes.progress),f.appendChild(this.nodes.input),f
/**
   * Activates link data fetching by url
   *
   * @param {PasteEvent|KeyboardEvent} event - fetching could be fired by a pase or keydown events
   */}startFetching(f){let k=this.nodes.input.textContent;f.type==="paste"&&(k=(f.clipboardData||window.clipboardData).getData("text")),this.removeErrorStyle(),this.fetchLinkData(k)}removeErrorStyle(){this.nodes.inputHolder.classList.remove(this.CSS.inputError),this.nodes.inputHolder.insertBefore(this.nodes.progress,this.nodes.input)
/**
   * Select LinkTool input content by CMD+A
   *
   * @param {KeyboardEvent} event - keydown
   */}selectLinkUrl(f){f.preventDefault(),f.stopPropagation();const k=window.getSelection(),_=new Range,E=k.anchorNode.parentNode.closest(`.${this.CSS.inputHolder}`).querySelector(`.${this.CSS.inputEl}`);_.selectNodeContents(E),k.removeAllRanges(),k.addRange(_)
/**
   * Prepare link preview holder
   *
   * @returns {HTMLElement}
   */}prepareLinkPreview(){const f=this.make("a",this.CSS.linkContent,{target:"_blank",rel:"nofollow noindex noreferrer"});return this.nodes.linkImage=this.make("div",this.CSS.linkImage),this.nodes.linkTitle=this.make("div",this.CSS.linkTitle),this.nodes.linkDescription=this.make("p",this.CSS.linkDescription),this.nodes.linkText=this.make("span",this.CSS.linkText),f
/**
   * Compose link preview from fetched data
   *
   * @param {metaData} meta - link meta data
   */}showLinkPreview({image:f,title:k,description:_}){this.nodes.container.appendChild(this.nodes.linkContent),f&&f.url&&(this.nodes.linkImage.style.backgroundImage="url("+f.url+")",this.nodes.linkContent.appendChild(this.nodes.linkImage)),k&&(this.nodes.linkTitle.textContent=k,this.nodes.linkContent.appendChild(this.nodes.linkTitle)),_&&(this.nodes.linkDescription.textContent=_,this.nodes.linkContent.appendChild(this.nodes.linkDescription)),this.nodes.linkContent.classList.add(this.CSS.linkContentRendered),this.nodes.linkContent.setAttribute("href",this.data.link),this.nodes.linkContent.appendChild(this.nodes.linkText);try{this.nodes.linkText.textContent=new URL(this.data.link).hostname}catch{this.nodes.linkText.textContent=this.data.link}}showProgress(){this.nodes.progress.classList.add(this.CSS.progressLoading)}
/**
   * Hide loading progress bar
   *
   * @returns {Promise<void>}
   */hideProgress(){return new Promise((f=>{this.nodes.progress.classList.remove(this.CSS.progressLoading),this.nodes.progress.classList.add(this.CSS.progressLoaded),setTimeout(f,500)}))}applyErrorStyle(){this.nodes.inputHolder.classList.add(this.CSS.inputError),this.nodes.progress.remove()
/**
   * Sends to backend pasted url and receives link data
   *
   * @param {string} url - link source url
   */}async fetchLinkData(f){this.showProgress(),this.data={link:f};try{const{body:k}=await E.get({url:this.config.endpoint,headers:this.config.headers,data:{url:f}});this.onFetch(k)}catch{this.fetchingFailed(this.api.i18n.t("Couldn't fetch the link data"))}}
/**
   * Link data fetching callback
   *
   * @param {UploadResponseFormat} response - backend response
   */onFetch(f){if(!f||!f.success){this.fetchingFailed(this.api.i18n.t("Couldn't get this link data, try the other one"));return}const k=f.meta,_=f.link||this.data.link;this.data={meta:k,link:_},k?this.hideProgress().then((()=>{this.nodes.inputHolder.remove(),this.showLinkPreview(k)})):this.fetchingFailed(this.api.i18n.t("Wrong response format from the server"))}
/**
   * Handle link fetching errors
   *
   * @private
   *
   * @param {string} errorMessage - message to explain user what he should do
   */fetchingFailed(f){this.api.notifier.show({message:f,style:"error"}),this.applyErrorStyle()
/**
   * Helper method for elements creation
   *
   * @param {string} tagName - name of creating element
   * @param {string|string[]} [classNames] - list of CSS classes to add
   * @param {object} [attributes] - object with attributes to add
   * @returns {HTMLElement}
   */}make(f,k=null,_={}){const E=document.createElement(f);Array.isArray(k)?E.classList.add(...k):k&&E.classList.add(k);for(const f in _)E[f]=_[f];return E}}export{I as default};

